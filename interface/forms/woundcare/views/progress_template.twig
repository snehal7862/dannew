<html lang="en">

<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- JavaScript -->

    <link rel="stylesheet" href="../../../public/assets/jquery-ui-themes/jquery-ui.css">
    <script src="../../../public/assets/@eastdesire/jscolor/jscolor.min.js"></script>
    {{ setupHeader(['select2']) }}


    <title>{{ "Care Note"|e }}</title>
    <style>
        body {
            background-color: #F5F5F5;
        }

        .nodisplay {
            display: none !important;
            transition: display 500ms;
        }

        #suggestion li {
            list-style-type: none;
            cursor: pointer
        }

        #ifameData{
            padding: 0% 5%;
        }

        .header-start {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            color: #fff;
        {# padding-top: 1%;
        padding-bottom: 1%; #}
        }

        .header-left {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
        }

        .brand p {
            font-size: 24px;
            font-weight: 600;
        }

        .brand-save {
            display: flex;
            font-size: 18px;
        }

        .fa-cloud-upload {
            font-size: 32px;
        }

        .fa-rotate-right{
            font-size: 24px;
        }

        .fa-rotate-left{
            font-size: 24px;
        }

        .header-right {
            display: flex;
            justify-content: right;
            align-items: center;
        }

        .header-profile {
            display: flex;
            font-size: 24px;
        }

        .header-icon {
            font-size: 24px;
        }

        .date-left {
            padding-left: 22%;
            padding-top: 2%;
        }

        .date-left p {
            font-size: 18px;
            font-weight: bold;
        }

        .date-right {
            text-align: right;
            padding-right: 22%;
            padding-top: 8%;
        }

        .btn-ann {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            color: white;
            border: none;
            padding: 11px;
            border-radius: 10px;
            margin-left: -4%;
            position: relative;
            z-index: -1;
            padding-left: 4%;
        }

        .btn-pc {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            color: white;
            border: none;
            padding: 11px;
            border-radius: 10px;
            width: 35%;
        }

        .main-heading-ai {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .ai-button{
            margin-left: 150px;
            background: rgb(117, 60, 203) !important;
        }

        .main-heading-patient {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }

        .main-heading-patient p {
            font-size: 20px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .patient-name-area {
            background: white;
            margin: 1% 10%;
            box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
            border-radius: 10px;
            padding-top: 1%;
            padding-bottom: 1%;
        }

        .patient-area-start {
            padding: 0% 5%;
        }

        .form-fields-area {
            padding: 0 3%;
        }

        .physical_label {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 0px !important;
        }

        label {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 0px !important;
        }

        .location-area {
            /* background-image: linear-gradient(to right, #5DBDCE, #22B6A8); */
            background-image: linear-gradient(to right, #60A3D9, #00008B);
            color: white;
            margin-left: 4%;
            margin-right: auto;
            border-radius: 5px;
            padding: 2% 3%;
            font-size: 18px;
            font-weight: 600;
        }

        .custom-radio .custom-control-input:checked ~ .custom-control-label::before {
            background-color: #000;
        }

        .fa-caret-right {
            font-size: 22px;
            padding-right: 2%;
        }

        th {
            background-color: #55BDC9;
            color: white;
        }

        .button-area {
            display: flex;
            margin: 3% 10%;
        }

        .btn-save {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            width: 100%;
            padding-top: 5%;
            padding-bottom: 5%;
            border: none;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .btn-cancel {
            border: 3px solid #22B6A8;
            width: 100%;
            padding-top: 5%;
            padding-bottom: 5%;
            border-radius: 20px;
            color: #22B6A8;
            font-weight: 600;
            font-size: 18px;
        }

        .footer-start {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            color: #fff;
            padding-top: 2%;
            padding-bottom: 2%;
        }

        .copyright {
            background-color: white;
            color: #22B6A8;
            padding-left: 6px;
            padding-right: 6px;
            border-radius: 50px;
        }

        #progress-bar {
            opacity: 0;
        }

        label.button {
            max-width: 210px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: linear-gradient(to left top, #7dc6dd, #7ec6de, #7ec6de, #7fc6df, #80c6df, #7bc6dd, #77c5dc, #72c5da, #68c4d5, #5ec3ce, #56c2c7, #4fc0bf);
            color: #fff;
            margin: 0 auto;
        }

        /* upload input css start here */
        a {
            color: #369;
        }

        .note {
            width: 500px;
            margin: 50px auto;
            font-size: 1.1em;
            color: #333;
            text-align: justify;
        }

        #drop-area {
            border: 2px dashed #2bb7ae;
            border-radius: 20px;
            width: 100%;
            padding: 20px 10px;
        }

        #drop-area.highlight {
            border-color: #2bb7ae;
        }

        p {
            margin-top: 0;
        }

        .my-form {
            margin-bottom: 10px;
        }

        .gallery {
            margin-top: 10px;
        }

        .gallery img {
            width: 150px;
            margin-bottom: 10px;
            margin-right: 10px;
            vertical-align: middle;
        }

        .dermitology_gallery {
            margin-top: 10px;
        }

        .dermitology_gallery img {
            width: 150px;
            margin-bottom: 10px;
            margin-right: 10px;
            vertical-align: middle;
        }

        .button {
            display: inline-block;
            padding: 10px;
            background: #ccc;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .fileElem {
            display: none;
        }

        .fileElemDermitology {
            display: none;
        }

        label.button {
            max-width: 209px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* upload input css end here */

        /* Start template css */
        .add-template {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            padding: 11px;
            border-radius: 10px;
            color: #fff;
            height: 40px;
            border: none;
            line-height: 15px;
        }

        .borderShadow {
            background: var(--white);
            border: 1px solid var(--black);
            border-radius: 6px;
            box-shadow: 5px 5px 9px #dad7d7;
            margin: 1px auto;
            padding: 6px 10px;
            position: relative;
        }

        .canvas {
            /* background:#29c7c4;*/
            background-image: url('../../../interface/forms/eye_mag/images/beige013.jpg');
            background-repeat: repeat;
            background-size: 10% 10%;
        }

        .tools input[type="button"] {
            border: 1px solid var(--black);
            color: var(--black);
            display: inline-block;
            font-weight: bold;
            height: 15px;
            line-height: 15px;
            padding: 0 5px;
            text-align: center;
            text-decoration: none;
            vertical-align: middle;
            width: 10px;
        }

        .tools {
            border: 0 solid var(--black);
            color: var(--black);
            font-weight: bold;
            height: 50px;
            line-height: 30px;
            margin-bottom: -3px;
            padding: 10px;
            text-align: center;
            text-decoration: none;
            vertical-align: middle;
            width: 50px;
            width: 100%;
        }

        .tools div {
            background-image: url('../../../interface/forms/eye_mag/images/pencil_white.png');
            background-size: 35px 50px;
            float: left;
            margin-right: 50px;
            position: relative;
        }

        .Draw_class {
            padding: 2px;
        }

        .exam_section_right {
            float: left;
            margin: 5px auto;
            min-height: 415px;
            padding: 10px;
            top: 0;
            width: 550px;
        }

        .text_clinical {
            text-decoration: none;
        }

        .text_clinical a b {
            text-decoration: none;
        }

        .text_clinical a:hover {
            text-decoration: underline;
        }

        .text_clinical th {
            font-size: 1.1em;
            text-decoration: underline;
        }

        .clear_both {
            clear: both;
        }

        .color_indicator {
            border: 1pt solid #c0c0c0;
            border-bottom: var(--white);
            border-top: unset;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
            display: block;
            height: 20px;
            left: 3px;
            position: relative;
            top: 18px;
            width: 32px;
        }

        .template-model .modal-title {
            font-size: 25px !important;
            color: #000;
            font-weight: 700;
        }

        .template-model select.form-select {
            border: none;
            min-width: 350px;
            width: 100%;
            outline: none;
        }

        .template-model .modal-header {
            border-bottom: 0;
        }

        .template-model .modal-footer {
            border-top: 0;
        }

        .template-model .medical-title h4 {
            font-size: 20px;
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 0;
            margin-right: 15px;
        }

        .template-model .medical-title p {
            margin-bottom: 0;
            margin-left: auto;
            color: #5DBDCE;
        }

        .template-model svg path {
            fill: #5DBDCE;
        }

        .medical-form .form-group label {
            font-size: 18px;
            color: #000;
            font-weight: 600;
            margin-right: 9px;
        }

        .form-group span i,
        .medical-title span i {
            color: #5DBDCE;
        }

        {# .medical-form .form-group input,
        textarea {
            border-color: #495057 !important;
        } #}

        .medical-form .form-control:focus {
            box-shadow: unset;
            border-color: unset;
        }

        .cancel-btn {
            border: 1px solid #5DBDCE;
            color: #5DBDCE !important;
            padding: 5px 40px;
        }

        .done-btn {
            padding: 5px 40px;
            background-color: #5DBDCE;
            color: #fff;
            margin-right: 60px;
        }

        .modal-header input {
            outline: none;
            width: 100%;
            margin-top: 15px;
            display: none;
        }

        .main-heading-patient
            /* End template css */
            /*  */
        .assessment-txt p {
            color: #0056b3 !important;
        }

        .add-cpt-btn {
            background-image: linear-gradient(to right, #22B6A8, #5DBDCE);
            height: 40px;
            border: none;
            color: #fff;
            border-radius: 8px;
            padding: 8px 15px;
        }

        .cpt-box {
            gap: 15px;
        }

        .cpt-box select {
            width: 80%;
        }

        .procedure-textarea textarea {
            width: 100%;
        }

        .icd-number {
            gap: 10px;
        }

        body {
            font-family: sans-serif;
        }

        .noselect {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }


        .left-title {
            width: 220px;
        }

        .center-select {
            width: 52%;
        }

        .wrap-field {
            flex-wrap: wrap;
        }

        .wrap-field .title {
            width: 100%;
        }

        .wrap-field .input-field-area {
            width: 100%;
        }

        .wrap-field .input-field-area textarea {
            margin-left: 0 !important;
            border: 1px solid #495057 !important;
            background: transparent !important;
            width: 100% !important;
        }

        .custom-gap {
            gap: 8px;
        }

        .w-95 {
            width: 95%;
        }

        .add-cpt {
            min-width: 110px;
        }

        .modal-body-content p {
            font-size: 15px;
        }

        .plan-main {
            margin-left: 63px;
        }

        .select-btn {
            display: flex;
            width: 100%;
            align-items: center;
            gap: 6px;
        }

        .select2-results__option:hover {
            background-color: #129db4 !important; /* Replace with your desired hover color */
        }

        .select2-results__option--highlighted[aria-selected="true"] {
            background-color: #129db4 !important; /* Replace with your desired selected color */
            color: #fff; /* Replace with your desired text color */
        }

        .select2-selection__choice {
            background-color: #129db4 !important; /* Replace with your desired selected color */
            color: #fff; /* Replace with your desired text color */
        }

        .header{
            position: fixed;
            width: 100vw;
            z-index: 1000;
        }

        .start-top-date{
            padding-top: 65px;
        }

       [id^="woundTempalte-"], .dermatology-templates {
            width: 250px;
        }

        #undo, #redo {
             cursor: pointer;
        }

        .copy_button{
            /* background: #19b4b5de; */
            margin-left: 10px;
            margin-right: 10px;
        }

        .copy_icon{
            display: flex;
            justify-content: center;
            align-items: center;
            padding-right: 12px;
            padding-top: 7px;
            padding-bottom: 10px;
            padding-left: 4px;
        }

        .vertical_line {
            border-left: 3px solid black; 
            height: 40px; 
        }

        .info_center{
                display: flex;
                align-items: center;
                justify-content: center;
                color: #55BDC9;
        }

        .btn-position{
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  position:absolute;
}

.modal.right.fade.in .modal-dialog {
right:0 !important;
transform: translateX(-50%);
}
.modal.right .modal-content {
height:100%;
overflow:auto;
border-radius:0;
}
.modal.right .modal-dialog {
margin: auto;
height: 100%;
-webkit-transform: translate3d(0%, 0, 0);
-ms-transform: translate3d(0%, 0, 0);
-o-transform: translate3d(0%, 0, 0);
transform: translate3d(0%, 0, 0);
}
.modal.right.fade.in .modal-dialog {
transform: translateX(0%);
}
.modal.right.fade .modal-dialog {
right: 0px;
-webkit-transition: opacity 0.3s linear, right 0.3s ease-out;
-moz-transition: opacity 0.3s linear, right 0.3s ease-out;
-o-transition: opacity 0.3s linear, right 0.3s ease-out;
transition: opacity 0.3s linear, right 0.3s ease-out;
}
    
    
   .modal.right .modal-header {background-color:#50caff; color:#fff}
    .modal.right .modal-header::after {content:""; display:inline-block;}
    .modal.right .close {text-shadow:none; opacity:1; color:#ff4d4d; font-size:26px}
/*  form-control  */
    
    .form-control {border-radius:0; box-shadow:none}
    .form-control:focus {box-shadow:none}
    
    
/*  Button  */
    
    .btn {border-radius:0}

     #myFrame{
        width: 100%;
    }

     .modal-box{
        overflow-y:hidden !important;
        width:100% !important;
        margin-left:auto !important;
    }
    .ai-dialog{
        margin-left: auto !important;
        transform: inherit !important;
        margin-right: -22px !important;
        max-width: 50% !important;
    }

    #soapNoteTextarea{
        width: 100%;
    }

    </style>
</head>

<body>
<!-- ============================================ Start Main Header Section ==================================================-->
    <div class="modal right fade" id="myModal" role="dialog">
    <div class="modal-dialog ai-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-body">
         <iframe id="myFrame" style="height: 100vh;" src="https://dev.d11a1drlliaej1.amplifyapp.com/" allow="clipboard-read; clipboard-write"></iframe>
        </div>  
      </div>
      
    </div>
  </div>

    <section class="header">
        <div class="header-wrapper">
            <div class="header-start">
                <div class="col-md-12">
                    <div class="header-main d-flex">
                        <div class="col-md-6 header-left">
                            <div class="brand pt-2">
                                <p>{{ "Care Note"|e }}</p>
                            </div>
                            <div class="brand-save pt-2">
                                <i class="fa fa-rotate-left pr-4" id="undo"  title="Undo - Click to undo"></i>
                                <i class="fa fa-rotate-right pr-4" id="redo"  title="Redo - Click to redo"></i>
                                <i class="fa fa-cloud-upload pr-4"></i>
                                <p>Last Save 1 min. ago</p>
                            </div>
                        </div>


                        <div class="col-md-6 header-right">
                            <div class="header-icon pr-5">
                                <i class="fa fa-envelope"></i>
                            </div>
                            <div class="header-icon pr-5">
                                <i class="fa fa-calculator"></i>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================ End Main Header Section ==================================================-->

    <!-- ============================================ Start Form Section ==================================================-->
    <form name="my_form" id="my_form" method="post" action="{% if woundcare_data is empty %}
    ../../forms/woundcare/save.php?mode=add
{% else %}
    ../../forms/woundcare/save.php?mode=update&id={{ woundcare_data.id|url_encode }}
{% endif %}">
    <input type="hidden" name="csrf_token" id="csrf_token" value="{{ csrfUtils|e }}">
    <input type="hidden" name="encounter" id="encounter" value="{{ encounter|e }}">
    <section>
        <div class="top-date-area">
            <div class="col-md-12">
                <div class="start-top-date d-flex px-5">
                    {# <div class="col-md-4">
                        <div class="date-left">
                            <p>Date</p>
                            <div class="date-area">
                                <input type="date" name="get_date" value="{{ woundcare_data is empty ?  '' : woundcare_data.get_date }}"
                                       style="border: 1px solid black; padding: 2%; border-radius: 10px;">
                                <button class="btn btn-ann">{{ "Add New Note"|e }}</button>
                            </div>
                        </div>
                    </div> #}
                    {# <div class="col-md-4">
                        <div class="date-left">
                            <p>Copy Note From:</p>
                            <div class="date-area">
                                <input type="date" name="copy_date" value="{{ woundcare_data is empty ?  '' : woundcare_data.copy_date }}"
                                       style="border: 1px solid black; padding: 2%; border-radius: 10px;">
                                <button class="btn btn-ann">{{ "Copy"|e }}</button>
                            </div>
                        </div>
                    </div> #}

                    {# <div class="col-md-4">
                        <div class="date-right">
                            <div class="top-chart">
                                <button class="btn btn-pc" id="progressChart">{{ "Progress Chart"|e }}</button>
                            </div>
                        </div>
                    </div> #}
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================ End Form Section ==================================================-->

    <!-- ========================================= Start Medical Information Section ============================================-->

{% if woundcare_data is not empty and userid != woundcare_data.edited_by %}
    <div class="alert alert-warning" role="alert">
       {{ "Form Already open by someone else to edit."|e }}
    </div>
{% endif %}


     <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-ai">
                        <div class="d-flex align-items-baseline left-title">
                            <p style="color: black;">{{ "Mediscribe Pro Note"|e }}</p>
                            {% if woundcare_data is not empty %}
                            <a class="btn" id="editAiNote" role="button">
                                <i class="fa fa-pencil pl-1 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            {% else %}
                            <a class="btn" id="editAiNote" role="button" hidden>
                                <i class="fa fa-pencil pl-1 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            {% endif %}
                            {# <a class="btn" role="button" id="medicalInformationCopy">
                                <i class="fa fa-clone pl-1 pr-5 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a> #}
                        </div>
                        
 <div>
                            <button type="button" class="ai-button btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" style="border-radius: 50px !important;"
                                    >Start here   +
                            </button>
                        </div>  
                        
                    </div>
                </div>
                
            </div>
            <div class="col-md-12">
            {# <div id="ifameData"></div> #}
            {% if woundcare_data is not empty %}
            <textarea class="form-control textarea" name="medimedscribeNote" id="soapNoteTextarea" value="{{ woundcare_data is empty ?  '' : woundcare_data.medimedscribeNote }}"  readonly>{{ woundcare_data is empty ?  '' : woundcare_data.medimedscribeNote }}</textarea>
            {% else %}
             <textarea class="form-control textarea" name="medimedscribeNote" id="soapNoteTextarea" hidden readonly></textarea>
            {% endif %}
            </div>
        </div>
    </section>
    

    <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-patient">
                        <div class="d-flex align-items-baseline left-title">
                            <p>{{ "Medical Information"|e }}</p>
                            <a class="btn" data-toggle="collapse" href="#medicalInformation" role="button"
                               aria-expanded="true" aria-controls="medicalInformation">
                                <i class="fa fa-pencil pl-1 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            <a class="btn" role="button" id="medicalInformationCopy">
                                <i class="fa fa-clone pl-1 pr-5 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                        </div>
                        <!--template dropdown -->
                        <select
                                class="select2 form-select shadow p-2 mt-3 bg-white rounded key1 template_select center-select"
                                aria-label="Default select example" id="medical_info">
                            <option selected>{{ "Select Template"|e }}</option>
                            {% for f in template %}
                                <option value="{{ f.id }}">{{ f.template_name }}</option>
                            {% endfor %}
                        </select>

                        <div class="ml-1 mr-1 d-none" id="medicalInfoDelete">
                            <i class="fa fa-trash" id="medicalInfoDeleteBtn" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                        </div>

                        <!--template dropdown-->
                        <div>
                            <button type="button" class="add-template" data-toggle="modal"
                                    data-target="#exampleModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 {{ woundcare_data is empty ? 'collapse' : '' }}" id="medicalInformation">
                    <div class="form-fields-area">
                        <div class="medical-field-area mt-2">
                            <label>Chief Complaint</label>
                            <textarea type="text" class="form-control field textarea" name="wc_complaint" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_complaint }}"
                                      id="wc_complaint" placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_complaint }}</textarea>
                        </div>
                        <div class="medical-field-area mt-2">
                            <label>{{ "HPI"|e }}</label>
                            <textarea type="text" class="form-control field autoresize textarea" name="wc_hpi" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_hpi }}" id="wc_hpi"
                                      placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_hpi }}</textarea>
                        </div>

                        <div class="medical-field-area3 mt-2">
                            <label>{{ "Current Medication"|e }} </label>
                            <textarea type="text" class="form-control field textarea" name="wc_current_medication" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_current_medication }}"
                                   id="wc_current_medication" placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_current_medication }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>{{ "Medical History"|e }} </label>
                            <textarea type="text" class="form-control field textarea" name="medical_history" value="{{ woundcare_data is empty ?  '' : woundcare_data.medical_history }}"
                                   id="wc_medical_history" placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.medical_history }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>{{ "Allergies/Intolerance"|e }}</label>
                            <textarea type="text" class="form-control field textarea" name="wc_allergies" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_allergies }}" id="wc_allergies"
                                   placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_allergies }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>{{ "Surgical History/Hospitalization"|e }} </label>
                            <textarea type="text" class="form-control field textarea" name="wc_surgical_history" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_surgical_history }}"
                                   id="wc_surgical_history" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_surgical_history }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>{{ "Social History"|e }} </label>
                            <textarea type="text" class="form-control field textarea" name="wc_social" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_social }}" id="wc_social"
                                      placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_social }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>{{ "Family History"|e }}</label>
                            <textarea type="text" class="form-control field textarea" name="wc_family" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_family }}" id="wc_family"
                                      placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_family }}</textarea>
                        </div>

                        <div class="medical-field-area mt-2">
                            <label>Review Of Systems</label>
                            <textarea type="text" class="form-control field textarea" name="wc_ros" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_ros }}" id="wc_ros"
                                      placeholder="{{ ""|e }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_ros }}</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ========================================= End Medical Information Section ============================================-->


    <!-- ========================================= Start Physical Exam Section ============================================-->
    <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-patient">
                        <div class="d-flex align-items-baseline left-title">
                            <p>{{ "Physical Exam"|e }}</p>
                            <a class="btn" data-toggle="collapse" href="#physicalExam" role="button"
                               aria-expanded="false" aria-controls="physicalExam">
                                <i class="fa fa-pencil pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            <a class="btn" role="button" id="physicalExamCopy">
                                <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                        </div>
                        <!--plysical exam dropdown -->
                        <select
                                class="select2 form-select shadow p-2 mt-3 bg-white rounded physical template_select center-select"
                                aria-label="Default select example" id="physical_exam">
                            <option selected>{{ "Select Template"|e }}</option>
                            {% for f in physicalqry %}
                                <option value="{{ f.id }}">{{ f.physical_exam_name }}</option>
                            {% endfor %}
                        </select>
                        <!--physical exam dropdown-->

                        <div class="ml-2 mr-2 d-none" id="physicalExamDelete">
                            <i class="fa fa-trash" id="physicalExamDeleteBtn" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                        </div>

                        <div>
                            <button type="button" class="add-template" data-toggle="modal"
                                    data-target="#physicalExamModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                        </div>
                    </div>
                </div>
                <div class=" {{ woundcare_data is empty ? 'collapse' : '' }}" id="physicalExam">
                    <div class="col-md-12">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-3 d-flex align-items-center">
                                <div class="col-md-2">
                                    <label>{{ "T"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control field" name="wc_t"  id="wc_t" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_t }}" placeholder="">
                                </div>
                            </div>

                            <div class="col-md-3 d-flex align-items-center">
                                <div class="col-md-2">
                                    <label>{{ "RR"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control field" name="wc_p" id="wc_p" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_p }}" placeholder="">
                                </div>
                            </div>
                            <div class="col-md-3 d-flex align-items-center">
                                <div class="col-md-2">
                                    <label>{{ "HR"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control field" name="wc_hr" id="wc_hr" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_hr }}" placeholder="">
                                </div>
                            </div>

                            <div class="col-md-3 d-flex align-items-center">
                                <div class="col-md-1">
                                    <label>{{ "BP"|e }}:</label>
                                </div>
                                <div class="col-md-12 d-flex">
                                     <div class="col-md-7">
                                        <input type="text" class="form-control field" name="wc_systolic" id="wc_systolic" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_systolic }}"
                                            placeholder="systolic">
                                    </div>
                                    <div class="vertical_line"></div>
                                    <div class="col-md-7">
                                       <input type="text" class="form-control field" name="wc_diastolic" id="wc_diastolic" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_diastolic }}"
                                           placeholder="diastolic">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-12 mt-4">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-3 d-flex">
                                <div class="col-md-2">
                                    <label>{{ "HT"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control field" name="wc_ht" id="wc_ht" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_ht }}"
                                           placeholder="inches">
                                </div>
                            </div>


                            <div class="col-md-3 d-flex">
                                <div class="col-md-2">
                                    <label>{{ "WT"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" class="form-control field" name="wc_wt" id="wc_wt" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_wt }}" placeholder="lbs">
                                </div>
                            </div>

                            <div class="col-md-3 d-flex">
                                <div class="col-md-2">
                                    <label>{{ "BMI"|e }}:</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="text" id="wc_bmi" class="form-control field" name="wc_bmi" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_bmi }}" placeholder=""
                                           readonly>
                                </div>
                            </div>


                        </div>
                    </div>

                    <div class="col-md-12 mt-4">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">

                                <label>{{ "General"|e }}: </label>
                                <textarea class="form-control field textarea" name="wc_general" id="wc_general"
                                          value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_general }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_general }}</textarea>
                            </div>


                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">

                                <label>{{ "Head"|e }}:</label>
                                 <textarea class="form-control field textarea" name="wc_head" id="wc_head"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_head }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_head }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">

                                 <label>{{ "Ears"|e }}:</label>
                                 <textarea type="text" class="form-control field textarea" name="wc_ears" id="wc_ears"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_ears }}"
                                               rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_ears }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">

                                 <label>{{ "Eyes"|e }}:</label>
                                 <textarea type="text" class="form-control field textarea" name="wc_eyes" id="wc_eyes"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_eyes }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_eyes }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Nose"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_nose" id="wc_nose"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_nose }}"
                                                 rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_nose }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Throat/Oral Cavity"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_oral" id="wc_oral"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_oral }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_oral }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Neck/Thyroid"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_neck" id="wc_neck"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_neck }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_neck }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Heart"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_heart" id="wc_heart"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_heart }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_heart }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Lungs"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_lungs" id="wc_lungs"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_lungs }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_lungs }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Abdomen"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_abdomen"
                                                  id="wc_abdomen" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_abdomen }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_abdomen }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Back"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_back" id="wc_back"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_back }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_back }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Extremities"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_extremities"
                                                  id="wc_extremities" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_extremities }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_extremities }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                  <label>{{ "Skin"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_skin" id="wc_skin"
                                                  value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_skin }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_skin }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                   <label>{{ "Pelvic"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_pelvic" id="wc_pelvic"
                                                   value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_pelvic }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_pelvic }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                   <label>{{ "Breast"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_breast" id="wc_breast"
                                                   value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_breast }}" rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_breast }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                   <label>{{ "Genitourinary"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_genitourinary"
                                                  id="wc_genitourinary" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_genitourinary }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_genitourinary }}</textarea>
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                   <label>{{ "Neurologic"|e }}:</label>
                                   <textarea type="text" class="form-control field textarea" name="wc_neurologic"
                                                  id="wc_neurologic" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_neurologic }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_neurologic }}</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mt-2">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-12">
                                   <label>{{ "Musculoskeletal"|e }}:</label>
                                  <textarea type="text" class="form-control field textarea" name="wc_musculoskeletal"
                                                  id="wc_musculoskeletal" value="{{ woundcare_data is empty ?  '' : woundcare_data.wc_musculoskeletal }}"
                                                  rows="1">{{ woundcare_data is empty ?  '' : woundcare_data.wc_musculoskeletal }}</textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================= End Physical Exam Section ============================================-->

    <!-- ========================================= Start Wound Description Section ============================================-->
    {% if location_data is not empty %}


            <section>
                <div class="patient-name-area">
                    <div class="col-md-12">
                        <div class="patient-area-start">
                            <div class="main-heading-patient">
                                <div class="d-flex align-items-baseline">
                                    <p>{{ "Wound Care"|e }}</p>
                                    <a class="btn" role="button" id="woundCareCopy-1" card-count="1">
                                        <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                     </a>
                                </div>
                            </div>
                        </div>
                        {% for key, value in location_data %}
                         <input type="hidden" name="location[{{key + 1}}][location_id]" id="location[{{key + 1}}][location_id]" value="{{ value.location.id }}">
                        <div class="" id="wounddescription">
                            <div class="location-area" style="display: flex; justify-content:space-between;">
                                <div class="d-flex align-items-center custom-gap">
                                    <p class="mb-0">{{ "Problem"|e }} #{{key + 1}} </p>
                                    {% if key != 0%}
                                       <span class="copy_button">
                                         <a class="btn copy_icon" role="button" id="woundCareCopy-{{ key + 1 }}" card-count="{{ key + 1 }}">
                                            <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                                        </a>
                                       </span>
                                     {% endif %}
                                    <select class="form-select shadow p-2 bg-white rounded wound-template template_select select2"
                                            aria-label="Default select example" data-count="{{key + 1}}" id="woundTempalte-{{key + 1}}">
                                        <option selected>{{ "Select Template"|e }}</option>
                                        {% for wound in wound_template %}
                                            <option value="{{ wound.id|e }}">{{ wound.wound_template_name|e }}</option>
                                        {% endfor %}
                                    </select>
                                     <a class="btn d-none" role="button" id="woundCareDelete-{{key + 1}}">
                                    <i class="fa fa-trash" id="woundCareDeleteBtn-{{key + 1}}" wound-card="{{key + 1}}" aria-hidden="true" title="delete" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>

                                    <div>
                                        <button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                                data-target="#woundCareModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                                        </button>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 mt-3">
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Side"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_side-{{key + 1}}" name="location[{{key + 1}}][wc_side]">
                                                <option value="">{{ "Choose an Option"|e }}</option>
                                                {% for side in sides %}
                                                    <option value="{{ side }}" {% if value.location.wc_side == side %}selected{% endif %}>
                                                        {{ side }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Anatomical Direction"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_anatomical-{{key + 1}}"
                                                    name="location[{{key + 1}}][wc_anatomical]">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for anatomical in anatomicalDirection %}
                                                    <option value="{{ anatomical }}" {% if value.location.wc_anatomical == anatomical %}selected{% endif %}>{{ anatomical }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Location"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_location-{{key + 1}}" name="location[{{key + 1}}][wc_location]">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for location in locations %}
                                                    <option value="{{ location }}" {% if value.location.wc_location == location %}selected{% endif %}>{{ location }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Wound Type"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_wound_type-{{key + 1}}"
                                                    name="location[{{key + 1}}][wc_wound_type]">
                                                <option>Choose an Option</option>
                                                {% for woundType in woundTypes %}
                                                    <option value="{{ woundType }}" {% if value.location.wc_wound_type == woundType %}selected{% endif %}>{{ woundType }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Wound Thickness or Wagner"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_thickness-{{key + 1}}" name="location[{{key + 1}}][wc_thickness]">
                                                <option>Choose an Option</option>
                                                {% for wound in woundThickness %}
                                                    <option value="{{ wound }}" {% if value.location.wc_thickness == wound %}selected{% endif %}>{{ wound }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Drainage Amount"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_drainage_amount-{{key + 1}}"
                                                    name="location[{{key + 1}}][wc_drainage_amount]">
                                                <option>Choose an Option</option>
                                                {% for drainage in drainageAmount %}
                                                    <option value="{{ drainage }}" {% if value.location.wc_drainage_amount == drainage %}selected{% endif %}>{{ drainage }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-fields-area d-flex">

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Drainage Description"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_drainage_description-{{key + 1}}"
                                                    name="location[{{key + 1}}][wc_drainage_description]">
                                                <option>Choose an Option</option>
                                                {% for description in drainageDescription %}
                                                    <option value="{{ description }}" {% if value.location.wc_drainage_description == description %}selected{% endif %}>{{ description }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Debrided/Surgically Created"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control field" id="wc_surgically-{{key + 1}}"
                                                    name="location[{{key + 1}}][wc_surgically]">
                                                <option>Choose an Option</option>
                                                {% for surgical in surgically %}
                                                    <option value="{{ surgical }}" {% if value.location.wc_surgically == surgical %}selected{% endif %}>{{ surgical }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Undermining"|e }}</p>
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-8">
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_undermining-{{key + 1}}"
                                                               name="location[{{key + 1}}][wc_undermining]"
                                                               class="form-check-inline wc_undermining-yes-{{key + 1}} field"
                                                               value="Yes" {% if value.location.wc_undermining == 'Yes' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_undermining"> Yes</p>
                                                    </div>
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_undermining-{{key + 1}}"
                                                               name="location[{{key + 1}}][wc_undermining]"
                                                               class="form-check-inline wc_undermining-no-{{key + 1}} field"
                                                               value="No" {% if value.location.wc_undermining == 'No' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_undermining"> No</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="colck-main-image-{{key + 1}}-first">
                                            <img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-1" alt=""
                                                 data-toggle="modal" style="cursor:pointer" data-value="{{key + 1}}" data-image="first">
                                            <input type="hidden" id="clock_id" class="clock_id">
                                            <input type="hidden" id="image_id" class="image_id">
                                        </div>
                                        <div id="clock-image-{{key + 1}}-first" class="d-none clock-model-id-1" data-toggle="modal"
                                             data-target="#DrawClockDynamicModal" style="cursor:pointer" data-value="{{key + 1}}" data-image="first"></div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Tunneling"|e }}</p>
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-8">
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_tunneling-{{key + 1}}"
                                                               name="location[{{key + 1}}][wc_tunneling]"
                                                               class="form-check-inline wc_tunneling-yes-{{key + 1}} field"
                                                               value="Yes" {% if value.location.wc_tunneling == 'Yes' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_tunneling"> Yes</p>
                                                    </div>
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_tunneling-{{key + 1}}"
                                                               name="location[{{key + 1}}][wc_tunneling]"
                                                               class="form-check-inline wc_tunneling-no-{{key + 1}} field"
                                                               value="No" {% if value.location.wc_tunneling == 'No' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_tunneling"> No</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="colck-main-image-{{key + 1}}-second">
                                            <img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-2" alt=""
                                                 data-toggle="modal" style="cursor:pointer" data-value="{{key + 1}}" data-image="second">
                                            <input type="hidden" id="clock_id" class="clock_id">
                                            <input type="hidden" id="image_id" class="image_id">
                                        </div>
                                        <div id="clock-image-{{key + 1}}-second" class="d-none clock-model-id-2" data-toggle="modal"
                                             data-target="#DrawClockDynamicModal" style="cursor:pointer" data-value="{{key + 1}}" data-image="second"></div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Odor"|e }}</p>
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-8">
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_ordo-{{key + 1}}" name="location[{{key + 1}}][wc_ordo]"
                                                               class="form-check-inline wc_ordo-yes-{{key + 1}} field" value="Yes" {% if value.location.wc_ordo == 'Yes' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_ordo"> {{ "Yes"|e }}</p>
                                                    </div>
                                                    <div class="form-check-inline">
                                                        <input type="radio" id="wc_ordo-{{key + 1}}" name="location[{{key + 1}}][wc_ordo]"
                                                               class="form-check-inline  wc_ordo-no-{{key + 1}} field" value="No" {% if value.location.wc_ordo == 'No' %}checked{% endif %}>
                                                        <p class="form-check-label" for="wc_ordo">{{ "No"|e }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 mt-3">
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-10">
                                        <div class="d-flex">
                                            <i class="fa fa-caret-right"></i>
                                            <p>{{ "Are there 2 or more of these signs (stalled healing, friable granulation,
                                        increased exudate, increased/new ordor, localized edema, increased/ new
                                        pain)?"|e }}
                                            </p>
                                        </div>
                                    </div>

                                    <div class="col-md-2">
                                        <div class="form-check-inline">
                                            <input type="radio" id="wc_signs1-{{key + 1}}" name="location[{{key + 1}}][wc_signs1]"
                                                   class="form-check-inline field" value="Yes" {% if value.location.wc_signs1 == 'Yes' %}checked{% endif %}>
                                            <p class="form-check-label" for="wc_signs1"> {{ "Yes"|e }}</p>
                                        </div>
                                        <div class="form-check-inline">
                                            <input type="radio" id="wc_signs1-{{key + 1}}" name="location[{{key + 1}}][wc_signs1]"
                                                   class="form-check-inline field" value="No" {% if value.location.wc_signs1 == 'No' %}checked{% endif %}>
                                            <p class="form-check-label" for="wc_signs1"> {{ "No"|e }}</p>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-12 mt-3">
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-10">
                                        <div class="d-flex">
                                            <i class="fa fa-caret-right"></i>
                                            <p>{{ "Is there at least one of these signs (increasing induration and spreading
                                        erythema, wound breakdown, lymphangitis, malaise)?"|e }}</p>
                                        </div>
                                    </div>

                                    <div class="col-md-2">
                                        <div class="form-check-inline">
                                            <input type="radio" id="wc_signs2-{{key + 1}}" name="location[{{key + 1}}][wc_signs2]"
                                                   class="form-check-inline field" value="Yes" {% if value.location.wc_signs2 == 'Yes' %}checked{% endif %}>
                                            <p class="form-check-label" for="wc_signs2"> {{ "Yes"|e }}</p>
                                        </div>
                                        <div class="form-check-inline">
                                            <input type="radio" id="wc_signs2-{{key + 1}}" name="location[{{key + 1}}][wc_signs2]"
                                                   class="form-check-inline field" value="No" {% if value.location.wc_signs2 == 'No' %}checked{% endif %}>
                                            <p class="form-check-label" for="wc_signs2"> {{ "No"|e }}</p>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-12 mt-4">
                                <p class="pl-5 physical_label">{{ "Dimension"|e }}</p>
                                <div class="form-fields-area d-flex">
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Length (L)"|e }}</p>
                                        <div class="form-group d-flex">
                                            <input type="text" name="location[{{key + 1}}][wc_length]" class="form-control w-15 wound-template-length click-event-class field"
                                                   id="wc_length-{{key + 1}}" value="{{ value.location.wc_length}}"
                                                   style="width: 60px" onkeyup="calculateSurfaceArea()">
                                            <p class="pl-3">{{ "cm"|e }}</p>
                                        </div>

                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Width (W)"|e }}</p>
                                        <div class="form-group d-flex">
                                            <input type="text" name="location[{{key + 1}}][wc_width]" class="form-control wound-template-width click-event-class field"
                                                   id="wc_width-{{key + 1}}" value="{{ value.location.wc_width}}"
                                                   onkeyup="calculateSurfaceArea()"
                                                   style="width: 60px" data-unique-id="{{key + 1}}">
                                            <p class="pl-3">cm</p>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ "Depth (D)"|e }}</p>
                                        <div class="form-group d-flex">
                                            <input type="text" name="location[{{key + 1}}][wc_depth]" class="form-control wound-template-depth field" id="wc_depth-{{key + 1}}"
                                                   value="{{ value.location.wc_depth}}"
                                                   onkeyup="calculateVolume()" style="width: 60px">
                                            <p class="pl-3">cm</p>
                                        </div>
                                    </div>

                                </div>


                                <div class="form-fields-area d-flex">
                                    <div class="col-md-4">
                                        <p class="physical_label">{{ 'Surface Area (L x W)'|e }}</p>
                                        <div class="form-group d-flex">
                                            <input type="text" class="form-control wound-template-surface-area field"
                                                   id="wc_surfacearea-{{key + 1}}"
                                                   name="location[{{key + 1}}][wc_surfacearea]" value="{{ value.location.wc_surfacearea}}" readonly style="width: 80px">
                                            <p class="pl-3">cm</p>
                                        </div>

                                    </div>

                                    <div class="col-md-4">
                                        <p class="physical_label">{{ 'Volume (L x W x D)'|e }}</p>
                                        <div class="form-group d-flex">
                                            <input type="text" class="form-control wound-template-volume field" id="wc_volume-{{key + 1}}"
                                                   name="location[{{key + 1}}][wc_volume]" value="{{ value.location.wc_volume}}" readonly style="width: 120px">
                                            <p class="pl-3">cm</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 mt-2" style="padding-left: 60px;">
                                <p class="physical_label pl-5">{{ "IMAGES"|e }}</p>
                                <!-- img upload section start here -->
                                <div class="drop-drag-img">
                                    <div id="drop-area">
                                        <div class="my-form">
                                            <input type="file" id="fileElem-{{key + 1}}" multiple accept="image/*"
                                                   onchange="handleFiles(this.files, {{key + 1}})" class="fileElem">
                                            <label class="button" for="fileElem-{{key + 1}}">{{ 'Select Files'|e }}</label>
                                        </div>
                                        <p class="text-center">{{ 'Or Drag and Drop Images Here'|e }}</p>
                                        <progress id="progress-bar" max=100 value=0></progress>
                                        <div id="gallery-{{key + 1}}" class="gallery"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- img upload section end here -->

                        <div class="col-md-12 mb-2" style="padding-left: 60px;">
                            <div class="main-heading-patient align-items-baseline flex-wrap mt-2">
                                <div class="assessment-txt d-flex align-items-baseline">
                                    <p class="physical_label">{{ "ASSESSMENT"|e }}</p>
                                </div>
                                <select class="form-select select2  shadow p-2 mt-3 bg-white rounded assessment_template_select field"
                                        aria-label="Default select example" data-wount="{{key + 1}}" id="wound_care_assessment-{{key + 1}}" style="width: 60%;">
                                    <option selected>{{ "Select Template"|e }}</option>
                                    {% for assessment in assessments %}
                                        <option value="{{ assessment.id }}">{{ assessment.assessment_name|e }}</option>
                                    {% endfor %}

                                </select>
                                <!--template dropdown-->
                                <div>
                                    <button type="button" class="add-template" data-toggle="modal"
                                            data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                                    </button>
                                </div>
                            </div>

                        </div>

                        <div class="col-md-12">
                            <div class="form-fields-area icd-number">
                                <p class="mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}: </p>
                                <div class="col-md-12 d-flex">

                                    <select class="form-control select2 icd_codes_all icd-code-change field" data-wount="{{key + 1}}"
                                            id="wc_wound_icd-{{key + 1}}" style="width: 60%" multiple>
                                        <option>{{ 'Choose an Option'|e }}</option>


                                        {% set selectedValuesArray = value.location.icd_10|split(',') %}


                                        {# {% for key, value in icd10s %}
                                            <option value="{{ key }}" {% if key in selectedValuesArray %}selected{% endif %}>{{ value }}</option>
                                        {% endfor %} #}
                                        {% for f in icd10s %}
                                    <option value={{ f.icd_name }} {% if f.icd_name in selectedValuesArray %}selected{% endif %}>{{ f.icd_code }}</option>
                                {% endfor %}
                                    </select>
                                    <button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button>
                                </div>

                            </div>

                            <div class="add_icd_dropdown_1"></div>

                        </div>

                        <div class="col-md-12 mt-2">
                            <div class="form-fields-area">
                                <p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>
                                <input type="hidden" id="wc_icd-{{key + 1}}" name="location[{{key + 1}}][icd_10]" class="form-control ml-3" value="{{value.location.icd_10}}">
                                <textarea type="text" id="wc_plan-{{key + 1}}" name="location[{{key + 1}}][wc_plan]"
                                       class="form-control ml-3 field textarea" rows="1" value="{{ value.location.wc_plan}}">{{ value.location.wc_plan}}</textarea>
                            </div>
                            <div class="form-fields-area mt-2">
                                <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>
                                <input type="text" id="wc_medication-{{key + 1}}" name="location[{{key + 1}}][wc_medication]"
                                       class="form-control ml-3 field" value="{{ value.location.wc_medication}}">
                            </div>
                        </div>
                        {# <div class="col-md-12 mb-2" style="padding-left: 60px;">
                        <div class="main-heading-patient align-items-baseline flex-wrap mt-2">
                            <div class="assessment-txt d-flex align-items-baseline">
                                <a data-toggle="" href="#treatment" aria-expanded="true"
                               aria-controls="treatment">
                                <p class="physical_label">{{ "Treatment #1"|e }}</p>
                            </a>
                            <a class="btn" role="button" id="woundCareTreatmentCopy">
                                <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            </div>
                        </div>

                    </div> #}

                    </div>

                    {% set locationTreatmentCount = value.locationTreatment|length %}
                        {% if locationTreatmentCount == 0 %}
                        <div class="col-md-12 ml-3">
                                            <button type="button" class="add-template add_treatment mt-2 mb-2" treatment="{{ locationTreatmentCount }}">
                                                {{ "+ Add Treatment"|e }}
                                            </button>
                                        </div>
                        {% endif %}

                    {% for index, treatment in value.locationTreatment %}

                        {% if index + 1 == 1 and key + 1 == 1 %}
                                    <div class="col-md-12 ml-3">
                                        <button type="button" class="add-template add_treatment mt-2 mb-2" treatment="{{ locationTreatmentCount }}">
                                            {{ "+ Add Treatment"|e }}
                                        </button>
                                    </div>
                                {% endif %}


                                {% if index + 1 == 1 and key + 1 > 1 %}
                                    <div class="col-md-12 ml-3">
                                        <button type="button" class="add-template add_treatment{{ key + 1 }} testing mt-4 mb-4" treatment="{{ locationTreatmentCount }}" location="{{ key + 1 }}" onclick="add({{ key + 1 }}, this)">
                                            {{ "+ Add Treatment"|e }}
                                        </button>
                                    </div>
                                {% endif %}

                        <input type="hidden" name="location[{{key + 1}}][treatment][{{index + 1}}][treatment_id]" id="location[{{key + 1}}][treatment][{{index + 1}}][treatment_id]" value="{{ treatment.id }}">

                     <div class="col-md-12" style="padding-left: 50px;">
                        <div class="main-heading-patient flex-wrap align-items-baseline mt-2">
                            <div class="assessment-txt d-flex align-items-baseline">
                                <p>{{ "Treatment #" ~ (index + 1)|e }}</p>
                                 <a class="btn" role="button" id="woundCareTreatmentCopy-1" card-count="{{key + 1}}" card-treatment="{{index + 1}}">
                                        <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                    </a>
                            </div>

                            <select
                                    class="form-select select2 shadow p-2 ml-4 bg-white rounded procedure_notes center-select field"
                                    aria-label="Default select example" data-count="{{index + 1}}" data-location="{{key + 1}}" style="width: 60%;">
                                <option value="0">{{ 'Choose an Option'|e }}</option>
                                {% for p in procedureNotes %}
                                    <option value={{ p.id }}>{{ p.template }}</option>
                                {% endfor %}
                            </select>

                            <!--physical exam dropdown-->
                            <div>
                               <button type="button" class="add-template ml-3" data-toggle="modal"
                                    data-target="#procedureNotesModel"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                            </div>
                        </div>
                    </div>



                                <div class="col-md-12 mt-3">

                                    <div class="form-fields-area">
                                        <p class="mb-0 physical_label">{{ 'Procedure Notes'|e }}</p>
                                        <textarea class="form-control field textarea" rows="1" cols="125"
                                                  name="location[{{key + 1}}][treatment][{{index + 1}}][wc_procdure_notes]"
                                                  id="location_{{key + 1}}_procedure_{{index + 1}}" value="{{ treatment.wc_procdure_notes }}">{{ treatment.wc_procdure_notes}}</textarea>
                                    </div>



                                    <div class="form-fields-area mt-3">
                                        <p class="physical_label">{{ 'Additional Notes'|e }}</p>
                                        <textarea class="form-control field textarea" rows="1" cols="125"
                                                  name="location[{{key + 1}}][treatment][{{index + 1}}][wc_additional_notes]"
                                                  id="location_{{key + 1}}_additional_{{index + 1}}" value="{{ treatment.wc_additional_notes }}">{{ treatment.wc_additional_notes}}</textarea>
                                        <input type="hidden" id="wc_cpt_{{key + 1}}_code-{{index + 1}}" name="location[{{key + 1}}][treatment][{{index + 1}}][wc_cpt_code]"
                                               class="form-control" value="{{treatment.wc_cpt_code}}">
                                    </div>

                                </div>

                                <div class="col-md-12 mt-3">
                                    <div class="form-fields-area icd-number">
                                        <p class="mb-0 physical_label">{{ 'CPT Code'|e }}</p>
                                        <div class="col-md-12 d-flex p-0">

                                            {% set selectedValuesArray = treatment.wc_cpt_code|split(',') %}

                                            <select class="form-control cpt_codes_all select2 field" data-count="{{index + 1}}" data-location="{{key + 1}}"
                                                    id="location_{{key + 1}}_cpt_{{index + 1}}"
                                                    multiple style="width:100% !important">
                                                <option>{{ 'Choose an Option'|e }}</option>
                                                {% for f in cptCodes %}
                                                    {% set firstWord = f.cpt_code|split(' ')|first %}
                                                    <option value="{{ firstWord }}" {% if firstWord in selectedValuesArray %}selected{% endif %}>{{ f.cpt_code }}</option>
                                                {% endfor %}
                                            </select>
                                            <button type="button" class="add-template add-cpt ml-3" data-toggle="modal"
                                                    data-target="#addCptCodeModel">{{ "Add
                                        CPT"|e }}
                                            </button>
                                        </div>

                                    </div>

                                    <div class="add_icd_dropdown_1"></div>

                                </div>
                                {# {% if index + 1 == 1 %}

                    <div class="col-md-12 ml-3">
                        <button type="button" class="add-template add_treatment mt-2 mb-2" treatment="{{locationTreatmentCount}}"> {{ "+ Add
                            Treatment"|e }}
                        </button>
                    </div>
                    {% endif %} #}
{# 
                            </div>
                        </div> #}



                    {% endfor %}

                    {% if key + 1 == 1 %}
                        <div class="new_treatment"></div>
                    {% endif %}


                    {% if key + 1 > 1 %}
                        <div class="mt-2 ml-4 new_treatment{{key + 1}}"></div>
                    {% endif %}


                    {# <div class="new_location mt-4"></div> #}
                    <div class="new_edit_location mt-4" id="new_edit_location-{{key + 1}}">

            </div>
            <div class="new_edit_location mt-4" id="append_edit_location-{{key + 1}}">

            </div>


        {% endfor %}
                </div>
                </div>
                </div>
                 
                </div>
                </div>
            </section>

    {% else %}

        <section>
            <div class="patient-name-area">
                <div class="col-md-12">
                    <div class="patient-area-start">
                        <div class="main-heading-patient">
                            <div class="d-flex align-items-baseline">
                                <p>{{ "Wound Care"|e }}</p>
                                <a class="btn" data-toggle="collapse" href="#wounddescription" role="button"
                                   aria-expanded="false" aria-controls="woundDescription">
                                    <i class="fa fa-pencil pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                </a>
                                <a class="btn" role="button" id="woundCareCopy-1" card-count="1">
                                    <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="collapse" id="wounddescription">
                        <div class="location-area" style="display: flex; justify-content:space-between;">
                            <div class="d-flex align-items-center custom-gap">
                                <p class="mb-0">{{ "Problem"|e }} #1 </p>
                                <select class="form-select shadow p-2 bg-white rounded wound-template template_select select2"
                                        aria-label="Default select example" data-count="1" id="woundTempalte-1">
                                    <option selected>{{ "Select Template"|e }}</option>
                                    {% for wound in wound_template %}
                                        <option value="{{ wound.id|e }}">{{ wound.wound_template_name|e }}</option>
                                    {% endfor %}
                                </select>

                            <div>
                            <a class="btn d-none" role="button" id="woundCareDelete-1">
                                    <i class="fa fa-trash" id="woundCareDeleteBtn-1" wound-card="1" aria-hidden="true" title="delete" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>
                            <button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                    data-target="#woundCareModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Side"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_side-1" name="location[1][wc_side]">
                                        <option>{{ "Choose an Option"|e }}</option>
                                        {% for side in sides %}
                                            <option value="{{ side }}">{{ side }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Anatomical Direction"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_anatomical-1"
                                            name="location[1][wc_anatomical]">
                                        <option>{{ "Choose an Option"|e }}</option>
                                        {% for anatomical in anatomicalDirection %}
                                            <option value="{{ anatomical }}">{{ anatomical }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Location"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_location-1" name="location[1][wc_location]">
                                        <option>{{ "Choose an Option"|e }}</option>
                                        {% for location in locations %}
                                            <option value="{{ location }}">{{ location }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Wound Type"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_wound_type-1"
                                            name="location[1][wc_wound_type]">
                                        <option>Choose an Option</option>
                                        {% for woundType in woundTypes %}
                                            <option value="{{ woundType }}">{{ woundType }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Wound Thickness or Wagner"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_thickness-1" name="location[1][wc_thickness]">
                                        <option>Choose an Option</option>
                                        {% for wound in woundThickness %}
                                            <option value="{{ wound }}">{{ wound }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Drainage Amount"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_drainage_amount-1"
                                            name="location[1][wc_drainage_amount]">
                                        <option>Choose an Option</option>
                                        {% for drainage in drainageAmount %}
                                            <option value="{{ drainage }}">{{ drainage }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-fields-area d-flex">

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Drainage Description"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_drainage_description-1"
                                            name="location[1][wc_drainage_description]">
                                        <option>Choose an Option</option>
                                        {% for description in drainageDescription %}
                                            <option value="{{ description }}">{{ description }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Debrided/Surgically Created"|e }}</p>
                                <div class="form-group">
                                    <select class="form-control field" id="wc_surgically-1"
                                            name="location[1][wc_surgically]">
                                        <option>Choose an Option</option>
                                        {% for surgical in surgically %}
                                            <option value="{{ surgical }}">{{ surgical }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Undermining"|e }}</p>
                                <div class="container">
                                    <div class="row">
                                        <div class="col-8">
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_undermining-1"
                                                       name="location[1][wc_undermining]"
                                                       class="form-check-inline wc_undermining-yes-1 field"
                                                       value="Yes">
                                                <p class="form-check-label" for="wc_undermining"> Yes</p>
                                            </div>
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_undermining-1"
                                                       name="location[1][wc_undermining]"
                                                       class="form-check-inline wc_undermining-no-1 field"
                                                       value="No">
                                                <p class="form-check-label" for="wc_undermining"> No</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="colck-main-image-1-first">
                                    <img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-1" alt=""
                                         data-toggle="modal" style="cursor:pointer" data-value="1" data-image="first">
                                    <input type="hidden" id="clock_id" class="clock_id">
                                    <input type="hidden" id="image_id" class="image_id">
                                </div>
                                <div id="clock-image-1-first" class="d-none clock-model-id-1" data-toggle="modal"
                                     data-target="#DrawClockDynamicModal" style="cursor:pointer" data-value="1" data-image="first"></div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Tunneling"|e }}</p>
                                <div class="container">
                                    <div class="row">
                                        <div class="col-8">
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_tunneling-1"
                                                       name="location[1][wc_tunneling]"
                                                       class="form-check-inline wc_tunneling-yes-1 field"
                                                       value="Yes">
                                                <p class="form-check-label" for="wc_tunneling"> Yes</p>
                                            </div>
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_tunneling-1"
                                                       name="location[1][wc_tunneling]"
                                                       class="form-check-inline wc_tunneling-no-1 field"
                                                       value="No">
                                                <p class="form-check-label" for="wc_tunneling"> No</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="colck-main-image-1-second">
                                    <img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-2" alt=""
                                         data-toggle="modal" style="cursor:pointer" data-value="1" data-image="second">
                                    <input type="hidden" id="clock_id" class="clock_id">
                                    <input type="hidden" id="image_id" class="image_id">
                                </div>
                                <div id="clock-image-1-second" class="d-none clock-model-id-2" data-toggle="modal"
                                     data-target="#DrawClockDynamicModal" style="cursor:pointer" data-value="1" data-image="second"></div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Odor"|e }}</p>
                                <div class="container">
                                    <div class="row">
                                        <div class="col-8">
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_ordo-1" name="location[1][wc_ordo]"
                                                       class="form-check-inline wc_ordo-yes-1 field" value="Yes">
                                                <p class="form-check-label" for="wc_ordo"> {{ "Yes"|e }}</p>
                                            </div>
                                            <div class="form-check-inline">
                                                <input type="radio" id="wc_ordo-1" name="location[1][wc_ordo]"
                                                       class="form-check-inline  wc_ordo-no-1 field" value="No">
                                                <p class="form-check-label" for="wc_ordo">{{ "No"|e }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-10">
                                <div class="d-flex">
                                    <i class="fa fa-caret-right"></i>
                                    <p>{{ "Are there 2 or more of these signs (stalled healing, friable granulation,
                                        increased exudate, increased/new ordor, localized edema, increased/ new
                                        pain)?"|e }}
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-check-inline">
                                    <input type="radio" id="wc_signs1-1" name="location[1][wc_signs1]"
                                           class="form-check-inline field" value="Yes">
                                    <p class="form-check-label" for="wc_signs1"> {{ "Yes"|e }}</p>
                                </div>
                                <div class="form-check-inline">
                                    <input type="radio" id="wc_signs1-1" name="location[1][wc_signs1]"
                                           class="form-check-inline field" value="No">
                                    <p class="form-check-label" for="wc_signs1"> {{ "No"|e }}</p>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-12 mt-3">
                        <div class="form-fields-area d-flex">
                            <div class="col-md-10">
                                <div class="d-flex">
                                    <i class="fa fa-caret-right"></i>
                                    <p>{{ "Is there at least one of these signs (increasing induration and spreading
                                        erythema, wound breakdown, lymphangitis, malaise)?"|e }}</p>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-check-inline">
                                    <input type="radio" id="wc_signs2-1" name="location[1][wc_signs2]"
                                           class="form-check-inline field" value="Yes">
                                    <p class="form-check-label" for="wc_signs2"> {{ "Yes"|e }}</p>
                                </div>
                                <div class="form-check-inline">
                                    <input type="radio" id="wc_signs2-1" name="location[1][wc_signs2]"
                                           class="form-check-inline field" value="No">
                                    <p class="form-check-label" for="wc_signs2"> {{ "No"|e }}</p>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-12 mt-4">
                        <p class="pl-5 physical_label">{{ "Dimension"|e }}</p>
                        <div class="form-fields-area d-flex">
                            <div class="col-md-4">
                                <p class="physical_label">{{ "Length (L)"|e }}</p>
                                <div class="form-group d-flex">
                                    <input type="text" name="location[1][wc_length]" class="form-control w-15 wound-template-length click-event-class field"
                                           id="wc_length-1" value=""
                                           style="width: 60px" onkeyup="calculateSurfaceArea()">
                                    <p class="pl-3">{{ "cm"|e }}</p>
                                </div>

                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Width (W)"|e }}</p>
                                <div class="form-group d-flex">
                                    <input type="text" name="location[1][wc_width]" class="form-control wound-template-width click-event-class field"
                                           id="wc_width-1" value=""
                                           onkeyup="calculateSurfaceArea()"
                                           style="width: 60px" data-unique-id="1">
                                    <p class="pl-3">cm</p>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ "Depth (D)"|e }}</p>
                                <div class="form-group d-flex">
                                    <input type="text" name="location[1][wc_depth]" class="form-control wound-template-depth field" id="wc_depth-1"
                                           value=""
                                           onkeyup="calculateVolume()" style="width: 60px">
                                    <p class="pl-3">cm</p>
                                </div>
                            </div>

                        </div>


                        <div class="form-fields-area d-flex">
                            <div class="col-md-4">
                                <p class="physical_label">{{ 'Surface Area (L x W)'|e }}</p>
                                <div class="form-group d-flex">
                                    <input type="text" class="form-control wound-template-surface-area field"
                                           id="wc_surfacearea-1"
                                           name="location[1][wc_surfacearea]" value="" readonly style="width: 80px">
                                    <p class="pl-3">cm</p>
                                </div>

                            </div>

                            <div class="col-md-4">
                                <p class="physical_label">{{ 'Volume (L x W x D)'|e }}</p>
                                <div class="form-group d-flex">
                                    <input type="text" class="form-control wound-template-volume field" id="wc_volume-1"
                                           name="location[1][wc_volume]" value="" readonly style="width: 120px">
                                    <p class="pl-3">cm</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 mt-2" style="padding-left: 60px;">
                        <p class="physical_label pl-5">{{ "IMAGES"|e }}</p>
                        <!-- img upload section start here -->
                        <div class="drop-drag-img">
                            <div id="drop-area">
                                <div class="my-form">
                                    <input type="file" id="fileElem-1" multiple accept="image/*"
                                           onchange="handleFiles(this.files, 1)" class="fileElem">
                                    <label class="button" for="fileElem-1">{{ 'Select Files'|e }}</label>
                                </div>
                                <p class="text-center">{{ 'Or Drag and Drop Images Here'|e }}</p>
                                <progress id="progress-bar" max=100 value=0></progress>
                                <div id="gallery-1" class="gallery"/>
                            </div>
                        </div>
                    </div>
                    </div>
                    <!-- img upload section end here -->

                    <div class="col-md-12 mb-2" style="padding-left: 60px;">
                        <div class="main-heading-patient align-items-baseline flex-wrap mt-2">
                            <div class="assessment-txt d-flex align-items-baseline">
                                <p class="physical_label">{{ "ASSESSMENT"|e }}</p>
                            </div>
                            <select class="form-select select2 shadow p-2 mt-3 bg-white rounded assessment_template_select field"
                                    aria-label="Default select example" data-wount="1" id="wound_care_assessment-1" style="width: 60%">
                                <option selected>{{ "Select Template"|e }}</option>
                                {% for assessment in assessments %}
                                    <option value="{{ assessment.id }}">{{ assessment.assessment_name|e }}</option>
                                {% endfor %}

                            </select>
                            <!--template dropdown-->
                            <div>
                            <button type="button" class="add-template" data-toggle="modal"
                                    data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                            </div>
                        </div>

                    </div>

                    <div class="col-md-12">
                        <div class="form-fields-area icd-number">
                        <p class="mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}: </p>
                            <div class="col-md-12 d-flex">
                            
                            <select class="form-control select2 icd_codes_all icd-code-change field" data-wount="1"
                                    id="wc_wound_icd-1" style="width: 60%" multiple>
                                <option>{{ 'Choose an Option'|e }}</option>
                                {# {% for key, value in icd10s %}
                                    <option value="{{ key }}">{{ value }}</option>
                                {% endfor %} #}
                                {% for f in icd10s %}
                                    <option value={{ f.icd_name }}>{{ f.icd_code }}</option>
                                {% endfor %}
                            </select>
                            <button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button>
                            </div>
                        
                        </div>
                        
                        <div class="add_icd_dropdown_1"></div>
                        
                    </div>

                <div class="col-md-12 mt-2">
                    <div class="form-fields-area">
                        <p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>
                        <input type="hidden" id="wc_icd-1" name="location[1][icd_10]" class="form-control ml-3">
                        <textarea type="text" id="wc_plan-1" name="location[1][wc_plan]"
                                  class="form-control ml-3 field textarea" rows="1"></textarea>
                    </div>
                    <div class="form-fields-area mt-2">
                        <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>
                        <input type="text" id="wc_medication-1" name="location[1][wc_medication]"
                               class="form-control ml-3 field">
                    </div>
                </div>

<div class="col-md-12 ml-3" id="secondTreatmentWound_1">
    <button type="button" class="add-template add_treatment mt-2 mb-2" treatment="0">
        {{ "+ Add Treatment"|e }}
    </button>
</div>

<div class="new_treatment"></div>


                <div class="new_location mt-4"></div>

            </div>
            </div>
            </div>
              </div>
        </section>


    {% endif %}

    <!-- ========================================= End Wound Description Section ============================================-->

    <!--- ============================================ Dermatology Start ============================================ -->
    {% if problem_data is not empty %}

        {# {% set problemDataCount = problem_data|length %} #}

            <section class="dermatology_card">
                <div class="patient-name-area">
                    <div class="col-md-12 dermatology-box">
                        <div class="patient-area-start">
                            <div class="main-heading-patient flex-wrap">
                                <div class="d-flex align-items-baseline">
                                    <p class="physical_label">{{ "Dermatology"|e }}</p>
                                    <a class="btn" role="button" id="dermitologyCopy-1">
                                        <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                    </a>
                                </div>
                            </div>
                        </div>

                        {% for key, value in problem_data %}
                        <input type="hidden" name="problem[{{key + 1}}][problem_id]" id="problem[{{key + 1}}][problem_id]" value="{{ value.problem.id }}">
                        <div class="" id="dermatology">
                            <div class="location-area" style="display: flex; justify-content:space-between;">
                                <div class="d-flex align-items-center custom-gap">
                                    <p class="mb-0 physical-label">{{ "Location"|e }} #{{key + 1}} </p>
                                    <span class="copy_button">
                                        {% if key != 0%}
                                            <a class="btn copy_icon" role="button" id="dermitologyCopy-{{ key + 1 }}" card-count="{{ key + 1 }}">
                                            <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                                        </a>
                                        {% endif %}
                                    </span>
                                    <select class="select2 form-select shadow p-2 bg-white rounded dermatology template_select dermatology-templates"
                                            aria-label="Default select example" id="dermatology-templates_{{key + 1}}" data-count="{{key + 1}}">
                                        <option selected id="dermitology_show">{{ "Select Template"|e }}</option>
                                        {% for d in dermatology %}
                                            <option value="{{ d.id|e }}">{{ d.template_name|e }}</option>
                                        {% endfor %}
                                    </select>
                                    <!--physical exam dropdown-->
                                    <div>
                                    <a class="btn d-none" role="button" id="dermitologyDelete-{{key + 1}}">
                                    <i class="fa fa-trash" id="dermitologyDeleteBtn-{{key + 1}}" dermo-card="{{key + 1}}" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>
                                        <button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                                data-target="#DermatologyModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                                        </button>
                                    </div>
                                </div>


                                {# <div class="wd-plus">
                                    {% if key + 1 == 1 %}
                                        <i class="fa fa-plus pl-2 pt-2 add_dermatology_edit_location" aria-hidden="true"
                                           style="color: #fff;" problem-count={{problemDataCount}}></i>
                                    {% endif %}
                                </div> #}
                            </div>
                            <div class="col-md-12 mt-3">
                                <div class="form-fields-area">
                                    <p class="mb-0 physical-label ml-3">{{ "Description:"|e }}</p>
                                    <textarea type="text" id="description-{{key + 1}}" name="problem[{{key + 1}}][dr_description]"
                                              class="form-control ml-3 field textarea" value="{{ value.problem.dr_description}}" rows="1">{{ value.problem.dr_description}}</textarea>
                                </div>
                                <div class="form-fields-area mt-1">
                                    <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Location:"|e }}</p>
                                    <input type="text" id="location-{{key + 1}}" name="problem[{{key + 1}}][dr_location]" class="form-control ml-3 field" value="{{ value.problem.dr_location}}">
                                </div>
                            </div>

                            <div class="col-md-4 mt-4" style="padding-left: 60px;">
                                <p class="pl-5 physical_label">{{ "IMAGES"|e }}</p>
                                <!-- img upload section start here -->
                                <div class="drop-drag-img">
                                    <div id="drop-area">
                                        <div class="my-form">
                                            <input type="file" id="fileElemDermitology-{{key + 1}}" data-file="{{key + 1}}" multiple
                                                   accept="image/*"
                                                   onchange="handleFilesdermotology(this.files, {{key + 1}})" class="fileElemDermitology">
                                            <label class="button" for="fileElemDermitology-{{key + 1}}">{{ 'Select Files'|e }}</label>
                                        </div>
                                        <p class="text-center">{{ 'Or Drag and Drop Images Here'|e }}</p>
                                        <progress id="progress-bar" max=100 value=0></progress>
                                        <div id="dermitology_gallery-{{key + 1}}" class="dermitology_gallery"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 mb-2" style="padding-left: 60px;">
                            <div class="main-heading-patient align-items-baseline flex-wrap mt-2">
                                <div class="assessment-txt d-flex align-items-baseline">
                                    <p>{{ "ASSESSMENT"|e }}</p>
                                </div>
                                <select class="form-select select2 shadow p-2 mt-3 bg-white rounded dermitology_assessment assessment_template_select"
                                        aria-label="Default select example" id="dermitology_assessment-{{key + 1}}"
                                        data-dermatologyLocationCountTotal="{{key + 1}}" style="width: 60%;">
                                    <option selected id="demitology_assesment">{{ "Select Template"|e }}</option>
                                    {% for assessment in assessments %}
                                        <option value="{{ assessment.id }}">{{ assessment.assessment_name|e }}</option>
                                    {% endfor %}

                                </select>
                                <!--template dropdown-->
                                <div>
                                    <button type="button" class="add-template" data-toggle="modal"
                                            data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                                    </button>
                                </div>
                            </div>

                        </div>

                        <div class="col-md-12">
                            <div class="form-fields-area icd-number">
                                <p class="mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}: </p>
                                <div class="col-md-12 d-flex">

                                    <select class="form-control ml-4 select2 code-change-dermitology icd_codes_all field"
                                            data-dermatologyLocationCountTotal="{{key + 1}}" id="wc_wound_medication_icd-{{key + 1}}"
                                            style="width: 60%" multiple>
                                        <option>{{ 'Choose an Option'|e }}</option>

                                        {% set selectedValueArray = value.problem.icd_10|split(',') %}


                                        {# {% for key, value in icd10s %}
                                            <option value="{{ key }}" {% if key in selectedValueArray %}selected{% endif %}>{{ value }}</option>
                                        {% endfor %} #}

                                        {% for f in icd10s %}
                                    <option value={{ f.icd_name }} {% if f.icd_name in selectedValueArray %}selected{% endif %}>{{ f.icd_code }}</option>
                                {% endfor %}
                                    </select>
                                    <button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button>
                                </div>

                            </div>

                        </div>

                        <div class="col-md-12 mt-1">
                            <div class="form-fields-area">
                                <p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>
                                <input type="hidden" id="wc_medication_icd-{{key + 1}}" name="problem[{{key + 1}}][icd_10]"
                                       class="form-control ml-3 field" value="{{value.problem.icd_10}}">
                                <textarea type="text" id="wc_plan_dermitology-{{key + 1}}" name="problem[{{key + 1}}][dr_plan]"
                                          class="form-control ml-3 field textarea" value="{{ value.problem.dr_plan}}" rows="1">{{ value.problem.dr_plan}}</textarea>
                            </div>
                            <div class="form-fields-area mt-1 mb-2">
                                <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>
                                <input type="text" id="wc_medication_dermitology-{{key + 1}}" name="problem[{{key + 1}}][dr_medication]"
                                       class="form-control ml-3 field" value="{{ value.problem.dr_medication}}">
                            </div>
                        </div>

                        {% set problemTreatmentCount = value.problemTreatment|length %}
                        {% if problemTreatmentCount == 0 %}
                                    <div class="col-md-12 ml-3">
                                        <button type="button" class="add-template add_dermatology_treatment mt-2 mb-2" treatment="{{ problemTreatmentCount }}"
                                                id="add_dermatology_treatment"> {{ "+ Add
                        Treatment"|e }}
                                        </button>
                                    </div>
                                {% endif %}

                        {% for index, treatment in value.problemTreatment %}

                               {% if index + 1 == 1 and key + 1 == 1 %}
                                    <div class="col-md-12 ml-3">
                                        <button type="button" class="add-template add_dermatology_treatment mt-2 mb-2" treatment="{{ problemTreatmentCount }}"
                                                id="add_dermatology_treatment"> {{ "+ Add
                        Treatment"|e }}
                                        </button>
                                    </div>
                                {% endif %}

                                {% if index + 1 == 1 and key + 1 > 1 %}
                                    <div class="col-md-12 ml-3">
                                        <button type="button" class="add-template mt-2 mb-2" treatment="{{ problemTreatmentCount }}" problem="{{ key + 1 }}"
                                                id="add_dermatology_treatment" onclick="addTreatment({{key + 1}}, this)"> {{ "+ Add
                        Treatment"|e }}
                                        </button>

                                    </div>
                                {% endif %}

                            <input type="hidden" name="problem[{{key + 1}}][treatment][{{index + 1}}][treatment_id]" id="problem[{{key + 1}}][treatment][{{index + 1}}][treatment_id]" value="{{ treatment.id }}">
                            <div class="col-md-12" style="padding-left: 60px;">
                                <div class="main-heading-patient flex-wrap align-items-baseline mt-2">
                                    <div class="assessment-txt d-flex align-items-baseline">
                                        <p>Treatment #{{index + 1}}</p>
                                        <a class="btn" role="button" id="dermitologyTreatmentCopy-1" card-count="{{key + 1}}" card-treatment="{{index + 1}}">
                                            <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                        </a>

                                    </div>

                                    <select class="form-select select2 procedure_notes procedure_notes_dermitology shadow p-2 bg-white rounded template_select center-select"
                                            data-count="{{index + 1}}" data-problem="{{key + 1}}"
                                            aria-label="Default select example" style="width: 60%;">
                                        <option selected value="0"
                                                id="procedurenote_show">{{ "Choose an Option"|e }}</option>
                                        {% for f in procedureNotes %}
                                            <option value="{{ f.id }}">{{ f.template }}</option>
                                        {% endfor %}
                                    </select>
                                    <!--physical exam dropdown-->
                                    <div>
                                        <button type="button" class="add-template" data-toggle="modal"
                                                data-target="#procedureNotesModel"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                                        </button>
                                    </div>
                                </div>

                            </div>

                            <div class="col-md-12 mt-3">

                                <div class="form-fields-area">
                                    <p class="mb-0 physical_label ml-3">{{ 'Procedure Notes'|e }}</p>
                                    <textarea class="textarea form-control ml-3 field textarea" rows="1" cols="125"
                                              name="problem[{{key + 1}}][treatment][{{index + 1}}][dr_procdure_notes]" id="problem_{{key + 1}}_procedure_{{index + 1}}" value="{{ treatment.dr_procdure_notes }}">{{ treatment.dr_procdure_notes }}</textarea>
                                </div>

                                <div class="form-fields-area mt-3">
                                    <p class="physical_label ml-3">{{ 'Additional Notes'|e }}</p>
                                    <textarea class="form-control ml-3 field textarea" rows="1" cols="125"
                                              name="problem[{{key + 1}}][treatment][{{index + 1}}][dr_additional_notes]"
                                              id="problem_{{key + 1}}_additional_{{index + 1}}" value="{{ treatment.dr_additional_notes }}">{{ treatment.dr_additional_notes }}</textarea>
                                    <input type="hidden" id="dermo_wc_cpt_{{key + 1}}_code_{{index + 1}}" name="problem[{{key + 1}}][treatment][{{index + 1}}][dr_cpt_code]"
                                           class="form-control ml-3" value="{{ treatment.dr_cpt_code }}">
                                </div>

                            </div>


                            <div class="col-md-12 mt-3 mb-2">

                                <div class="form-fields-area d-flex">
                                    <div class="col-md-12">
                                        <p class="physical_label">{{ 'CPT Code'|e }}</p>
                                        <div class="d-flex align-items-center custom-gap">
                                            {% set selectedValuesArray = treatment.dr_cpt_code|split(',') %}
                                            <select class="form-control select2 cpt_codes_dermitology_all"
                                                    data-count="{{index + 1}}" data-problem="{{key + 1}}" style="width:100% !important"
                                                    multiple id="problem_{{key + 1}}_cpt_{{index + 1}}">
                                                <option>{{ 'Choose an Option'|e }}</option>
                                                {% for f in cptCodes %}
                                                    {% set firstWord = f.cpt_code|split(' ')|first %}
                                                    <option value="{{ firstWord }}" {% if firstWord in selectedValuesArray %}selected{% endif %}>{{ f.cpt_code }}</option>
                                                {% endfor %}
                                            </select>

                                            <div>
                                                <button type="button" class="add-template add-cpt" data-toggle="modal"
                                                        data-target="#addCptCodeModel">{{ "Add
                                        CPT"|e }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>




                        {% endfor %}

                        {% if key + 1 == 1 %}
                            <div class="dermatology_new_treatment"></div>
                        {% endif %}


                        {% if key + 1 > 1 %}
                            <div class="mt-2 dermatology_new_treatment{{key + 1}}"></div>
                        {% endif %}

                    </div>

                     <div class="dermatology_new_edit_location mt-4" id="dermatology_new_edit_location-{{key + 1}}">

            </div>
            <div class="dermatology_new_edit_location mt-4" id="append_dermatology_edit_location-{{key + 1}}">

            </div>

                     {% endfor %}
                </div>

                </div>
                
                </div>
                </div>
                </div>
            </section>

    {% else %}

        <section class="dermatology_card">
            <div class="patient-name-area">
                <div class="col-md-12 dermatology-box">
                    <div class="patient-area-start">
                        <div class="main-heading-patient flex-wrap">
                            <div class="d-flex align-items-baseline">
                                <p class="physical_label">{{ "Dermatology"|e }}</p>
                                <a class="btn" data-toggle="collapse" href="#dermatology" role="button"
                                   aria-expanded="false" aria-controls="dermatology">
                                    <i class="fa fa-pencil pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                </a>
                                <a class="btn" role="button" id="dermitologyCopy-1" card-count="1">
                                    <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                </a>
                                
                            </div>
                        </div>
                    </div>
                    <div class="collapse" id="dermatology">
                        <div class="location-area" style="display: flex; justify-content:space-between;">
                            <div class="d-flex align-items-center custom-gap">
                                <p class="mb-0 physical-label">{{ "Problem"|e }} #1 </p>
                                <select class="select2 form-select shadow p-2 bg-white rounded dermatology template_select dermatology-templates"
                                        aria-label="Default select example" id="dermatology-templates_1" data-count="1">
                                    <option selected>{{ "Select Template"|e }}</option>
                                      {% for d in dermatology %}
                                            <option value="{{ d.id|e }}">{{ d.template_name|e }}</option>
                                        {% endfor %}
                                    {# {% for d in dermatology %}
                                    <option value="{{ d.id|e }}">{{ d.template_name|e }}</option>
                                {% endfor %} #}
                            </select>
                            <!--physical exam dropdown-->
                            <div>
                            <a class="btn d-none" role="button" id="dermitologyDelete-1">
                                    <i class="fa fa-trash" id="dermitologyDeleteBtn-1" dermo-card="1" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>
                            <button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                    data-target="#DermatologyModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                            </div>
                        </div>


                            {# <div class="wd-plus">
                                <i class="fa fa-plus pl-2 pt-2" aria-hidden="true"
                                   style="color: #fff;"></i>
                            </div> #}
                        </div>
                        <div class="col-md-12 mt-3">
                            <div class="form-fields-area">
                                <p class="mb-0 physical-label ml-3">{{ "Description:"|e }}</p>
                                <textarea type="text" id="description-1" name="problem[1][dr_description]"
                                          class="form-control ml-3 field textarea" rows="1"></textarea>
                            </div>
                            <div class="form-fields-area mt-1">
                                <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Location:"|e }}</p>
                                <input type="text" id="location-1" name="problem[1][dr_location]" class="form-control ml-3 field">
                            </div>
                        </div>

                        <div class="col-md-4 mt-4" style="padding-left: 60px;">
                            <p class="pl-5 physical_label">{{ "IMAGES"|e }}</p>
                            <!-- img upload section start here -->
                            <div class="drop-drag-img">
                                <div id="drop-area">
                                    <div class="my-form">
                                        <input type="file" id="fileElemDermitology-1" data-file="1" multiple
                                            accept="image/*"
                                            onchange="handleFilesdermotology(this.files, 1)" class="fileElemDermitology">
                                        <label class="button" for="fileElemDermitology-1">{{ 'Select Files'|e }}</label>
                                    </div>
                                    <p class="text-center">{{ 'Or Drag and Drop Images Here'|e }}</p>
                                    <progress id="progress-bar" max=100 value=0></progress>
                                    <div id="dermitology_gallery-1" class="dermitology_gallery"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mb-2" style="padding-left: 60px;">
                        <div class="main-heading-patient align-items-baseline flex-wrap mt-2">
                            <div class="assessment-txt d-flex align-items-baseline">
                                <p>{{ "ASSESSMENT"|e }}</p>
                            </div>
                            <select class="form-select select2 shadow p-2 mt-3 bg-white rounded dermitology_assessment assessment_template_select"
                                    aria-label="Default select example" id="dermitology_assessment-1"
                                    data-dermatologyLocationCountTotal="1" style="width: 60%;">
                                    <option selected>{{ "Select Template"|e }}</option>
                                {% for assessment in assessments %}
                                        <option value="{{ assessment.id }}">{{ assessment.assessment_name|e }}</option>
                                    {% endfor %}
                                {# {% for assessment in assessments %}
                                    <option value="{{ assessment.id }}">{{ assessment.assessment_name|e }}</option>
                                {% endfor %} #}

                            </select>
                            <!--template dropdown-->
                            <div>
                            <button type="button" class="add-template" data-toggle="modal"
                                    data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button>
                            </div>
                        </div>

                    </div>

                    <div class="col-md-12">
                        <div class="form-fields-area icd-number">
                        <p class="mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}: </p>
                            <div class="col-md-12 d-flex">
                            
                            <select class="form-control ml-4 select2 code-change-dermitology icd_codes_all field"
                                    data-dermatologyLocationCountTotal="1" id="wc_wound_medication_icd-1"
                                    style="width: 60%" multiple>
                                <option>{{ 'Choose an Option'|e }}</option>
                                {# {% for key, value in icd10s %}
                                    <option value="{{ key }}">{{ value }}</option>
                                {% endfor %} #}
                                {% for f in icd10s %}
                                    <option value={{ f.icd_name }}>{{ f.icd_code }}</option>
                                {% endfor %}
                            </select>
                            <button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button>
                            </div>
                        
                        </div>
                        
                    </div>
                
                <div class="col-md-12 mt-1">
                    <div class="form-fields-area">
                        <p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>
                        <input type="hidden" id="wc_medication_icd-1" name="problem[1][icd_10]"
                               class="form-control ml-3 field">
                        <textarea type="text" id="wc_plan_dermitology-1" name="problem[1][dr_plan]"
                                  class="form-control ml-3 field textarea" rows="1"></textarea>
                    </div>
                    <div class="form-fields-area mt-3 mb-2">
                        <p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>
                        <input type="text" id="wc_medication_dermitology-1" name="problem[1][dr_medication]"
                               class="form-control ml-3 field">
                    </div>
                </div>


                <div class="col-md-12 ml-3" id="secondTreatmentDermo_1">
                    <button type="button" class="add-template add_dermatology_treatment mt-2 mb-2" treatment="0">
                        {{ "+ Add Treatment"|e }}
                    </button>
                </div>


                <div class="dermatology_new_treatment">

                    </div>
                </div>
                <div class="dermatology_new_location"></div>
            </div>
            </div>
        </section>

    {% endif %}
    <!--- ============================================ End Dermatology ============================================ -->

    <!-- ========================================= Start Add Cart Section ============================================-->
    <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-patient">
                        <p>Add Card</p>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-fields-area d-flex">
                        <div class="col-md-4">
                            <div class="dropdown text-center">
                                <input type="hidden" name="location_get" id="location_get">

                                {% if location_data is not empty %}

                                    {% set locationDataCount = location_data|length %}

                                    {# <p>Number of items in location_data: {{ locationDataCount }}</p> #}


                                    <button type="button" class="btn btn-secondary-outline add_edit_location" location-count={{locationDataCount}}
                                    style="box-shadow: rgb(99 99 99 / 20%) 0px 2px 8px 0px; background: white; font-weight: 500; padding: 6px 25px; ">
                                                                    Wound
                                                                    Care
                                    </button>
                                {% else %}
                                    <button type="button" class="btn btn-secondary-outline add_location"
                                            style="box-shadow: rgb(99 99 99 / 20%) 0px 2px 8px 0px; background: white; font-weight: 500; padding: 6px 25px; ">
                                        Wound
                                        Care
                                    </button>
                                {% endif %}

                            </div>
                        </div>
                        <div class="col-md-6">
                            <input type="hidden" name="problem_get" id="problem_get">

                            {% if problem_data is not empty %}

                                    {% set problemDataCount = problem_data|length %}

                                    {# <p>Number of items in location_data: {{ locationDataCount }}</p> #}

                                    <button type="button" class="btn btn-secondary-outline add_dermatology_edit_location" problem-count={{problemDataCount}}
                                    style="box-shadow: rgb(99 99 99 / 20%) 0px 2px 8px 0px; background: white; font-weight: 500; padding: 6px 25px; ">
                                    Dermatology
                                    </button>
                                {% else %}
                                    <button type="button" class="btn btn-secondary-outline add_dermatology_location"
                                            style="box-shadow: rgb(99 99 99 / 20%) 0px 2px 8px 0px; background: white; font-weight: 500; padding: 6px 25px; ">
                                        Dermatology
                                    </button>
                                {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================= End Add Card Section ============================================-->

    <!-- ========================================= Start Billing Information Section ============================================-->
    <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-patient">
                        <div class="d-flex align-items-baseline">
                            <p>{{ 'Billing Information'|e }}</p>
                            <a class="btn" id="dobilling">
                                <i class="fa fa-pencil pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                                
                            </a>
                            
                            <a style="cursor:pointer;">
                                <i class="fa fa-refresh pl-4" id="refreshBilling" title="Click to refresh billing"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div>
                    {# <div class="col-md-12 mt-2"> #}
                        {# <h4 class="pl-2"
                            style="color:#000; padding: 1%; border: 2px solid #55BDC9; border-radius:20px;">
                            <button
                                    class="btn btn-primary" id="dobilling">
                                {{ 'Enter billing'|e }}</button>
                        </h4> #}
                    {# </div> #}
                    <div class="col-md-12">
                        <h4 class="pl-5" style="color:#55BDC9;">{{ ''|e }}</h4>
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th style="width: 10%;" scope="col">{{ 'Code'|e }}</th>
                                <th style="width: 40%;" scope="col">{{ 'Description'|e }}</th>
                                <th style="width: 10%;" scope="col">{{ 'Qty'|e }}</th>
                                <th style="width: 10%;" scope="col">{{ 'Modifiers'|e }}</th>
                                <th style="width: 20%;" scope="col">{{ 'Justify '|e }}</th>
                                <th style="width: 10%;" scope="col">{{ 'Notes'|e }}</th>
                            </tr>
                            </thead>
                            <tbody id="newData">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================= End Billing Information Section ============================================-->

    <!-- ========================================= Start E Prescribed Information Section ============================================-->
    <section>
        <div class="patient-name-area">
            <div class="col-md-12">
                <div class="patient-area-start">
                    <div class="main-heading-patient">
                        <div class="d-flex align-items-baseline">
                            <p>{{ "E Prescribed Information"|e }}</p>
                            <a class="btn" onclick="top.left_nav.loadFrame('1', 'eRx', '../interface/weno/indexrx.php?go=addWenoErx')">
                                <i class="fa fa-pencil pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a>
                            <a style="cursor:pointer;">
                                <i class="fa fa-refresh pl-4" id="refreshPrescription" title="Click to refresh prescription"></i>
                            </a>
                        </div>
                    </div>
                    {# <div class="main-heading-patient">
                        <div class="d-flex align-items-baseline">
                            <a class="btn" onclick="top.left_nav.loadFrame('1', 'eRx', '../interface/weno/indexrx.php?go=addWenoErx')">
                                {{ 'Enter Prescription'|e }}
                            </a>
                            <a href="#" onclick="top.left_nav.loadFrame('1', 'eRx', '../interface/weno/indexrx.php?go=addWenoErx')">eRx</a>
                            <!-- this works but needs to be in a new tab and not a completely new window -->
                        </div>
                    </div> #}
                </div>
                <div>
                    <div class="col-md-12 mt-2">
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th style="width: 20%;" scope="col">Drug</th>
                                <th style="width: 40%;" scope="col">Details</th>
                                <th style="width: 10%;" scope="col">Qty</th>
                                <th style="width: 10%;" scope="col">Refills</th>
                                <th style="width: 10%;" scope="col">Filled</th>
                            </tr>
                            </thead>
                            <tbody id="newPrescriptionData">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-12 mt-4">
            <div class="button-area">
                <!--<div class="col-md-6">
                    <button id="form_submit" class="btn-save">Save, Finish Later</button>
                </div>-->
                <div class="col-md-6">
                    <button class="btn-cancel">{{ "Save Note"|e }}</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================= End E Prescribed Information Section ============================================-->

    <!-- ========================================= Start Footer Section =============================================================-->
    <section class="footer">
        <div class="footer-wrapper">
            <div class="footer-start">
                <div class="col-md-12">
                    <div class="footer-main">
                        <p class="text-center">{{ "WoundCare"|e }} <span class="copyright">C</span> {{ "Developed by Temecula Web
                        Solutions"|e }}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</form>
</body>

<div class="template-model modal fade" id="DrawClockDynamicModal" tabindex="-1" role="dialog"
     aria-labelledby="DermatologyAssessmentModalCenter" aria-hidden="true">
    <div class="modal-dialog" role="document" style="position: relative;">
        <div class="modal-content">
            <div id="test_form" name="test_form">

                <div id="CLOCK_right" class="exam_section_right borderShadow text_clinical clear_both canvas"
                     style="position: absolute;">
                    <div id="Draw_CLOCK" name="Draw_CLOCK" style="text-align:center;height: 2.5in;"
                         class="Draw_class canvas">
                        <div id="CLOCK_canvas">
                            <div class="tools">
                                <div id="sketch_tooled_CLOCK_8">

                                         <span id="sketch_tool_CLOCK_color"
                                               class="color_indicator jscolor"
                                               data-jscolor="{ previewElement:'#sketch_tool_CLOCK_color',
                                     previewSize:75,
                                     valueElement:'#selColor_CLOCK',
                                     position:'right',
                                     value:'#000',
                                     hash:'true'
                                    }"
                                               data-target="selColor_CLOCK"
                                         ></span>
                                </div>
                                <input type="hidden" id="url_CLOCK" name="url_CLOCK"
                                       value="../../forms/woundcare/images/clock.PNG"/>
                                <input type="hidden" id="base_url_CLOCK" name="base_url_CLOCK"
                                       value="../../forms/woundcare/images/clock.PNG"/>
                                <input type="hidden" id="selWidth_CLOCK" value="1">
                                <input type="hidden" id="selColor_CLOCK" value="#000"/>

                                <img id="sketch_tools_CLOCK_1" onclick='$("#selColor_CLOCK").val("#1AA2E1");'
                                     src="../../forms/eye_mag/images/pencil_blue.png" style="height:30px;width:15px;">
                                <img id="sketch_tools_CLOCK_2" onclick='$("#selColor_CLOCK").val("#ff0");'
                                     src="../../forms/eye_mag/images/pencil_yellow.png" style="height:30px;width:15px;">
                                <img id="sketch_tools_CLOCK_3" onclick='$("#selColor_CLOCK").val("#ffad00");'
                                     src="../../forms/eye_mag/images/pencil_orange.png" style="height:30px;width:15px;">
                                <img id="sketch_tools_CLOCKCLOCK_4" onclick='$("#selColor_CLOCK").val("#AC8359");'
                                     src="../../forms/eye_mag/images/pencil_brown.png" style="height:30px;width:15px;">
                                <img id="sketch_tools_CLOCK_5" onclick='$("#selColor_CLOCK").val("#E10A17");'
                                     src="../../forms/eye_mag/images/pencil_red.png" style="height:30px;width:15px;">
                                <img id="sketch_tools_CLOCK_6" onclick='$("#selColor_CLOCK").val("#000");'
                                     src="../../forms/eye_mag/images/pencil_black.png" style="height:50px;width:15px;">
                                <img id="sketch_tools_CLOCK_7" onclick='$("#selColor_CLOCK").val("#fff");'
                                     src="../../forms/eye_mag/images/pencil_white.png" style="height:30px;width:15px;">

                                <span style="min-width:1in;">&nbsp;</span>
                                <!-- now to pencil size -->
                                <img id="sketch_sizes_CLOCK_1" onclick='$("#selWidth_CLOCK").val("1");'
                                     src="../../forms/eye_mag/images/brush_1.png"
                                     style="height:20px;width:20px; border-bottom: 2pt solid black;">
                                <img id="sketch_sizes_CLOCK_3" onclick='$("#selWidth_CLOCK").val("3");'
                                     src="../../forms/eye_mag/images/brush_3.png" style="height:20px;width:20px;"
                                     alt="">
                                <img id="sketch_sizes_CLOCK_5" onclick='$("#selWidth_CLOCK").val("5");'
                                     src="../../forms/eye_mag/images/brush_5.png" style="height:20px;width:20px;">
                                <img id="sketch_sizes_CLOCK_10" onclick='$("#selWidth_CLOCK").val("10");'
                                     src="../../forms/eye_mag/images/brush_10.png" style="height:20px;width:20px;">
                                <img id="sketch_sizes_CLOCK_15" onclick='$("#selWidth_CLOCK").val("15");'
                                     src="../../forms/eye_mag/images/brush_15.png" style="height:20px;width:20px;">
                            </div>

                            <div align="center" class="borderShadow">
                                <canvas id="myCanvas_CLOCK" name="myCanvas_CLOCK" width="450" height="225"></canvas>
                            </div>
                            <div style="margin-top: 7px;">
                                <button onclick="cUndo('CLOCK')" id="Undo_Canvas_CLOCK"
                                        class="ui-button ui-corner-all ui-widget">Undo
                                </button>
                                <button onclick="cRedo('CLOCK')" id="Redo_Canvas_CLOCK"
                                        class="ui-button ui-corner-all ui-widget">Redo
                                </button>
                                <button onclick="drawImage('CLOCK')" id="Revert_Canvas_CLOCK"
                                        class="ui-button ui-corner-all ui-widget">Revert
                                </button>
                                <button onclick="cReload('CLOCK')" id="Clear_Canvas_CLOCK"
                                        class="ui-button ui-corner-all ui-widget">New
                                </button>
                                <button id="Blank_Canvas_CLOCK" class="ui-button ui-corner-all ui-widget">Blank</button>
                            </div>
                            <div style="margin-top: 7px;">
                                <button id="Undo_Canvas_CLOCK" onclick="submit_canvas('CLOCK')"
                                        class="ui-button ui-corner-all ui-widget">Save
                                </button>
                                <button id="Redo_Canvas_CLOCK" onclick="cReload('CLOCK')" data-dismiss="modal"
                                        class="ui-button ui-corner-all ui-widget">Cancel
                                </button>
                            </div>
                        </div>
                        <div id="CLOCK_olddrawing"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

 <!--========================================= Start Add New Template Model ============================================  -->
    {# <div id="myModalAi" class="modal">
    <div class="modal-content">
        <span class="close" style="cursor:pointer;" data-dismiss="modal" aria-label="Close">&times;</span>
        <iframe id="" style="height: 100vh;" src="https://demo-mediscribepro.vercel.app/"></iframe>

    </div>
</div> #}
    <div class="template-model modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-bottom" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Medical Information'|e }}</h5>
                            </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded key-medical "
                                    aria-label="Default select example" id="template_name">
                                <option selected>{{ "Select Template"|e }}</option>
                                <option value="0">{{ "Create New Template"|e }}</option>
                                {% for f in template %}
                                    <option value="{{ f.id|e }}">{{ f.template_name|e }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="medical-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            </div>
                            <input type="text" placeholder="New Template Name" id="template" name="template">
                            <div id="template_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="medical-title d-flex align-items-center mb-4">
                            <h4>{{ "Medical Information"|e }}</h4>
                            <span><i class="fa-sharp fa-solid fa-rotate-left mr-2"></i></span>
                            <span><i class="fa-solid fa-rotate-right"></i></span>
                        </div>
                        <div class="medical-form">
                            <div class="form-group">
                                <label>Chief Complaint</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea class="form-control" placeholder="The patient is here for..."
                                          id="template_chief_complaint" name="template_chief_complaint"></textarea>
                            </div>
                            <div class="form-group">
                                <label>HPI</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="The patient is here for..."
                                          id="template_hip" name="template_hip"></textarea>
                            </div>
                            <div class="form-group">
                                <label>{{ "Current Medication"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <input type="text" class="form-control" placeholder="Norvasc 10Mg"
                                       id="template_current_medication" name="template_current_medication">
                            </div>
                            <div class="form-group">
                                <label>{{ "Medical History"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <input type="text" class="form-control" placeholder="Diabetes,E16.32"
                                       id="template_medical_history" name="template_medical_history">
                            </div>
                            <div class="form-group">
                                <label>{{ "Allergies/intolerance"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <input type="text" class="form-control" placeholder="NKDA" id="template_allergies"
                                       name="template_allergies">
                            </div>
                            <div class="form-group">
                                <label>{{ "Surgical History/Hospitalization"|e }}</label>.
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <input type="text" class="form-control" placeholder="None"
                                       id="template_surgical_history" name="template_surgical_history">
                            </div>
                            <div class="form-group">
                                <label>{{ "Social History"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control"
                                          placeholder="Smokes cigarrettes: No; Drinks alcohol: No"
                                          id="template_social_history" name="template_social_history"></textarea>
                            </div>
                            <div class="form-group">
                                <label>{{ "Family History"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="Skin canser: No"
                                          id="template_family_history" name="template_family_history"></textarea>
                            </div>
                            <div class="form-group">
                                <label>{{ "Review Of Systems"|e }}</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea name="" class="form-control"
                                          placeholder="Nausea: No, Vorniting: No, Diarrhea: No, Chils: No"
                                          id="template_ros" name="template_ros"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn medicalInformation">{{ "Done"|e }}</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Cancel"|e }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--========================================= End Add New Template Model ============================================  -->

 <!--========================================= Start Add New Physical Exam Model ============================================  -->

    <div class="template-model modal fade" id="physicalExamModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add New Physical Exam'|e }}</h5>
                            </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded physicalExamKey"
                                    aria-label="Default select example" id="exam_name">
                                <option selected>Open this select menu</option>
                                <option value="0">Create New Template</option>
                                {% for f in physicalqry %}
                                    <option value="{{ f.id }}">{{ f.physical_exam_name }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="physical-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                           
                            </div>
                            <input type="text" placeholder="New Template Name" id="template_exam_name"
                                   name="template_exam_name">
                            <div id="template_exam_name_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="medical-title d-flex align-items-center mb-4">
                            <h4>Physical Information</h4>
                            <span><i class="fa-sharp fa-solid fa-rotate-left mr-2"></i></span>
                            <span><i class="fa-solid fa-rotate-right"></i></span>
                        </div>
                        <div class="medical-form">
                            <div class="form-group">
                                <label>General</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea name="" class="form-control" placeholder="" id="template_general"
                                          name="template_general"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Head</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_head"
                                          name="template_head"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Eyes</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_eyes"
                                          name="template_eyes"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Nose</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_nose"
                                          name="template_nose"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Ears</label>.
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_ears"
                                          name="template_ears"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Throat/Oral Cavity</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_oral_cavity"
                                          name="template_oral_cavity"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Neck/Thyroid</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_neck"
                                          name="template_neck"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Heart</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_heart"
                                          name="template_heart"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Skin</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_skin"
                                          name="template_skin"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Lungs</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="lungs" id="template_lungs"
                                          name="template_lungs"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Abdomen</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_abdomen"
                                          name="template_abdomen"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Back</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_back"
                                          name="template_back"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Extremities</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_extemities"
                                          name="template_extemities"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Pelvic</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_pelvic"
                                          name="template_pelvic"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Breast</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_breast"
                                          name="template_breast"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Genitourinary</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_genitourinary"
                                          name="template_genitourinary"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Neurologic</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_neurologic"
                                          name="template_neurologic"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Musculoskeletal</label>
                                <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                                <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                                <span><i class="fas fa-microphone"></i></span>
                                <textarea type="text" class="form-control" placeholder="" id="template_musculoskeletal"
                                          name="template_musculoskeletal"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn physicalExam">Done</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--========================================= End Add New Physical Exam Model ============================================  -->

    <!--=========================================Create template for wound care card==================================================-->
    <div class="template-model modal fade" id="woundCareModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="woundCareModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div>
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add New Template'|e }}</h5>
                            </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded wound_key "
                                    aria-label="Default select example" id="wound_template_name">
                                <option selected>{{ "Select Template"|e }}</option>
                                <option value="0">{{ "Create New Template"|e }}</option>
                                {% for wound in wound_template %}
                                    <option value="{{ wound.id|e }}">{{ wound.wound_template_name|e }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="wound-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            
                            </div>
                            <input type="text" placeholder="New wound template" id="wound_template"
                                   name="wound_template">
                            <div id="wound_template_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="modal-body-content">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>{{ "Side"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_side" name="template_wc_side">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for side in sides %}
                                                    <option value="{{ side }}">{{ side }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>{{ "Anatomical Direction"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_anatomical"
                                                    name="template_wc_anatomical">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for anatomical in anatomicalDirection %}
                                                    <option>{{ anatomical }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>{{ "Location"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_location"
                                                    name="template_wc_location">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for location in locations %}
                                                    <option>{{ location }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>{{ "Wound Type"|e }}</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_wound_type"
                                                    name="template_wc_wound_type">
                                                <option>{{ "Choose an Option"|e }}</option>
                                                {% for woundType in woundTypes %}
                                                    <option>{{ woundType }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Wound Thickness or Wagner</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_thickness"
                                                    name="template_wc_thickness">
                                                <option>Choose an Option</option>
                                                {% for wound in woundThickness %}
                                                    <option>{{ wound }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Drainage Amount</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_drainage_amount"
                                                    name="template_wc_drainage_amount">
                                                <option>Choose an Option</option>
                                                {% for drainage in drainageAmount %}
                                                    <option>{{ drainage }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Drainage Description</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_drainage_description"
                                                    name="template_wc_drainage_description">
                                                <option>Choose an Option</option>
                                                {% for description in drainageDescription %}
                                                    <option>{{ description }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Debrided/Surgically Created</p>
                                        <div class="form-group">
                                            <select class="form-control" id="template_wc_surgically"
                                                    name="template_wc_surgically">
                                                <option>Choose an Option</option>
                                                {% for surgical in surgically %}
                                                    <option>{{ surgical }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="dimension-section">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <p>Undermining</p>
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col-8">
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_undermining"
                                                                   name="template_wc_undermining"
                                                                   class="form-check-inline template_wc_undermining-yes"
                                                                   value="Yes">
                                                            <p class="form-check-label" for="template_wc_undermining">
                                                                Yes</p>
                                                        </div>
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_undermining"
                                                                   name="template_wc_undermining"
                                                                   class="form-check-inline template_wc_undermining-no"
                                                                   value="No">
                                                            <p class="form-check-label" for="template_wc_undermining">
                                                                No</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <p>Tunneling</p>
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col-8">
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_tunneling"
                                                                   name="template_wc_tunneling"
                                                                   class="form-check-inline template_wc_tunneling-yes"
                                                                   value="Yes">
                                                            <p class="form-check-label" for="template_wc_tunneling">
                                                                Yes</p>
                                                        </div>
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_tunneling"
                                                                   name="template_wc_tunneling"
                                                                   class="form-check-inline template_wc_tunneling-no"
                                                                   value="No">
                                                            <p class="form-check-label" for="template_wc_tunneling">
                                                                No</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <p>Odor</p>
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col-8">
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_ordo"
                                                                   name="template_wc_ordo"
                                                                   class="form-check-inline template_wc_ordo-yes"
                                                                   value="Yes">
                                                            <p class="form-check-label" for="template_wc_ordo"> Yes</p>
                                                        </div>
                                                        <div class="form-check-inline">
                                                            <input type="radio" id="template_wc_ordo"
                                                                   name="template_wc_ordo"
                                                                   class="form-check-inline template_wc_ordo-no"
                                                                   value="No">
                                                            <p class="form-check-label" for="template_wc_ordo"> No</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 d-none">
                                            <p>{{ 'Surface Area (L x W)'|e }}</p>
                                            <div class="form-group d-flex">
                                                <input type="text" class="form-control wound-template-surface-area"
                                                       id="template_wc_surfacearea"
                                                       name="template_wc_surfacearea" value="" readonly
                                                       style="width: 80px">
                                                <p class="pl-3">cm</p>
                                            </div>

                                        </div>
                                        <div class="col-md-4 d-none">
                                            <p>{{ 'Volume (L x W x D)'|e }}</p>
                                            <div class="form-group d-flex">
                                                <input type="text" class="form-control wound-template-volume"
                                                       id="template_wc_volume"
                                                       name="template_wc_volume" value="" readonly
                                                       style="width: 120px">
                                                <p class="pl-3">cm</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn woundTemplate">{{ "Done"|e }}</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Cancel"|e }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--=========================================End template for wound care card==================================================-->


 <!--=========================================Create template for Dermatology card==================================================-->
    <div class="template-model modal fade" id="DermatologyModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="DermatologyModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add New Template'|e }}</h5>
                            </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded dermatology-key"
                                    aria-label="Default select example" id="dermatology-template_name">
                                <option selected>{{ "Select Template"|e }}</option>
                                <option value="0">{{ "Create New Template"|e }}</option>
                                {% for d in dermatology %}
                                    <option value="{{ d.id|e }}">{{ d.template_name|e }}</option>
                                {% endfor %}
                                </select>
                                <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="dermitology-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            
                            </div>
                            <input type="text" placeholder="New Template Name" id="dermatology-template"
                                   name="dermatology_template">
                            <div id="dermatology_template_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="Dermatology-model-content-body">
                            <div class="col-md-12 mt-3">
                                <div class="form-fields-area d-flex align-items-center">
                                    <p class="mb-0">Description:</p>
                                    <textarea type="text" id="dermatology-description" name="dermatology_description"
                                              class="form-control ml-3"></textarea>
                                </div>
                                <div class="form-fields-area d-flex mt-4 align-items-center">
                                    <p class="mb-0" style="max-width: 85px; width: 100%;">Location:</p>
                                    <input type="text" id="dermatology-location" name="dermatology_location"
                                           class="form-control ml-3">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn dermatology-Information">{{ "Done"|e }}</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Cancel"|e }}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--=========================================End template for Dermatology card==================================================-->

    <!--=========================================Create template for Dermatology assessment card==================================================-->
    <div class="template-model modal fade" id="DermatologyAssessmentModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="DermatologyAssessmentModalCenter" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add New Assessment
                                Template'|e }}</h5>
                            </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded key "
                                    aria-label="Default select example" id="template_name_new_data">
                                <option selected>{{ "Select Template"|e }}</option>
                                <option value="0">{{ "Create New Template"|e }}</option>
                                {% for assessment in assessments %}
                                    <option value="{{ assessment.id|e }}">{{ assessment.assessment_name|e }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="assessment-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            
                            </div>
                            <input type="text" placeholder="New Template Name" id="assessment_new_name"
                                   name="wound_template">
                            <div id="template_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">

                        <div class="assessment-model-content-body">
                            <div class="form-fields-area d-flex custom-gap select-btn">
                                <p class="">{{ 'ICD-10 Diagnosis Code'|e }}: </p>
                                <select class="form-control select2 icd_codes_all" id="assessment_icd10"
                                        name="assessment_icd10" style="width: 70%" multiple>
                                    <option>{{ 'Choose an Option'|e }}</option>
                                    {# {% for key, value in icd10s %}
                                        <option value="{{ key }}">{{ value }}</option>
                                    {% endfor %} #}
                                    {% for f in icd10s %}
                                        <option value={{ f.icd_name }}>{{ f.icd_code }}</option>
                                    {% endfor %}
                                </select>
                                <div>
                                    <button type="button" class="add-template">Add</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-fields-area d-flex mt-2">
                            <p>{{ 'Plan'|e }}:</p>
                            <textarea type="text" id="assessment-plan" name="assessment_plan"
                                      class="form-control plan-main assessment-plan"></textarea>
                        </div>
                        <div class="form-fields-area d-flex mt-4">
                            <p>{{ 'Medication'|e }}:</p>
                            <input type="text" id="assessment-medication" name="assessment_medication"
                                   class="form-control ml-3 assessment-medication">
                        </div>

                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn done-btn save-assessment">{{ "Done"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Cancel"|e }}</button>
                </div>
            </div>
        </div>
    </div>
    <!--=========================================End template for Dermatology assessment card==================================================-->


    <div class="template-model modal fade" id="procedureNotesModel" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add Procedure Notes'|e }}</h5>
                            </div>
                            <div class="d-flex">
                             <select class="form-select shadow p-2 mt-3 bg-white rounded procedureNoteKey"
                                    aria-label="Default select example" id="procedure_name">
                                <option selected>{{ "Select Note"|e }}</option>
                                <option value="0">{{ "Create New Template"|e }}</option>
                                {% for f in procedureNotes %}
                                    <option value="{{ f.id }}">{{ f.template }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="procedure-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            </div>
                           <input type="text" placeholder="New Note Name" id="note" name="note">
                            <div id="note_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="medical-form">
                            <div class="form-group">
                                <label>Procedure notes</label>
                                <textarea class="form-control" placeholder="" id="treatment_procedure_note"
                                          name="treatment_procedure_note"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Additional notes</label>
                                <textarea class="form-control" placeholder="" id="treatment_additional_note"
                                          name="treatment_additional_note"></textarea>
                            </div>
                            <div class="form-group">
                                <p>{{ 'CPT Code'|e }}</p>
                                <div class="form-group">
                                    <select class="form-control cpt_codes_all select2" id="treatment_cpt_code"
                                            name="treatment_cpt_code[]" style="width:100% !important" multiple>
                                        <option>{{ 'Choose an Option'|e }}</option>
                                        {% for f in cptCodes %}
                                            <option value={{ f.cpt_code }}>{{ f.cpt_code }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn procedureNote">Done</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="template-model modal fade" id="addCptCodeModel" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add CPT code'|e }}</h5>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="medical-form">
                            <div class="form-group">
                                <label>CPT code</label>
                                <input type="text" name="cpt_code" class="form-control" placeholder=""
                                       id="cpt_code"></input>
                                <div name="suggestion" id="suggestion">
                                    <!-- Options will be dynamically populated -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn addCptCode">Done</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="template-model modal fade" id="addIcdCodeModel" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div id="test_form" name="test_form">
                    <div class="modal-header">
                        <div>
                            <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add ICD code'|e }}</h5>
                        </div>
                            <div class="d-flex">
                                <select class="form-select shadow p-2 mt-3 bg-white rounded icd_10 "
                                    aria-label="Default select example" id="icd_name_new_data">
                                <option selected>{{ "Select ICD"|e }}</option>
                                <option value="0">{{ "Create New ICD"|e }}</option>
                                {% for f in icd10s %}
                                    <option value={{ f.id }}>{{ f.icd_name }}</option>
                                {% endfor %}
                            </select>
                            <i class="fa fa-trash mt-3 d-flex justify-content-center align-items-center ml-5" id="icd-delete" aria-hidden="true" style="font-size: 24px; color: darkgray; cursor: not-allowed; pointer-events:none"></i>
                            
                            </div>
                            <input type="text" placeholder="New Template Name" id="icd_new_name"
                                   name="icd_name">
                            <div id="template_err"></div>
                        </div>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="medical-form">
                            <div class="form-group">
                                <label>ICD code</label>
                                <input type="text" name="icd_code" class="form-control" placeholder=""
                                       id="icd_code"></input>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn done-btn addIcdCode">Done</button>
                        <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!--========================================= Start Add New Physical Exam Model ============================================  -->

<div class="template-model modal fade" id="dermitologyTreatmentModalCenter" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header">
                    <div>
                        <div class="d-flex">
                                <i class="fa fa-pencil pr-2 pt-2" aria-hidden="true" style="color: #5DBDCE; font-size: 24px;"></i>
                                <h5 class="modal-title" id="exampleModalLongTitle" style="color: #5DBDCE;">{{ 'Add New Dermitology treatment'|e }}</h5>
                        </div>
                        <select class="form-select shadow p-2 mt-3 bg-white rounded"
                                aria-label="Default select example">
                            <option selected>Open this select menu</option>
                            <option value="0">Create New Template</option>
                            {% for f in physicalqry %}
                                <option value="{{ f.id }}">{{ f.physical_exam_name }}</option>
                            {% endfor %}
                        </select>
                        <input type="text" placeholder="New Template Name" id="template_exam_name"
                               name="template_exam_name">
                        <div id="template_exam_name_err"></div>
                    </div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div class="medical-form">
                        <div class="form-group">
                            <label>Procedure Notes</label>
                            <textarea class="form-control" placeholder="" id="dermitology_procedure_notes"
                                      name="dermitology_procedure_notes"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Additional Notes</label>
                            <textarea type="text" class="form-control" placeholder="" id="dermitology_additional Notes"
                                      name="template_head"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Eyes</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_eyes"
                                      name="template_eyes"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Nose</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_nose"
                                      name="template_nose"></textarea>
                        </div>
                        <!-- <div class="form-group">
                            <label>Throat</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_throat"
                                name="template_throat"></textarea>
                        </div> -->
                        <div class="form-group">
                            <label>Ears</label>.
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_ears"
                                      name="template_ears"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Throat/Oral Cavity</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_oral_cavity"
                                      name="template_oral_cavity"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Neck/Thyroid</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_neck"
                                      name="template_neck"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Heart</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_heart"
                                      name="template_heart"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Skin</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_skin"
                                      name="template_skin"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Lungs</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="lungs" id="template_lungs"
                                      name="template_lungs"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Abdomen</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_abdomen"
                                      name="template_abdomen"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Back</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_back"
                                      name="template_back"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Extremities</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_extemities"
                                      name="template_extemities"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Pelvic</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_pelvic"
                                      name="template_pelvic"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Breast</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_breast"
                                      name="template_breast"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Genitourinary</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_genitourinary"
                                      name="template_genitourinary"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Neurologic</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_neurologic"
                                      name="template_neurologic"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Musculoskeletal</label>
                            <span><i class="fa-sharp fa-solid fa-rotate-left"></i></span>
                            <span><i class="fa-solid fa-rotate-right mx-1"></i></span>
                            <span><i class="fas fa-microphone"></i></span>
                            <textarea type="text" class="form-control" placeholder="" id="template_musculoskeletal"
                                      name="template_musculoskeletal"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn done-btn physicalExam">Done</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--========================================= End Add New Physical Exam Model ============================================  -->

{# medical information copy and merge feature modal start #}

<div class="template-model modal fade" id="medicalInformationCopyModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Medical Information"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                        <input class="form-check-input ml-3" type="hidden" name="current_medical_information_record">
                    </div>
                </div>

                <div class="modal-body">
                <form id="medicalInformationCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#medicalInformationCopyBody" role="button"
                                                aria-expanded="true" aria-controls="medicalInformationCopyBody"
                                                id="medical-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="medicalInformationCopyCheckAll" data-medical-id="0">
                                        <span class="ml-3" id="medical_information_date_copy" style="min-width: 100px;">09/21/2023</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="medicalInformationCopyBody">
                            <div class="medical-form">
                                 <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_chief_complaint_copy" name="wc_complaint" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">Chief Complaint</label>
            </div>
            <textarea type="text" class="form-control template_chief_complaint_copy" placeholder="The patient is here for..."
                      id="template_chief_complaint_copy" name="template_chief_complaint_copy"></textarea>
        </div>
        <div class="form-group">

            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_hip_copy" type="checkbox" name="wc_hpi" data-medical="0">
                <label class="form-check-label" for="myCheckbox">HPI</label>
            </div>
            <textarea type="text" class="form-control template_hip_copy" placeholder="The patient is here for..."
                      id="template_hip_copy" name="template_hip_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_current_medication_copy" type="checkbox" name="wc_current_medication" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Current Medication"|e }}</label>
            </div>
            <textarea class="form-control template_current_medication_copy" placeholder="Norvasc 10Mg"
                   id="template_current_medication_copy" name="template_current_medication_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_medical_history_copy" name="wc_medical_history" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Medical History"|e }}</label>
            </div>

            <textarea class="form-control template_medical_history_copy" placeholder="Diabetes,E16.32"
                   id="template_medical_history_copy" name="template_medical_history_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_allergies_copy" name="wc_allergies" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Allergies/intolerance"|e }}</label>
            </div>
            <textarea class="form-control template_allergies_copy" placeholder="NKDA" id="template_allergies_copy"
                   name="template_allergies_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_surgical_history_copy" name="wc_surgical_history" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Surgical History/Hospitalization"|e }}</label>
            </div>
            <textarea class="form-control template_surgical_history_copy" placeholder="None"
                   id="template_surgical_history_copy" name="template_surgical_history_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_social_history_copy" name="wc_social" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Social History"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_social_history_copy"
                      placeholder="Smokes cigarrettes: No; Drinks alcohol: No"
                      id="template_social_history_copy" name="template_social_history_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_family_history_copy" name="wc_family" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Family History"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_family_history_copy" placeholder="Skin canser: No"
                      id="template_family_history_copy" name="template_family_history_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input modical-information-copy template_ros_copy" name="wc_ros" type="checkbox" data-medical="0">
                <label class="form-check-label" for="myCheckbox">{{ "Review Of Systems"|e }}</label>
            </div>

            <textarea name="" class="form-control template_ros_copy"
                      placeholder="Nausea: No, Vorniting: No, Diarrhea: No, Chils: No"
                      id="template_ros_copy" name="template_ros_copy"></textarea>
        </div>
                            </div>
                        
                        </div>
                        <div id="more_medical_information_copy"></div>
                    </div>
                    </form>
                </div> <!-- Missing closing </div> tag -->

                <div class="modal-footer">
                    <button type="button" class="btn done-btn medicalInformation" id="medicalInformationCopyBtn" >{{ "Copy"|e }}</button>
                    <button type="button" class="btn done-btn medicalInformation" id="medicalInformationMergeBtn">{{ "Merge"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# medical information copy and merge feature modal end #}

{# physical exam copy and merge feature modal start #}

<div class="template-model modal fade" id="physicalExamCopyModal" tabindex="-1" role="dialog"
     aria-labelledby="physicalExamCopyTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Physical Exam"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                        <input class="form-check-input ml-3" type="hidden" name="current_physical_exam_record">
                    </div>
                </div>

                <div class="modal-body">
                <form id="physicalExamCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#physicalExamCopyBody" role="button"
                                                aria-expanded="true" aria-controls="physicalExamCopyBody"
                                                id="physical-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="physicalExamCopyCheckAll" data-id="0">
                                        <span class="ml-3" id="physical_exam_date_copy" style="min-width: 100px;">09/21/2023</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="physicalExamCopyBody">
                            <div class="medical-form">
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_t_copy" type="checkbox" name="wc_t"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "T"|e }}</label>
            </div>
             <input name="" class="form-control template_t_copy" placeholder="" id="template_t_copy"
              name="template_t_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_p_copy" type="checkbox" name="wc_p"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "RR"|e }}</label>
            </div>
             <input name="" class="form-control template_p_copy" placeholder="" id="template_p_copy"
              name="template_p_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_hr_copy" type="checkbox" name="wc_hr"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "HR"|e }}</label>
            </div>
             <input name="" class="form-control template_hr_copy" placeholder="" id="template_hr_copy"
              name="template_hr_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_systolic_copy" type="checkbox" name="wc_systolic"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Systolic"|e }}</label>
            </div>
             <input name="" class="form-control template_systolic_copy" placeholder="" id="template_systolic_copy"
              name="template_systolic_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_diastolic_copy" type="checkbox" name="wc_diastolic"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Diastolic"|e }}</label>
            </div>
             <input name="" class="form-control template_diastolic_copy" placeholder="" id="template_diastolic_copy"
              name="template_diastolic_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_ht_copy" type="checkbox" name="wc_ht"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "HT"|e }}</label>
            </div>
             <input name="" class="form-control template_ht_copy" placeholder="" id="template_ht_copy"
              name="template_ht_copy">
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_wt_copy" type="checkbox" name="wc_wt"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "WT"|e }}</label>
            </div>
             <input name="" class="form-control template_wt_copy" placeholder="" id="template_wt_copy"
              name="template_wt_copy">
        </div>
                                <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_general_copy" type="checkbox" name="wc_general"  id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "General"|e }}</label>
            </div>
             <textarea name="" class="form-control template_general_copy" placeholder="" id="template_general_copy"
              name="template_general_copy"></textarea>
        </div>
        <div class="form-group">

            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_head_copy" type="checkbox" name="wc_head" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Head"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_head_copy" placeholder="" id="template_head_copy"
              name="template_head_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_eyes_copy" name="wc_eyes" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Eyes"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_eyes_copy" placeholder="" id="template_eyes_copy"
              name="template_eyes_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_nose_copy" name="wc_nose" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Nose"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_nose_copy" placeholder="" id="template_nose_copy"
              name="template_nose_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_ears_copy" name="wc_ears" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Ears"|e }}</label>
            </div>
            <textarea type="text" class="form-control template_ears_copy" placeholder="" id="template_ears_copy"
              name="template_ears_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_oral_cavity_copy" name="wc_oral" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Throat/Oral Cavity"|e }}</label>
            </div>
           <textarea type="text" class="form-control template_oral_cavity_copy" placeholder="" id="template_oral_cavity_copy"
              name="template_oral_cavity_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_neck_copy" name="wc_neck" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Neck/Thyroid"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_neck_copy" placeholder="" id="template_neck_copy"
              name="template_neck_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_heart_copy" name="wc_heart" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Heart"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_heart_copy" placeholder="" id="template_heart_copy"
              name="template_heart_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_skin_copy" name="wc_skin" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Skin"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_skin_copy" placeholder="" id="template_skin_copy"
              name="template_skin_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_lungs_copy" name="wc_lungs" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Lungs"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_lungs_copy" placeholder="lungs" id="template_lungs_copy"
              name="template_lungs_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_abdomen_copy" name="wc_abdomen" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Abdomen"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_abdomen_copy" placeholder="" id="template_abdomen_copy"
              name="template_abdomen_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_back_copy" name="wc_back" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Back"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_back_copy" placeholder="" id="template_back_copy"
              name="template_back_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_extemities_copy" name="wc_extremities" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Extremities"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_extemities_copy" placeholder="" id="template_extemities_copy"
              name="template_extemities_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_pelvic_copy" name="wc_pelvic" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Pelvic"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_pelvic_copy" placeholder="" id="template_pelvic_copy"
              name="template_pelvic_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_breast_copy" name="wc_breast" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Breast"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_breast_copy" placeholder="" id="template_breast_copy"
              name="template_breast_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_genitourinary_copy" name="wc_genitourinary" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Genitourinary"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_genitourinary_copy" placeholder="" id="template_genitourinary_copy"
              name="template_genitourinary_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_neurologic_copy" name="wc_neurologic" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Neurologic"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_neurologic_copy" placeholder="" id="template_neurologic_copy"
              name="template_neurologic_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input exam-physical-copy template_musculoskeletal_copy" name="wc_musculoskeletal" type="checkbox" id="myCheckbox" data-check="0">
                <label class="form-check-label" for="myCheckbox">{{ "Musculoskeletal"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_musculoskeletal_copy" placeholder="" id="template_musculoskeletal_copy"
              name="template_musculoskeletal_copy"></textarea>
        </div>
    </div>
                            </div>

                            <div id="more_phisical_exam_copy"></div>

                        </div>
                    </div>
                    </form>
                    
                </div> <!-- This closing </div> tag was missing -->

                

                <div class="modal-footer">
                    <button type="button" class="btn done-btn" id="physicalExamOnCopyBtn">{{ "Copy"|e }}</button>
                    <button type="button" class="btn done-btn" id="physicalExamOnMergeBtn">{{ "Merge"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# physical exam copy and merge feature modal end #}

{# wound care copy and merge feature modal start #}

<div class="template-model modal fade" id="woundCareCopyModal" tabindex="-1" role="dialog"
     aria-labelledby="physicalExamCopyTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Wound Care"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                    </div>
                </div>

                <div class="modal-body">
                <form id="woundCareCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#woundCareCopyBody" role="button"
                                                aria-expanded="true" aria-controls="woundCareCopyBody"
                                                id="wound-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="woundCareCopyCheckAll" data-wound-id="0">
                                        <span class="ml-3" style="min-width: 100px;"><span id="wound_care_date_copy">09/21/2023</span><span> - </span></span>
                                        <span>Problem#1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="woundCareCopyBody">
                            <div class="medical-form">
                                <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_side_copy" type="checkbox" name="wc_side-1"  id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Side"|e }}</label>
            </div>
             <textarea name="" class="form-control template_side_copy" placeholder="" id="template_side_copy"
              name="template_side_copy"></textarea>
        </div>
        <div class="form-group">

            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_anatomical_copy template_anatomical_check_copy" type="checkbox" name="wc_anatomical-1" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Anatomical"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_anatomical_copy" placeholder="" id="template_anatomical_copy"
              name="template_anatomical_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_location_copy template_location_check_copy" name="wc_location-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Location"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_location_copy" placeholder="" id="template_location_copy"
              name="template_location_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_wound_type_copy template_wound_type_check_copy" name="wc_wound_type-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Wound Type"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_wound_type_copy" placeholder="" id="template_wound_type_copy"
              name="template_wound_type_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_thickness_copy template_thickness_check_copy" name="wc_thickness-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Thickness"|e }}</label>
            </div>
            <textarea type="text" class="form-control template_thickness_copy" placeholder="" id="template_thickness_copy"
              name="template_thickness_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_drainage_amount_copy template_drainage_amount_check_copy" name="wc_drainage_amount-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Drainage Amount"|e }}</label>
            </div>
           <textarea type="text" class="form-control template_drainage_amount_copy" placeholder="" id="template_drainage_amount_copy"
              name="template_drainage_amount_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_drainage_description_copy template_drainage_description_check_copy" name="wc_drainage_description-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Drainage Description"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_drainage_description_copy" placeholder="" id="template_drainage_description_copy"
              name="template_drainage_description_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_surgically_copy template_surgically_check_copy" name="wc_surgically-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Surgically"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_surgically_copy" placeholder="" id="template_surgically_copy"
              name="template_surgically_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_undermining_copy template_undermining_check_copy" name="wc_undermining" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Undermining"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_undermining_copy" placeholder="" id="template_undermining_copy"
              name="template_undermining_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_tunneling_copy template_tunneling_check_copy" name="wc_tunneling" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Tunneling"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_tunneling_copy" placeholder="lungs" id="template_tunneling_copy"
              name="template_tunneling_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_ordo_copy template_ordo_check_copy" name="wc_ordo" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Ordo"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_ordo_copy" placeholder="" id="template_ordo_copy"
              name="template_ordo_copy"></textarea>
        </div>
          <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_signs1_copy template_signs1_check_copy" name="wc_signs1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Signs1"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_signs1_copy" placeholder="" id="template_signs1_copy"
              name="template_signs1_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input  wound-care-copy template_signs2_copy template_signs2_check_copy" name="wc_signs2" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Signs2"|e }}</label>
            </div>

                                        <textarea type="text" class="form-control template_signs2_copy" placeholder="" id="template_signs2_copy"
                                                  name="template_signs2_copy"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input wound-care-copy template_length_copy template_length_check_copy" name="wc_length-1" type="checkbox" id="myCheckbox" data-wound="0">
                                            <label class="form-check-label" for="myCheckbox">{{ "Length"|e }}</label>
                                        </div>

                                        <textarea type="text" class="form-control template_length_copy" placeholder="" id="template_length_copy"
                                                  name="template_length_copy"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input wound-care-copy template_width_copy template_width_check_copy" name="wc_width-1" type="checkbox" id="myCheckbox" data-wound="0">
                                            <label class="form-check-label" for="myCheckbox">{{ "Width"|e }}</label>
                                        </div>

                                        <textarea type="text" class="form-control template_width_copy" placeholder="" id="template_width_copy"
                                                  name="template_width_copy"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input wound-care-copy template_depth_copy template_depth_check_copy" name="wc_depth-1" type="checkbox" id="myCheckbox" data-wound="0">
                                            <label class="form-check-label" for="myCheckbox">{{ "Depth"|e }}</label>
                                        </div>

                                        <textarea type="text" class="form-control template_depth_copy" placeholder="" id="template_depth_copy"
                                                  name="template_depth_copy"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input wound-care-copy template_volume_copy template_volume_check_copy" name="wc_volume-1" type="checkbox" id="myCheckbox" data-wound="0">
                                            <label class="form-check-label" for="myCheckbox">{{ "Volume"|e }}</label>
                                        </div>

             <textarea type="text" class="form-control template_volume_copy" placeholder="" id="template_volume_copy"
              name="template_volume_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_surfacearea_copy template_surfacearea_check_copy" name="wc_surfacearea-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Surfacearea"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_surfacearea_copy" placeholder="" id="template_surfacearea_copy"
              name="template_surfacearea_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_icd_10_copy" name="icd_10" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Icd 10"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_icd_10_copy" placeholder="" id="template_icd_10_copy"
              name="template_icd_10_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_plan_copy template_plan_check_copy" name="wc_plan-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Plan"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_plan_copy" placeholder="" id="template_plan_copy"
              name="template_plan_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-copy template_medication_copy template_medication_check_copy" name="wc_medication-1" type="checkbox" id="myCheckbox" data-wound="0">
                <label class="form-check-label" for="myCheckbox">{{ "Medication"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_medication_copy" placeholder="" id="template_medication_copy"
              name="template_medication_copy"></textarea>
        </div>
    </div>
                            </div>
                         <div id="more_wound_copy"></div>
                        </div>
                    </div>
                    </form>
                    
                </div> <!-- This closing </div> tag was missing -->

                

                <div class="modal-footer">
                    <button type="button" class="btn done-btn" id="woundcareCopyBtn">{{ "Copy"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# wound care copy and merge feature modal end #}

{# wound care treatment copy and merge feature modal start #}

<div class="template-model modal fade" id="woundCareCopyTreatmentModal" tabindex="-1" role="dialog"
     aria-labelledby="physicalExamCopyTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Wound Care Treatment"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                    </div>
                </div>

                <div class="modal-body">
                <form id="woundCareTreatmentCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#woundCareTreatmentCopyBody" role="button"
                                                aria-expanded="true" aria-controls="woundCareTreatmentCopyBody"
                                                id="wound-treatment-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="woundCareTreatmentCopyCheckAll" data-wound-treatment-id="0">
                                        <span class="ml-3" style="min-width: 100px;" id="wound_care_treatment_date_copy">09/21/2023</span>
                                        <span>Problem#1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="woundCareTreatmentCopyBody">
                            <div class="medical-form">
                            <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-treatment-copy template_procdure_notes_copy" name="location_1_procedure_1" type="checkbox" id="myCheckbox" data-wound-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "Procdure notes"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_procdure_notes_copy" placeholder="" id="template_procdure_notes_copy"
              name="template_procdure_notes_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-treatment-copy template_additional_notes_copy" name="location_1_additional_1" type="checkbox" id="myCheckbox" data-wound-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "Additional notes"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_additional_notes_copy" placeholder="" id="template_additional_notes_copy"
              name="template_additional_notes_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input wound-care-treatment-copy template_cpt_code_copy" name="location_1_cpt_1" type="checkbox" id="myCheckbox" data-wound-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "CPT code"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_cpt_code_copy" placeholder="" id="template_cpt_code_copy"
              name="template_cpt_code_copy"></textarea>
        </div>
    </div>
                            </div>

                             <div id="more_woundcare_treatment_copy"></div>

                        </div>
                    </div>
                    </form>
                    
                </div> <!-- This closing </div> tag was missing -->

                

                <div class="modal-footer">
                    <button type="button" class="btn done-btn" id="woundcareTreatmentCopyBtn">{{ "Copy"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# wound care treatment copy and merge feature modal end #}

{# dermitology care treatment copy and merge feature modal start #}

<div class="template-model modal fade" id="dermitologyCopyTreatmentModal" tabindex="-1" role="dialog"
     aria-labelledby="dermitologyCopyTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Dermatology  Treatment"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                    </div>
                </div>

                <div class="modal-body">
                <form id="dermitologyTreatmentCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#dermitologyTreatmentCopyBody" role="button"
                                                aria-expanded="true" aria-controls="dermitologyTreatmentCopyBody"
                                                id="dermitology-treatment-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="dermitologyTreatmentCopyCheckAll" data-dermitology-treatment-id="0">
                                        <span class="ml-3" style="min-width: 100px;" id="dermatology_treatment_date_copy">09/21/2023</span>
                                        <span>Problem#1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="dermitologyTreatmentCopyBody">
                            <div class="medical-form">
                            <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-treatment-copy template_dr_procdure_notes_copy" name="problem_1_procedure_1" type="checkbox" id="myCheckbox" data-dermitology-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "Procdure notes"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_dr_procdure_notes_copy" placeholder="" id="template_dr_procdure_notes_copy"
              name="template_dr_procdure_notes_copy"></textarea>
        </div>
         <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-treatment-copy template_dr_additional_notes_copy" name="problem_1_additional_1" type="checkbox" id="myCheckbox" data-dermitology-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "Additional notes"|e }}</label>
            </div>

             <textarea type="text" class="form-control template_dr_additional_notes_copy" placeholder="" id="template_dr_additional_notes_copy"
              name="template_dr_additional_notes_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-treatment-copy template_dr_cpt_code_copy" name="problem_1_cpt_1" type="checkbox" id="myCheckbox" data-dermitology-treatment="0">
                <label class="form-check-label" for="myCheckbox">{{ "CPT code"|e }}</label>
            </div>

              <textarea type="text" class="form-control template_dr_cpt_code_copy" placeholder="" id="template_dr_cpt_code_copy"
              name="template_dr_cpt_code_copy"></textarea>
        </div>
    </div>
                            </div>

                             <div id="more_dermitology_treatment_copy"></div>

                        </div>
                    </div>
                    </form>
                    
                </div> <!-- This closing </div> tag was missing -->

                

                <div class="modal-footer">
                    <button type="button" class="btn done-btn" id="dermitologyTreatmentCopyBtn">{{ "Copy"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# dermitology treatment copy and merge feature modal end #}

{# dermitology copy and merge feature modal start #}

<div class="template-model modal fade" id="dermitologyCopyModal" tabindex="-1" role="dialog"
     aria-labelledby="dermitologyCopyTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div id="test_form" name="test_form">
                <div class="modal-header" style="background-color: #6dddef;color: #fff;border-bottom: none;border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title">{{ "Dermatology"|e }}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ml-3 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioOptions" id="radioOption1" value="option1">
                        <label class="form-check-label" for="radioOption1">
                            Option 1
                        </label>
                        <input class="form-check-input ml-3" type="radio" name="radioOptions" id="radioOption2" value="option2">
                        <label class="form-check-label ml-5" for="radioOption2">
                            Option 2
                        </label>
                    </div>
                </div>

                <div class="modal-body">
                <form id="dermitologyCopyForm">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-1">
                                    <div class="form-check form-check-inline">
                                        <span><i class="fa fa-minus-square" style="cursor: pointer;" data-toggle="collapse"
                                                href="#dermitologyCopyBody" role="button"
                                                aria-expanded="true" aria-controls="dermitologyCopyBody"
                                                id="dermitology-collapse-icon"></i></span>
                                        <input class="form-check-input ml-2" type="checkbox" id="dermitologyCopyCheckAll" data-dermitology-id="0">
                                        <span class="ml-3" style="min-width: 100px;"><span id="dermatology_date_copy">09/21/2023</span><span> - </span></span>
                                        <span>Problem#1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 collapse show" id="dermitologyCopyBody">
                            <div class="medical-form">
                                <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-copy template_dr_description_copy" type="checkbox" name="description-1"  id="myCheckbox" data-dermitology="0">
                <label class="form-check-label" for="myCheckbox">{{ "Description"|e }}</label>
            </div>
             <textarea name="" class="form-control template_dr_description_copy" placeholder="" id="template_dr_description_copy"
              name="template_dr_description_copy"></textarea>
        </div>
        <div class="form-group">

            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-copy template_dr_location_copy" type="checkbox" name="location-1" id="myCheckbox" data-dermitology="0">
                <label class="form-check-label" for="myCheckbox">{{ "Location"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_dr_location_copy" placeholder="" id="template_dr_location_copy"
              name="template_dr_location_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-copy template_dr_medication_copy" name="wc_medication_dermitology-1" type="checkbox" id="myCheckbox" data-dermitology="0">
                <label class="form-check-label" for="myCheckbox">{{ "Medication"|e }}</label>
            </div>
             <textarea type="text" class="form-control template_dr_medication_copy" placeholder="" id="template_dr_medication_copy"
              name="template_dr_medication_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-copy template_dr_plan_copy" name="wc_plan_dermitology-1" type="checkbox" id="myCheckbox" data-dermitology="0">
                <label class="form-check-label" for="myCheckbox">{{ "Plan"|e }}</label>
            </div>

            <textarea type="text" class="form-control template_dr_plan_copy" placeholder="" id="template_dr_plan_copy"
              name="template_dr_plan_copy"></textarea>
        </div>
        <div class="form-group">
            <div class="form-check form-check-inline">
                <input class="form-check-input dermitology-copy template_dr_icd_10_copy" name="icd_10" type="checkbox" id="myCheckbox" data-dermitology="0">
                <label class="form-check-label" for="myCheckbox">{{ "Icd 10"|e }}</label>
            </div>
            <textarea type="text" class="form-control template_dr_icd_10_copy" placeholder="" id="template_dr_icd_10_copy"
              name="template_dr_icd_10_copy"></textarea>
        </div>
    </div>
                            </div>

                            <div id="more_dermitology_copy"></div>

                        </div>
                    </div>
                    </form>
                    
                </div> <!-- This closing </div> tag was missing -->

                

                <div class="modal-footer">
                    <button type="button" class="btn done-btn" id="dermitologyOnCopyBtn">{{ "Copy"|e }}</button>
                    <button type="button" class="btn done-btn" id="dermitologyOnMergeBtn">{{ "Merge"|e }}</button>
                    <button type="button" class="btn cancel-btn" data-dismiss="modal">{{ "Close"|e }}</button>
                </div>
            </div>
        </div>
    </div>
</div>

{# dermitology copy and merge feature modal end #}

<script src="../../forms/eye_mag/js/jquery-ui-1-11-4/jquery-ui.min.js"></script>
<script src="../../forms/woundcare/js/canvas.js"></script>
<script src="../../forms/woundcare/js/woundcare.js"></script>
<script src="../../forms/woundcare/js/dermatology.js"></script>
<script src="../../forms/woundcare/js/physical_exam.js"></script>
<script src="../../forms/woundcare/js/medical_information.js"></script>
<script src="../../forms/woundcare/js/common.js"></script>
<script src="../../forms/woundcare/js/physicalExamCopy.js"></script>
<script src="../../forms/woundcare/js/medicalInformationCopy.js"></script>
<script src="../../forms/woundcare/js/woundCareCopy.js"></script>
<script src="../../forms/woundcare/js/dermitologyCopy.js"></script>

{# canvas code #}

<script>

 function submit_canvas (zone) {
    var id_here = document.getElementById('myCanvas_' + zone);
    var dataURL = id_here.toDataURL('image/jpeg');
    var clockId = $('.clock_id').val();
     var imageId = $('.image_id').val();

    top.restoreSession();
    $.ajax({
        type: 'POST',
        url: '../../forms/woundcare/documents.php?canvas=' + zone,
        data: {
            imgBase64: dataURL,  //this contains the canvas + new strokes, the sketch.js foreground
            'zone': zone,
            'csrf_token_form': {{ csrfUtils | js_escape }}
        },
        success: function (response) {

                $('#DrawClockDynamicModal').modal('hide');
                $('#clock-image-' + clockId+'-'+imageId).removeClass('d-none');
                $('#colck-main-image-' + clockId+'-'+imageId).addClass('d-none');
                $(`#clock-image-${clockId}-${imageId} img:last-child`).remove();
                let img = document.createElement('img');
                img.src = dataURL;
                img.height = 115;
                img.width = 135;
                document.getElementById('clock-image-' + clockId+'-'+imageId).appendChild(img);
                alert(response);
            },

    }).done(function (o) {

    });
}

</script>

{# canvas code ends #}

<script>
    // ************************ Drag and drop ***************** //
    let dropArea = document.getElementById('drop-area')

        // Prevent default drag behaviors
    ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
        document.body.addEventListener(eventName, preventDefaults, false);
    })

    // Highlight drop area when item is dragged over it
    ;['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    })

    ;['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });

    // Handle dropped files
    dropArea.addEventListener('drop', handleDrop, false);

    function preventDefaults (e) {
        e.preventDefault();
        e.stopPropagation();
    }

    function highlight (e) {
        dropArea.classList.add('highlight');
    }

    function unhighlight (e) {
        dropArea.classList.remove('active');
    }

    function handleDrop (e) {
        var dt = e.dataTransfer;
        var files = dt.files;

        handleFiles(files);
    }

    let uploadProgress = [];
    let progressBar = document.getElementById('progress-bar');

    function initializeProgress (numFiles) {
        progressBar.value = 0;
        uploadProgress = [];

        for (let i = numFiles; i > 0; i--) {
            uploadProgress.push(0);
        }
    }

    function updateProgress (fileNumber, percent) {
        uploadProgress[fileNumber] = percent;
        let total = uploadProgress.reduce((tot, curr) => tot + curr, 0) / uploadProgress.length;
        progressBar.value = total;
    }

    var handle_file_count = 1;

    function handleFiles (files, id) {
        handle_file_count = id;
        files = [...files];
        initializeProgress(files.length);
        files.forEach(uploadFile);
        files.forEach(previewFile);
    }

    var file_count = 1;

    function handleFilesdermotology (files, id) {
        file_count = id;
        files = [...files];
        initializeProgress(files.length);

        files.forEach(uploadFile);
        files.forEach(previewFileDermitology);
    }

    function previewFile (file) {
        let reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onloadend = function () {
            let img = document.createElement('img');
            img.src = reader.result;
            document.getElementById('gallery-' + handle_file_count).appendChild(img);
        };
    }

    function previewFileDermitology (file) {

        let reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onloadend = function () {
            let img = document.createElement('img');
            img.src = reader.result;
            document.getElementById('dermitology_gallery-' + file_count).appendChild(img);
        };
    }

    function uploadFile (file, i) {
        const fd = new FormData();
        fd.append('file', file);
        fd.append('csrf_token_form', {{ csrfUtils | js_escape }});

        $.ajax({
            url: '../../forms/woundcare/receiver.php',
            type: 'POST',
            data: fd,
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            enctype: 'multipart/form-data',
            success: function (response) {
                alert(response);
            },
        });
        return false;
    }

    {# document.getElementById('progressChart').addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();
        top.restoreSession();
        let url = '../../forms/woundcare/public/graph.html';
        dlgopen(url, '_blank', 800, 800, false, 'Progress Graph');
    }); #}

    document.getElementById('dobilling').addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();
        top.restoreSession();

        let url = '../encounter/load_form.php?formname=fee_sheet';
        opts = {
            onClosed: 'retrieveBilling',
        };
        dlgopen(url, '_blank', 1600, 800, false, 'Billing', opts);
    });

    function retrieveBilling () {
        $.ajax({
            url: '../../forms/woundcare/resources/retrievebilling.php',
            type: 'GET',
            async: true,
            dataType: 'json',
            success: function (response) {

                var newData = '';
                if (response.length > 0) {
                    for (i = 0; i < response.length; i++) {

                    var justify = response[i]['justify'];

                                // Use a regular expression to extract the desired codes
                    // var extractedCodes = justify.match(/[A-Z]\d{0,2}\.\d{1,2}/g);

                    // If there are extracted codes, join them with "/"
                    // var result = extractedCodes ? extractedCodes.join("/") : "";

                        newData += '<tr><td><input type="text" readonly class="form-control" id="icd_units1" value="' +
                            response[i]['code'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_p1" value="' +
                            response[i]['code_text'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_codes1" value="' +
                            response[i]['units'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_codes1" value="' +
                            response[i]['modifier'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_diagnosis1" code_typename="icd_diagnosis1" value="' + justify + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_notes1" value="' + response[i]['notecodes'] + '"></td></tr>';
                    }
                    $('#billingInfo').collapse('show');
                }
                $('#newData').html(newData);
                $('.modal').modal('hide');
            },
        });
    }

    function retrievePrescription(){
        $.ajax({
            url: '../../forms/woundcare/resources/retrievePrescription.php',
            type: 'GET',
            async: true,
            dataType: 'json',
            success: function (response) {
                
                var newData = '';

                if (response.length > 0) {
                    for (i = 0; i < response.length; i++) {
                        newData += '<tr><td><input type="text" readonly class="form-control" id="icd_units1" value="' +
                            response[i]['drug'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_p1" value="' +
                            response[i]['note'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_codes1" value="' +
                            response[i]['quantity'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_diagnosis1" code_typename="icd_diagnosis1" value="'+
                            response[i]['refills'] +'"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_diagnosis1" code_typename="icd_diagnosis1" value="'+
                            response[i]['date_added'] +'"></td></tr>';
                    }

                    $('#prescription').collapse('show');
                }
                $('#newPrescriptionData').html(newData);
                $('.modal').modal('hide');
            },
        });
    }

     function retrievePrescriptionIsZero(){
        $.ajax({
            url: '../../forms/woundcare/resources/retrievePrescription.php',
            type: 'GET',
            async: true,
            dataType: 'json',
            success: function (response) {
                
                var newData = '';

                 if (response.length > 0) {
                    for (i = 0; i < response.length; i++) {
                        newData += '<tr><td><input type="text" readonly class="form-control" id="icd_units1" value="' +
                            response[i]['drug'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_p1" value="' +
                            response[i]['note'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_codes1" value="' +
                            response[i]['quantity'] + '"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_diagnosis1" code_typename="icd_diagnosis1" value="'+
                            response[i]['refills'] +'"></td>';
                        newData += '<td><input type="text" readonly class="form-control" id="icd_diagnosis1" code_typename="icd_diagnosis1" value="'+
                            response[i]['date_added'] +'"></td></tr>';
                           
                    }

                    $('#prescription').collapse('show');
                }else{
                    alert("No prescriptions found.");
                }
              
                $('#newPrescriptionData').html(newData);
                $('.modal').modal('hide');
            },
        });
    }



    $(document).on('click', '#refreshPrescription', function(){
         retrievePrescriptionIsZero();
    })

    $(document).ready(function(){
        retrieveBilling ();
        retrievePrescription ();
    });

    $(document).on('click','#prescriptionCollapse' ,function(){
        retrievePrescription ();
    })

    $(document).on('click', '#billlingCollapse', function(){
        retrieveBilling ();
    })
    
</script>

<script>

    {# var count = 1; #}

    $('.add_treatment').on('click', function (e) {
        let count = parseInt($(this).attr('treatment'));

        count++;

        $(this).attr('treatment', count);

        e.preventDefault();
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                var newData = '';
                newData += '<div class="col-md-12" style="padding-left: 50px;">';
                newData += '<div class="main-heading-patient flex-wrap align-items-baseline mt-2">';
                newData += '<div class="assessment-txt d-flex align-items-baseline">';
                newData += '<p>Treatment #' + count + '</p>';
                newData += '<a class="btn" role="button" id="woundCareTreatmentCopy-1" card-count="1" card-treatment="'+count+'">'
                newData += '<i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>';
                newData += '</a></div>';
                newData += '<select class="form-select select2 procedure_notes shadow p-2 bg-white rounded center-select" data-count="'+count+'" data-location="1" aria-label="Default select example" id="procedure_notes_'+count+'">';
                newData += `<option>Choose an Option</option>`;
                    $.each(data.procedureNotes, function (index, p) {
                        newData += `<option value=${p.id}>${p.template}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template" data-toggle="modal" data-target="#procedureNotesModel">';
                newData += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template';
                newData += '</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2 p-0 ml-2">';
                newData += '<div class="form-fields-area" style="padding-right: 50px;">';
                newData += '<p class="mb-0 physical_label ml-3">Procedure Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location[1][treatment][' + count + '][wc_procdure_notes]" id="location_1_procedure_' + count + '"></textarea>';
                newData += '</div>';
                newData += '<div class="form-fields-area" style="padding-right: 50px;">';
                newData += '<p class="physical_label ml-3">Additional Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location[1][treatment][' + count + '][wc_additional_notes]" id="location_1_additional_' + count + '"></textarea>';
                newData += '<input type="hidden" id="wc_cpt_1_code-'+count+'" name="location[1][treatment][' + count + '][wc_cpt_code]" class="form-control ml-3">';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2 p-0 ml-2">';
                newData += '<div class="form-fields-area d-flex">';
                newData += '<div class="col-md-12">';
                newData += '<p class="physical_label">CPT Code</p>';
                newData += '<div class="d-flex align-items-center custom-gap">';
                newData += '<select class="form-control cpt_codes_all select2 cpt_codes_dermitology_all" data-count="'+count+'" data-location="1" style="width:100% !important" multiple id="location_1_cpt_' + count + '">';
                newData += `<option>{{ 'Choose an Option'|e }}</option>`;
                    $.each(data.cptCodes, function (index, p) {
                        newData += `<option value=${p.cpt_code}>${p.cpt_code}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template add-cpt" data-toggle="modal" data-target="#addCptCodeModel">Add CPT</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';


                $('.new_treatment').append(newData);

                $("#location_1_cpt_" + count).select2();

                $("#procedure_notes_"+count).select2();
                triggerInputForNonEmptyTextareas()

            },

        });
    });
</script>

<script>

    $('.add_dermatology_treatment').on('click', function (e) {

        var problem = document.getElementById('problem_get').value;

        let dermitologyTreatmentCount = parseInt($(this).attr('treatment'));

        dermitologyTreatmentCount++;

        $(this).attr('treatment', dermitologyTreatmentCount);

        e.preventDefault();
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                var newData = '';
                newData += '<div class="col-md-12" style="padding-left: 60px;">';
                newData += '<div class="main-heading-patient flex-wrap align-items-baseline mt-2">';
                newData += '<div class="assessment-txt d-flex align-items-baseline">';
                newData += '<p>Treatment #' + dermitologyTreatmentCount + '</p>';
                newData += ` <a class="btn" role="button" id="dermitologyTreatmentCopy-1" card-count="1" card-treatment="${dermitologyTreatmentCount}">
                                <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a></div>`;
                newData += '<select class="form-select select2 procedure_notes procedure_notes_dermitology shadow p-2 bg-white rounded template_select center-select" data-count="'+dermitologyTreatmentCount+'" data-problem="1" aria-label="Default select example" id="dermo_wc_cpt_1_select_'+dermitologyTreatmentCount+'">';
                newData += `<option>Choose an Option</option>`;
                    $.each(data.procedureNotes, function (index, p) {
                        newData += `<option value=${p.id}>${p.template}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template" data-toggle="modal" data-target="#procedureNotesModel">';
                newData += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template';
                newData += '</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2">';
                newData += '<div class="form-fields-area">';
                newData += '<p class="mb-0 physical_label ml-3">Procedure Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="problem[1][treatment][' + dermitologyTreatmentCount + '][dr_procdure_notes]" id="problem_1_procedure_' + dermitologyTreatmentCount + '"></textarea>';
                newData += '</div>';
                newData += '<div class="form-fields-area">';
                newData += '<p class="physical_label ml-3">Additional Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="problem[1][treatment][' + dermitologyTreatmentCount + '][dr_additional_notes]" id="problem_1_additional_' + dermitologyTreatmentCount + '"></textarea>';
                newData += '<input type="hidden" id="dermo_wc_cpt_1_code_'+dermitologyTreatmentCount+'" name="problem[1][treatment][' + dermitologyTreatmentCount + '][dr_cpt_code]" class="form-control ml-3">';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2">';
                newData += '<div class="form-fields-area d-flex">';
                newData += '<div class="col-md-12">';
                newData += '<p class="physical_label">CPT Code</p>';
                newData += '<div class="d-flex align-items-center custom-gap">';
                newData += '<select class="form-control cpt_codes_all select2 cpt_codes_dermitology_all" data-count="'+dermitologyTreatmentCount+'" data-problem="1" style="width:100% !important" multiple id="problem_1_cpt_' + dermitologyTreatmentCount + '">';
                newData += `<option>{{ 'Choose an Option'|e }}</option>`;
                    $.each(data.cptCodes, function (index, p) {
                        newData += `<option value=${p.cpt_code}>${p.cpt_code}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template add-cpt" data-toggle="modal" data-target="#addCptCodeModel">Add CPT</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                $('.dermatology_new_treatment').append(newData);

                $("#problem_1_cpt_" + dermitologyTreatmentCount).select2();
                $("#dermo_wc_cpt_1_select_" + dermitologyTreatmentCount).select2();
                triggerInputForNonEmptyTextareas()

            },
        });
    });
</script>

<script>

    // add_dermatology_location

    var dermatologyLocationCount = 1;

    $('.add_dermatology_location').on('click', function (e) {
        dermatologyLocationCount++;
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                var newData1 = '';
                newData1 = `<div class="location-area mt-2" style="display: flex; justify-content:space-between;"><div class="d-flex align-items-center custom-gap"><p class="mb-0">Problem #${dermatologyLocationCount} </p>`;
                newData1 += `<span class="copy_button"><a class="btn copy_icon" role="button" id="dermitologyCopy-${dermatologyLocationCount}" card-count="${dermatologyLocationCount}">
                                    <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                                </a></span>`;
                newData1 += `<select class="select2 form-select shadow p-2 bg-white dermatology-templates rounded dermatology_${dermatologyLocationCount} template_select" aria-label="Default select example" data-count="${dermatologyLocationCount}" id="dermatology-templates_${dermatologyLocationCount}">`;
                newData1 += '<option selected>Select Template</option>';

                $.each(data.dermatology, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.template_name}</option>`;
                });
                newData1 += `</select><a class="btn d-none" role="button" id="dermitologyDelete-${dermatologyLocationCount}">
                                    <i class="fa fa-trash" id="dermitologyDeleteBtn-${dermatologyLocationCount}" dermo-card="${dermatologyLocationCount}" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>`;
                
                newData1 += '<div><button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;" data-target="#DermatologyModalCenter">';
                newData1 += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div>';
                newData1 += `</div></div></div>`;

                newData1 += '<div class="col-md-12 mt-3"><div class="form-fields-area"><p class="mb-0 physical_label ml-3">{{ 'Description:'|e }}</p>';
                newData1 += `<textarea type="text" id="description-${dermatologyLocationCount}" name="problem[` + dermatologyLocationCount +
                    `][dr_description]" class="form-control ml-3 description field textarea" rows="1"></textarea></div><div class="form-fields-area mt-1"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ 'Location:'|e }}</p>`;
                newData1 += `<input type="text" id="location-${dermatologyLocationCount}" name="problem[` + dermatologyLocationCount +
                    `][dr_location]" class="form-control ml-3 location field"></div></div>`;

                newData1 += '<div class="col-md-4 mt-4" style="padding-left: 60px;"><p class="pl-5 physical_label">{{ 'IMAGES'|e }}</p><div class="drop-drag-img">';
                newData1 += '<div id="drop-area"><div class="my-form">';
                newData1 += `<input type="file" id="fileElemDermitology-${dermatologyLocationCount}" multiple accept="image/*" data-file="` +
                    dermatologyLocationCount +
                    `" onchange="handleFilesdermotology(this.files, ${dermatologyLocationCount})" class="fileElemDermitology"><label class="button" for="fileElemDermitology-${dermatologyLocationCount}">Select Files</label></div>`;
                newData1 += `<p class="text-center">Or Drag and Drop Images Here</p><progress id="progress-bar" max=100 value=0></progress><div class="dermitology_gallery" id="dermitology_gallery-` +
                    dermatologyLocationCount + `" /></div></div></div></div>`;

                newData1 += '<div class="col-lg-12 mb-2" style="padding-left: 60px;"><div class="main-heading-patient align-items-baseline flex-wrap mt-2">';
                newData1 += '<div class="assessment-txt d-flex align-items-baseline"><p>ASSESSMENT</p></div>';
                newData1 += `<select class="form-select select2 dermitology_assessment  shadow p-2 mt-3 bg-white rounded assessment_template_select" aria-label="Default select example" id="dermitology_assessment-${dermatologyLocationCount}"  data-dermatologyLocationCountTotal="${dermatologyLocationCount}" style="width: 60%;">`;
                newData1 += '<option selected>Select Template</option>';

                $.each(data.assessments, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.assessment_name}</option>`;
                });

                newData1 += '</select><div><button type="button" class="add-template" data-toggle="modal" data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div></div></div>';


                newData1 += `<div class="col-md-12"><div class="form-fields-area icd-number"><p class="mr-2 mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}</p>`;

                newData1 += `<div class="col-md-12 d-flex"><select class="form-control ml-4 select2 code-change-dermitology icd_codes_all field" data-dermatologyLocationCountTotal="${dermatologyLocationCount}" id="wc_wound_medication_icd-${dermatologyLocationCount}" style="width: 60%" multiple>`;
                newData1 += `<option>{{ 'Choose an Option'|e }}</option>`;
                $.each(data.icd10s, function (index, p) {
                    newData1 += `<option value=${p.icd_name}>${p.icd_code}</option>`;
                });
               
                newData1 += '</select><button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button></div><div></div></div></div>';

                newData1 += '<div class="col-md-12 mt-1"><div class="form-fields-area">';
                newData1 += '<p class="mb-0 physical_label ml-3">{{ 'Plan:'|e }}</p>';
                newData1 += `<input type="hidden" id="wc_medication_icd-${dermatologyLocationCount}" name="problem[` +
                    dermatologyLocationCount + `][icd_10]" class="form-control ml-3">`;
                newData1 += `<textarea type="text" id="wc_plan_dermitology-${dermatologyLocationCount}" name="problem[` +
                    dermatologyLocationCount + `][dr_plan]" class="form-control ml-3 field textarea" rows="1"></textarea></div>`;
                newData1 += '<div class="form-fields-area mt-1 mb-2"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ 'Medication:'|e }}</p>';
                newData1 += `<input type="text" id="wc_medication_dermitology-${dermatologyLocationCount}" name="problem[` +
                    dermatologyLocationCount + `][dr_medication]" class="form-control ml-3 field"></div></div>`;


                newData1 += `<div class="col-md-12 ml-3" id="secondTreatmentDermo_${dermatologyLocationCount}"><button type="button" treatment="0" class="add-template testing mt-2 mb-2 add_treatment` +
                                dermatologyLocationCount + `" onclick="addTreatment(` + dermatologyLocationCount + `, this)">{{ "+ Add Treatment"|e }}</button></div>`;
            
                newData1 += `<div class="dermatology_new_treatment` + dermatologyLocationCount + `"></div>`;

                $('.dermatology_new_location').append(newData1);
                $('#problem_get').val(dermatologyLocationCount);
                $('.select2').select2();
                triggerInputForNonEmptyTextareas()
            },
        });
    });

    /**
     * This is to add the new location for dermatology
     */

    var locationCount = 1;
    $('.add_location').on('click', function (e) {

        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);
               
                locationCount++;

                var newData1 = '';
                newData1 += `<div class="location-area" style="display: flex; justify-content:space-between; margin-right: 15px; margin-top:15px;"><div class="d-flex align-items-center custom-gap">`;
                newData1 += `<p class="mb-0">Problem #` + locationCount + ` </p>`;
                newData1 += `<span class="copy_button"><a class="btn copy_icon" role="button" id="woundCareCopy-${locationCount}" card-count="${locationCount}">
                                    <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                                </a></span>`;
                newData1 += `<select class="select2 form-select shadow p-2 bg-white rounded physical wound-template  template_select" aria-label="Default select example" data-count="` +
                    locationCount + `" id="woundTempalte-` + locationCount + `">`;
                newData1 += `<option selected>Select Template</option>`;

                $.each(data.wound_template, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.wound_template_name}</option>`;
                });
                // newData1 += `<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>`;
                
                newData1 += `</select><a class="btn d-none" role="button" id="woundCareDelete-${locationCount}">
                                    <i class="fa fa-trash" id="woundCareDeleteBtn-${locationCount}" wound-card="${locationCount}" aria-hidden="true" title="delete" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>`;

                newData1 += `<div><button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                    data-target="#woundCareModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button></div>`;
                
                newData1 += `</div></div><div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-4"><p class="physical_label">{{ 'Side'|e }}</p><div class="form-group">`;
                newData1 += `<select class="form-control field" id="wc_side-` + locationCount + `" name="location[` +
                    locationCount + `][wc_side]"><option>Choose an Option</option>`;
                for (const key in data['sides']) {
                    newData1 += '<option value="'+data['sides'][key]+'">' + `${data['sides'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Anatomical Direction'|e }}</p><div class="form-group"><select class="form-control field" id="wc_anatomical-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_anatomical]"><option>Choose an Option</option>`;
                for (const key in data['anatomicalDirections']) {
                    newData1 += '<option value="'+data['anatomicalDirections'][key]+'">' + `${data['anatomicalDirections'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Location'|e }}</p><div class="form-group"><select class="form-control field" id="wc_location-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_location]"><option>Choose an Option</option>`;
                for (const key in data['locations']) {
                    newData1 += '<option value="'+data['locations'][key]+'">' + `${data['locations'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex"><div class="col-md-4">`;
                newData1 += `<p class="physical_label">{{ 'Wound Type'|e }}</p><div class="form-group"><select class="form-control field" id="wc_wound_type-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_wound_type]"><option>Choose an Option</option>`;
                for (const key in data['woundTypes']) {
                    newData1 += '<option value="'+data['woundTypes'][key]+'">' + `${data['woundTypes'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Wound Thickness or Wagner'|e }}</p><div class="form-group"><select class="form-control field" id="wc_thickness-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_thickness]"><option>Choose an Option</option>`;
                for (const key in data['woundThickness']) {
                    newData1 += '<option value="'+data['woundThickness'][key]+'">' + `${data['woundThickness'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Drainage Amount'|e }}</p><div class="form-group"><select class="form-control field" id="wc_drainage_amount-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_drainage_amount]"><option>Choose an Option</option>`;
                for (const key in data['drainageAmount']) {
                    newData1 += '<option value="'+data['drainageAmount'][key]+'">' + `${data['drainageAmount'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex"><div class="col-md-4">`;
                newData1 += `<p class="physical_label">{{ 'Drainage Description'|e }}</p><div class="form-group"><select class="form-control" id="wc_drainage_description-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_drainage_description]"><option>Choose an Option</option>`;
                for (const key in data['drainageDescription']) {
                    newData1 += '<option value="'+data['drainageDescription'][key]+'">' + `${data['drainageDescription'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Debrided/Surgically Created'|e }}</p><div class="form-group"><select class="form-control field" id="wc_surgically-` +
                    locationCount + `" name="location[` + locationCount +
                    `][wc_surgically]"><option>Choose an Option</option>`;
                for (const key in data['surgically']) {
                    newData1 += '<option value="'+data['surgically'][key]+'">' + `${data['surgically'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex">`;

                newData1 += `<div class="col-md-4"><p class="physical_label">{{ "Undermining"|e }}</p><div class="container">`;
                newData1 += `<div class="row"><div class="col-8"><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_undermining-${locationCount}" name="location[` + locationCount +
                    `][wc_undermining]" class="form-check-inline wc_undermining-yes-${locationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_undermining"> Yes</p></div><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_undermining-${locationCount}" name="location[` + locationCount +
                    `][wc_undermining]" class="form-check-inline wc_undermining-no-${locationCount} field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_undermining"> No</p></div></div></div></div>`;
                newData1 += `<div id="colck-main-image-${locationCount}-first">`;
                newData1 += `<img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-1" data-value="${locationCount}" data-image="first" alt="" data-toggle="modal" style="cursor:pointer">`;
                newData1 += `<input type="hidden" id="clock_id" class="clock_id"></div><input type="hidden" id="image_id" class="image_id">`;
                newData1 += `<div id="clock-image-${locationCount}-first" class="d-none clock-model-id-1" data-toggle="modal" data-value="${locationCount}" data-image="first" data-target="#DrawClockDynamicModal" style="cursor:pointer"></div></div>`;



                newData1 += `<div class="col-md-4"><p class="physical_label">{{ "Tunneling"|e }}</p><div class="container">`;
                newData1 += `<div class="row"><div class="col-8"><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_tunneling-${locationCount}" name="location[` + locationCount +
                    `][wc_tunneling]" class="form-check-inline wc_tunneling-yes-${locationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_tunneling"> Yes</p></div>`;
                newData1 += `<div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_tunneling-${locationCount}" name="location[` + locationCount +
                    `][wc_tunneling]" class="form-check-inline wc_tunneling-no-${locationCount} field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_tunneling"> No</p></div></div></div></div>`;
                newData1 += `<div id="colck-main-image-${locationCount}-second">`;
                newData1 += `<img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-2" data-value="${locationCount}" data-image="second" alt="" data-toggle="modal" style="cursor:pointer">`;
                newData1 += `<input type="hidden" id="clock_id" class="clock_id"><input type="hidden" id="image_id" class="image_id"></div>`;
                newData1 += `<div id="clock-image-${locationCount}-second" class="d-none clock-model-id-2" data-toggle="modal" data-value="${locationCount}" data-image="second" data-target="#DrawClockDynamicModal" style="cursor:pointer"></div></div>`;



                newData1 += `<div class="col-md-4"><p class="physical_label">Odor</p><div class="container"><div class="row"><div class="col-8"><div class="form-check-inline"><input type="radio" id="wc_ordo-${locationCount}" name="location[` + locationCount +
                    `][wc_ordo]" class="form-check-inline wc_ordo-yes-${locationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_ordo"> Yes</p></div><div class="form-check-inline"><input type="radio" id="wc_ordo-${locationCount}" name="location[` + locationCount +
                    `][wc_ordo]" class="form-check-inline field" value="No"><p class="form-check-label wc_ordo-no-${locationCount}" for="wc_ordo"> No</p></div></div></div></div></div></div></div>`;
                newData1 += `<div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-10"><div class="d-flex"><i class="fa fa-caret-right"></i><p class="physical_label">{{ 'Are there 2 or more of these signs (stalled healing, friable granulation,increased exudate, increased/new ordor, localized edema, increased/ new pain)?'|e }}</p></div></div>`;
                newData1 += `<div class="col-md-2"><div class="form-check-inline"><input type="radio" id="wc_signs1-${locationCount}" name="location[` + locationCount +
                    `][wc_signs1]" class="form-check-inline"value="Yes"><p class="form-check-label" for="wc_signs1"> Yes</p></div>`;
                newData1 += `<div class="form-check-inline"><input type="radio" id="wc_signs1-${locationCount}" name="location[` + locationCount +
                    `][wc_signs1]" class="form-check-inline field" value="No"><p class="form-check-label" for="wc_signs1"> No</p></div></div></div></div><div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-10">`;
                newData1 += `<div class="d-flex"><i class="fa fa-caret-right"></i><p class="physical_label">{{ 'Is there at least one of these signs (increasing induration and spreading erythema, wound breakdown, lymphangitis, malaise)?'|e }}</p></div></div>`;
                newData1 += `<div class="col-md-2"><div class="form-check-inline"><input type="radio" id="wc_signs2-${locationCount}" name="location[` + locationCount +
                    `][wc_signs2]" class="form-check-inline field" value="Yes"><p class="form-check-label" for="wc_signs2"> Yes</p></div><div class="form-check-inline"><input type="radio" id="wc_signs2-${locationCount}" name="location[` + locationCount +
                    `][wc_signs2]" class="form-check-inline field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_signs2"> No</p></div></div></div></div><div class="col-md-12 mt-4"><h5 class="pl-5 physical_label">{{ 'Dimension'|e }}</h5><div class="form-fields-area d-flex">`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Length (L)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" name="location[` + locationCount + `][wc_length]" class="form-control w-15 click-event-class field" id="wc_length-` +
                    locationCount + `" data-unique-id="` + locationCount +
                    `" value="" style="width: 60px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Width (W)'|e }}</p><div class="form-group d-flex"><input type="text" class="form-control name="location[` + locationCount + `][wc_width]"  click-event-class field" id="wc_width-` +
                    locationCount + `" data-unique-id="` + locationCount +
                    `" value="" onkeyup="calculateSurfaceArea()" style="width: 60px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Depth (D)'|e }}</p><div class="form-group d-flex"><input type="text" name="location[` + locationCount + `][wc_depth]" class="form-control click-volume click-event-class field" id="wc_depth-` +
                    locationCount + `" data-unique-id="` + locationCount +
                    `" value="" onkeyup="calculateVolume()" style="width: 60px"><p class="pl-3">cm</p></div></div></div>`;
                newData1 += `<div class="form-fields-area d-flex"><div class="col-md-4"><p class="physical_label">{{ 'Surface Area (L x W)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" class="form-control" id="wc_surfacearea-` + locationCount +
                    `" name="location[` + locationCount + `][wc_surfacearea]" data-unique-id="` + locationCount +
                    `" value="" readonly style="width: 80px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Volume (L x W x D)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" class="form-control field" id="wc_volume-` + locationCount +
                    `" name="location[` + locationCount + `][wc_volume]" data-unique-id="` + locationCount +
                    `" value="" readonly style="width: 120px"><p class="pl-3">cm</p></div></div></div></div>`;
                newData1 += `<div class="col-md-4 mt-4" style="padding-left: 60px;"><h5 class="pl-5 physical_label">{{ 'IMAGES'|e }}</h5><div class="drop-drag-img"><div id="drop-area"><div class="my-form"><input type="file" id="fileElem-${locationCount}" multiple accept="image/*" onchange="handleFiles(this.files, ${locationCount})" class="fileElem"><label class="button" for="fileElem-${locationCount}">Select Files</label>`;
                newData1 += `</div><p class="text-center">Or Drag and Drop Images Here</p><progress id="progress-bar" max=100 value=0></progress><div class="gallery" id="gallery-${locationCount}" /></div></div></div></div>`;
                newData1 += `<div class="col-md-12 mt-4"><div class="main-heading-patient custom-gap mb-4"><h5 class="pl-5 mb-0" style="color: #0056b3;
    font-size: 24px;
    font-weight: 700;
    text-transform: uppercase;">ASSESSMENT</h5><select class="form-select shadow select2 p-2 bg-white rounded physical assessment_template_select center-select" aria-label="Default select example"  data-wount="${locationCount}" id="wound_care_assessment-${locationCount}" style="width: 60%;">`;
                newData1 += `<option>{{ 'Select Template'|e }}</option>`;

                $.each(data.assessments, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.assessment_name}</option>`;
                });

                newData1 += `</select><div><button type="button" class="add-template" data-toggle="modal" data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div></div>`;

                newData1 += `<div class="col-md-12"><div class="form-fields-area icd-number"><div class="pl-1"><p class="mr-2 mb-0 physical_label">{{ 'ICD-10 Diagnosis Code'|e }}</p>`;

                newData1 += `<select class="form-control ml-4 select2 icd_codes_all cpt-code-change" data-wount="${locationCount}" id="wc_wound_icd-${locationCount}" style="width: 60%" multiple>`;
                newData1 += `<option>{{ 'Choose an Option'|e }}</option>`;

                $.each(data.icd10s, function (index, p) {
                    newData1 += `<option value=${p.icd_name}>${p.icd_code}</option>`;
                });
                //{% for key, value in icd10s %}
                //newData1 += `<option value="{{ key }}">{{ value }}</option>`;
                //{% endfor %}

                newData1 += `</select><button type="button" class="add-template add-cpt ml-2" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button></div></div></div></div>`;

                newData1 += `<div class="col-md-12 mt-2"><div class="form-fields-area"><p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>`;
                newData1 += `<input type="hidden" id="wc_icd-${locationCount}" name="location[` + locationCount +
                    `][icd_10]" class="form-control ml-3">`;
                newData1 += `<textarea type="text" id="wc_plan-${locationCount}" name="location[` + locationCount +
                    `][wc_plan]" class="form-control ml-3 field textarea" rows="1"></textarea></div>`;
                 newData1 += `<div class="form-fields-area mt-2"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>`;
                  newData1 += `<input type="text" id="wc_medication-${locationCount}" name="location[` + locationCount +
                    `][wc_medication]" class="form-control ml-3 field"></div></div>`;

                
                newData1 += `<div class="col-md-12 ml-3" id="secondTreatmentWound_${locationCount}"><button type="button" treatment="0" class="add-template testing mt-2 mb-2 add_treatment` +
                                locationCount + `" onclick="add(` + locationCount + `, this)">{{ "+ Add Treatment"|e }}</button></div>`;

                newData1 += `<div class="mt-2 ml-4 new_treatment` + locationCount + `"></div></div>`;
                $('.new_location').append(newData1);
                $('#location_get').val(locationCount);
                $('.select2').select2();

                triggerInputForNonEmptyTextareas()

              
            },
        });
    });

    var EditProblemCount = 1;
    $(document).on('click', '.add_dermatology_edit_location', function(){
        EditProblemCount = $(this).attr('problem-count');
        var CurrentCount = $(this).attr('problem-count');
        EditProblemCount++;
        $(this).attr('problem-count', EditProblemCount);
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {

                var data = JSON.parse(response);

                var newData1 = '';
                newData1 = `<div class="col-md-12 dermatology-box p-0"><div class="location-area mt-2" style="display: flex; justify-content:space-between;"><div class="d-flex align-items-center custom-gap"><p class="mb-0">Problem #${EditProblemCount} </p>`;
                newData1 += `<span class="copy_button"><a class="btn copy_icon" role="button" id="dermitologyCopy-${EditProblemCount}" card-count="${EditProblemCount}">
                               <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                            </a></span>`; 
                newData1 += `<select class="select2 form-select shadow p-2 bg-white dermatology-templates rounded dermatology_${EditProblemCount} template_select" aria-label="Default select example" data-count="${EditProblemCount}" id="dermatology-templates_${EditProblemCount}">`;
                newData1 += '<option selected>Select Template</option>';

                $.each(data.dermatology, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.template_name}</option>`;
                });

                newData1 += `</select><a class="btn d-none" role="button" id="dermitologyDelete-${EditProblemCount}">
                                    <i class="fa fa-trash" id="dermitologyDeleteBtn-${EditProblemCount}" dermo-card="${EditProblemCount}" aria-hidden="true" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>`;
                newData1 += '<div><button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;" data-target="#DermatologyModalCenter">';
                newData1 += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div></div></div></div>';

                newData1 += '<div class="col-md-12 mt-3"><div class="form-fields-area"><p class="mb-0 physical_label ml-3">{{ 'Description:'|e }}</p>';
                newData1 += `<textarea type="text" id="description-${EditProblemCount}" name="problem[` + EditProblemCount +
                    `][dr_description]" class="form-control ml-3 description field textarea" rows="1"></textarea></div><div class="form-fields-area mt-1"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ 'Location:'|e }}</p>`;
                newData1 += `<input type="text" id="location-${EditProblemCount}" name="problem[` + EditProblemCount +
                    `][dr_location]" class="form-control ml-3 location field"></div></div>`;

                newData1 += '<div class="col-md-4 mt-4" style="padding-left: 60px;"><p class="pl-5 physical_label">{{ 'IMAGES'|e }}</p><div class="drop-drag-img">';
                newData1 += '<div id="drop-area"><div class="my-form">';
                newData1 += `<input type="file" id="fileElemDermitology-${EditProblemCount}" multiple accept="image/*" data-file="` +
                    EditProblemCount +
                    `" onchange="handleFilesdermotology(this.files, ${EditProblemCount})" class="fileElemDermitology"><label class="button" for="fileElemDermitology-${EditProblemCount}">Select Files</label></div>`;
                newData1 += `<p class="text-center">Or Drag and Drop Images Here</p><progress id="progress-bar" max=100 value=0></progress><div class="dermitology_gallery" id="dermitology_gallery-` +
                    EditProblemCount + `" /></div></div></div></div>`;

                newData1 += '<div class="col-lg-12 mb-2" style="padding-left: 60px;"><div class="main-heading-patient align-items-baseline flex-wrap mt-2">';
                newData1 += '<div class="assessment-txt d-flex align-items-baseline"><p>ASSESSMENT</p></div>';
                newData1 += `<select class="form-select select2 dermitology_assessment  shadow p-2 mt-3 bg-white rounded assessment_template_select" aria-label="Default select example" id="dermitology_assessment-${EditProblemCount}"  data-dermatologyLocationCountTotal="${EditProblemCount}" style="width: 60%;">`;
                newData1 += '<option selected>Select Template</option>';

                $.each(data.assessments, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.assessment_name}</option>`;
                });

                <!--template dropdown-->

                newData1 += '</select><div><button type="button" class="add-template" data-toggle="modal" data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div></div></div>';


                newData1 += `<div class="col-md-12"><div class="form-fields-area icd-number"><p class="mr-2 mb-0 physical_label ml-3">{{ 'ICD-10 Diagnosis Code'|e }}</p>`;

                newData1 += `<div class="col-md-12 d-flex"><select class="form-control ml-4 select2 code-change-dermitology icd_codes_all field" data-dermatologyLocationCountTotal="${EditProblemCount}" id="wc_wound_medication_icd-${EditProblemCount}" style="width: 60%" multiple>`;
                newData1 += `<option>{{ 'Choose an Option'|e }}</option>`;
                $.each(data.icd10s, function (index, p) {
                    newData1 += `<option value=${p.icd_name}>${p.icd_code}</option>`;
                });
                //{% for key, value in icd10s %}
                //newData1 += `<option value="{{ key }}">{{ value }}</option>`;
                //{% endfor %} 
                newData1 += '</select><button type="button" class="add-template add-cpt ml-3" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button></div><div></div></div></div>';

                newData1 += '<div class="col-md-12 mt-1"><div class="form-fields-area">';
                newData1 += '<p class="mb-0 physical_label ml-3">{{ 'Plan:'|e }}</p>';
                newData1 += `<input type="hidden" id="wc_medication_icd-${EditProblemCount}" name="problem[` +
                    EditProblemCount + `][icd_10]" class="form-control ml-3">`;
                newData1 += `<textarea type="text" id="wc_plan_dermitology-${EditProblemCount}" name="problem[` +
                    EditProblemCount + `][dr_plan]" class="form-control ml-3 field textarea" rows="1"></textarea></div>`;
                newData1 += '<div class="form-fields-area mt-1 mb-2"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ 'Medication:'|e }}</p>';
                newData1 += `<input type="text" id="wc_medication_dermitology-${EditProblemCount}" name="problem[` +
                    EditProblemCount + `][dr_medication]" class="form-control ml-3 field"></div></div>`

                  newData1 += `<div class="col-md-12 ml-4" id="secondTreatmentEditDermo_${EditProblemCount}"><button type="button" treatment="0" class="add-template mt-2 mb-2" treatment="1" problem="${EditProblemCount}" onclick="addTreatment(` +
                    EditProblemCount + `, this)"> + Add Treatment</button></div>`;    

                newData1 += `<div class="dermatology_new_treatment` + EditProblemCount + `"></div></div>`;

                $(`#dermatology_new_edit_location-${CurrentCount}`).append(newData1);

                $(`#dermatology_new_edit_location-${CurrentCount}`).after(
                    `<section class="new_edit_location mt-4" id="append_dermatology_edit_location-${EditProblemCount}">
      
    </section>`
                );

                $('.select2').select2();

                $(`#append_dermatology_edit_location-${EditProblemCount}`).attr("id", `dermatology_new_edit_location-${EditProblemCount}`);
                triggerInputForNonEmptyTextareas()
            },
        });
    })

    var EditLocationCount = 1;
    $(document).on('click', '.add_edit_location', function(){
        EditLocationCount = $(this).attr('location-count');
        var CurrentCount = $(this).attr('location-count');
        EditLocationCount++;
        $(this).attr('location-count', EditLocationCount);

        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {

                var data = JSON.parse(response);
                var newData1 = '';
                newData1 += `<div class="col-md-12"><div class="location-area" style="display: flex; justify-content:space-between;"><div class="d-flex align-items-center custom-gap">`;
                newData1 += `<p class="mb-0">Problem #` + EditLocationCount + ` </p>`;
                newData1 += `<span class="copy_button"><a class="btn copy_icon" role="button" id="woundCareCopy-${EditLocationCount}" card-count="${EditLocationCount}">
                                    <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: white;"></i>
                                </a></span>`;  
                newData1 += `<select class="select2 form-select shadow p-2 bg-white rounded physical wound-template  template_select" aria-label="Default select example" data-count="` +
                    EditLocationCount + `" id="woundTempalte-` + EditLocationCount + `">`;
                newData1 += `<option selected>Select Template</option>`;

                $.each(data.wound_template, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.wound_template_name}</option>`;
                });
                // newData1 += `<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>`;
                  newData1 += `</select><a class="btn d-none" role="button" id="woundCareDelete-${EditLocationCount}">
                                    <i class="fa fa-trash" id="woundCareDeleteBtn-${EditLocationCount}" wound-card="${EditLocationCount}" aria-hidden="true" title="delete" style="color: #5DBDCE; cursor:pointer;"></i>
                                </a>`;

                newData1 += `<div><button type="button" class="add-template" data-toggle="modal" style=" border: 2px solid white;"
                                    data-target="#woundCareModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template
                            </button></div>`;
                          
                newData1 += `</div></div><div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-4"><p class="physical_label">{{ 'Side'|e }}</p><div class="form-group">`;
                newData1 += `<select class="form-control field" id="wc_side-` + EditLocationCount + `" name="location[` +
                    EditLocationCount + `][wc_side]"><option>Choose an Option</option>`;
                for (const key in data['sides']) {
                    newData1 += '<option value="'+data['sides'][key]+'">' + `${data['sides'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Anatomical Direction'|e }}</p><div class="form-group"><select class="form-control field" id="wc_anatomical-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_anatomical]"><option>Choose an Option</option>`;
                for (const key in data['anatomicalDirections']) {
                    newData1 += '<option value="'+data['sides'][key]+'">' + `${data['anatomicalDirections'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Location'|e }}</p><div class="form-group"><select class="form-control field" id="wc_location-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_location]"><option>Choose an Option</option>`;
                for (const key in data['locations']) {
                    newData1 += '<option value="'+data['locations'][key]+'">' + `${data['locations'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex"><div class="col-md-4">`;
                newData1 += `<p class="physical_label">{{ 'Wound Type'|e }}</p><div class="form-group"><select class="form-control field" id="wc_wound_type-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_wound_type]"><option>Choose an Option</option>`;
                for (const key in data['woundTypes']) {
                    newData1 += '<option value="'+data['woundTypes'][key]+'">' + `${data['woundTypes'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Wound Thickness or Wagner'|e }}</p><div class="form-group"><select class="form-control field" id="wc_thickness-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_thickness]"><option>Choose an Option</option>`;
                for (const key in data['woundThickness']) {
                    newData1 += '<option value="'+data['woundThickness'][key]+'">' + `${data['woundThickness'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Drainage Amount'|e }}</p><div class="form-group"><select class="form-control field" id="wc_drainage_amount-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_drainage_amount]"><option>Choose an Option</option>`;
                for (const key in data['drainageAmount']) {
                    newData1 += '<option value="'+data['drainageAmount'][key]+'">' + `${data['drainageAmount'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex"><div class="col-md-4">`;
                newData1 += `<p class="physical_label">{{ 'Drainage Description'|e }}</p><div class="form-group"><select class="form-control" id="wc_drainage_description-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_drainage_description]"><option>Choose an Option</option>`;
                for (const key in data['drainageDescription']) {
                    newData1 += '<option value="'+data['drainageDescription'][key]+'">' + `${data['drainageDescription'][key]}` + '</option>';
                }
                newData1 += `</select></div></div><div class="col-md-4"><p class="physical_label">{{ 'Debrided/Surgically Created'|e }}</p><div class="form-group"><select class="form-control field" id="wc_surgically-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_surgically]"><option>Choose an Option</option>`;
                for (const key in data['surgically']) {
                    newData1 += '<option value="'+data['surgically'][key]+'">' + `${data['surgically'][key]}` + '</option>';
                }
                newData1 += `</select></div></div></div></div><div class="col-md-12"><div class="form-fields-area d-flex">`;

                newData1 += `<div class="col-md-4"><p class="physical_label">{{ "Undermining"|e }}</p><div class="container">`;
                newData1 += `<div class="row"><div class="col-8"><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_undermining-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_undermining]" class="form-check-inline wc_undermining-yes-${EditLocationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_undermining"> Yes</p></div><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_undermining-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_undermining]" class="form-check-inline wc_undermining-no-${EditLocationCount} field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_undermining"> No</p></div></div></div></div>`;
                newData1 += `<div id="colck-main-image-${EditLocationCount}-first">`;
                newData1 += `<img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-1" data-value="${EditLocationCount}" data-image="first" alt="" data-toggle="modal" style="cursor:pointer">`;
                newData1 += `<input type="hidden" id="clock_id" class="clock_id"></div><input type="hidden" id="image_id" class="image_id">`;
                newData1 += `<div id="clock-image-${EditLocationCount}-first" class="d-none clock-model-id-1" data-toggle="modal" data-value="${EditLocationCount}" data-image="first" data-target="#DrawClockDynamicModal" style="cursor:pointer"></div></div>`;



                newData1 += `<div class="col-md-4"><p class="physical_label">{{ "Tunneling"|e }}</p><div class="container">`;
                newData1 += `<div class="row"><div class="col-8"><div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_tunneling-` + EditLocationCount +
                    `" name="location[` + EditLocationCount +
                    `][wc_tunneling]" class="form-check-inline wc_tunneling-yes-${EditLocationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_tunneling"> Yes</p></div>`;
                newData1 += `<div class="form-check-inline">`;
                newData1 += `<input type="radio" id="wc_tunneling-` + EditLocationCount +
                    `" name="location[` + EditLocationCount +
                    `][wc_tunneling]" class="form-check-inline wc_tunneling-no-${EditLocationCount} field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_tunneling"> No</p></div></div></div></div>`;
                newData1 += `<div id="colck-main-image-${EditLocationCount}-second">`;
                newData1 += `<img src="../../forms/woundcare/images/clock.PNG" class="clock-model-id-2" data-value="${EditLocationCount}" data-image="second" alt="" data-toggle="modal" style="cursor:pointer">`;
                newData1 += `<input type="hidden" id="clock_id" class="clock_id"><input type="hidden" id="image_id" class="image_id"></div>`;
                newData1 += `<div id="clock-image-${EditLocationCount}-second" class="d-none clock-model-id-2" data-toggle="modal" data-value="${EditLocationCount}" data-image="second" data-target="#DrawClockDynamicModal" style="cursor:pointer"></div></div>`;



                newData1 += `<div class="col-md-4"><p class="physical_label">Odor</p><div class="container"><div class="row"><div class="col-8"><div class="form-check-inline"><input type="radio" id="wc_ordo-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_ordo]" class="form-check-inline wc_ordo-yes-${EditLocationCount} field" value="Yes">`;
                newData1 += `<p class="form-check-label" for="wc_ordo"> Yes</p></div><div class="form-check-inline"><input type="radio" id="wc_ordo-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_ordo]" class="form-check-inline field" value="No"><p class="form-check-label wc_ordo-no-${EditLocationCount}" for="wc_ordo"> No</p></div></div></div></div></div></div></div>`;
                newData1 += `<div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-10"><div class="d-flex"><i class="fa fa-caret-right"></i><p class="physical_label">{{ 'Are there 2 or more of these signs (stalled healing, friable granulation,increased exudate, increased/new ordor, localized edema, increased/ new pain)?'|e }}</p></div></div>`;
                newData1 += `<div class="col-md-2"><div class="form-check-inline"><input type="radio" id="wc_signs1-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_signs1]" class="form-check-inline"value="Yes"><p class="form-check-label" for="wc_signs1"> Yes</p></div>`;
                newData1 += `<div class="form-check-inline"><input type="radio" id="wc_signs1-` + EditLocationCount +
                    `" name="location[` + EditLocationCount +
                    `][wc_signs1]" class="form-check-inline field" value="No"><p class="form-check-label" for="wc_signs1"> No</p></div></div></div></div><div class="col-md-12 mt-3"><div class="form-fields-area d-flex"><div class="col-md-10">`;
                newData1 += `<div class="d-flex"><i class="fa fa-caret-right"></i><p class="physical_label">{{ 'Is there at least one of these signs (increasing induration and spreading erythema, wound breakdown, lymphangitis, malaise)?'|e }}</p></div></div>`;
                newData1 += `<div class="col-md-2"><div class="form-check-inline"><input type="radio" id="wc_signs2-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_signs2]" class="form-check-inline field" value="Yes"><p class="form-check-label" for="wc_signs2"> Yes</p></div><div class="form-check-inline"><input type="radio" id="wc_signs2-` +
                    EditLocationCount + `" name="location[` + EditLocationCount +
                    `][wc_signs2]" class="form-check-inline field" value="No">`;
                newData1 += `<p class="form-check-label" for="wc_signs2"> No</p></div></div></div></div><div class="col-md-12 mt-4"><h5 class="pl-5 physical_label">{{ 'Dimension'|e }}</h5><div class="form-fields-area d-flex">`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Length (L)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" name="location[` + EditLocationCount + `][wc_length]" class="form-control w-15 click-event-class field" id="wc_length-` +
                    EditLocationCount + `" data-unique-id="` + EditLocationCount +
                    `" value="" style="width: 60px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Width (W)'|e }}</p><div class="form-group d-flex"><input type="text" class="form-control name="location[` + EditLocationCount + `][wc_width]"  click-event-class field" id="wc_width-` +
                    EditLocationCount + `" data-unique-id="` + EditLocationCount +
                    `" value="" onkeyup="calculateSurfaceArea()" style="width: 60px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Depth (D)'|e }}</p><div class="form-group d-flex"><input type="text" name="location[` + EditLocationCount + `][wc_depth]" class="form-control click-volume click-event-class field" id="wc_depth-` +
                    EditLocationCount + `" data-unique-id="` + EditLocationCount +
                    `" value="" onkeyup="calculateVolume()" style="width: 60px"><p class="pl-3">cm</p></div></div></div>`;
                newData1 += `<div class="form-fields-area d-flex"><div class="col-md-4"><p class="physical_label">{{ 'Surface Area (L x W)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" class="form-control" id="wc_surfacearea-` + EditLocationCount +
                    `" name="location[` + EditLocationCount + `][wc_surfacearea]" data-unique-id="` + EditLocationCount +
                    `" value="" readonly style="width: 80px"><p class="pl-3">cm</p></div></div>`;
                newData1 += `<div class="col-md-4"><p class="physical_label">{{ 'Volume (L x W x D)'|e }}</p><div class="form-group d-flex">`;
                newData1 += `<input type="text" class="form-control field" id="wc_volume-` + EditLocationCount +
                    `" name="location[` + EditLocationCount + `][wc_volume]" data-unique-id="` + EditLocationCount +
                    `" value="" readonly style="width: 120px"><p class="pl-3">cm</p></div></div></div></div>`;
                newData1 += `<div class="col-md-4 mt-4" style="padding-left: 60px;"><h5 class="pl-5 physical_label">{{ 'IMAGES'|e }}</h5><div class="drop-drag-img"><div id="drop-area"><div class="my-form"><input type="file" id="fileElem-${EditLocationCount}" multiple accept="image/*" onchange="handleFiles(this.files, ${EditLocationCount})" class="fileElem"><label class="button" for="fileElem-${EditLocationCount}">Select Files</label>`;
                newData1 += `</div><p class="text-center">Or Drag and Drop Images Here</p><progress id="progress-bar" max=100 value=0></progress><div class="gallery" id="gallery-${EditLocationCount}" /></div></div></div></div>`;
                newData1 += `<div class="col-md-12 mt-4"><div class="main-heading-patient custom-gap mb-4"><h5 class="pl-5 mb-0" style="color: #0056b3;
    font-size: 24px;
    font-weight: 700;
    text-transform: uppercase;">ASSESSMENT</h5><select class="form-select select2 shadow p-2 bg-white rounded physical assessment_template_select center-select" aria-label="Default select example"  data-wount="${EditLocationCount}" id="wound_care_assessment-${EditLocationCount}" style="width: 60%;">`;
                newData1 += `<option>{{ 'Select Template'|e }}</option>`;

                $.each(data.assessments, function (index, p) {
                    newData1 += `<option value=${p.id}>${p.assessment_name}</option>`;
                });

                newData1 += `</select><div><button type="button" class="add-template" data-toggle="modal" data-target="#DermatologyAssessmentModalCenter"><i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template</button></div></div>`;

                newData1 += `<div class="col-md-12"><div class="form-fields-area icd-number"><div class="pl-1"><p class="mr-2 mb-0 physical_label">{{ 'ICD-10 Diagnosis Code'|e }}</p>`;

                newData1 += `<select class="form-control ml-4 select2 icd_codes_all cpt-code-change" data-wount="${EditLocationCount}" id="wc_wound_icd-${EditLocationCount}" style="width: 60%" multiple>`;
                newData1 += `<option>{{ 'Choose an Option'|e }}</option>`;

                $.each(data.icd10s, function (index, p) {
                    newData1 += `<option value=${p.icd_name}>${p.icd_code}</option>`;
                });
                //{% for key, value in icd10s %}
                //newData1 += `<option value="{{ key }}">{{ value }}</option>`;
                //{% endfor %}

                newData1 += `</select><button type="button" class="add-template add-cpt ml-2" data-toggle="modal"  data-target="#addIcdCodeModel">{{'Add ICD-10'|e}}</button></div></div></div></div>`;

                newData1 += `<div class="col-md-12 mt-2"><div class="form-fields-area"><p class="mb-0 physical_label ml-3">{{ "Plan:"|e }}</p>`;
                newData1 += `<input type="hidden" id="wc_icd-${EditLocationCount}" name="location[` + EditLocationCount +
                    `][icd_10]" class="form-control ml-3">`;
                newData1 += `<textarea type="text" id="wc_plan-${EditLocationCount}" name="location[` + EditLocationCount +
                    `][wc_plan]" class="form-control ml-3 field textarea" rows="1"></textarea></div>`;
                newData1 += `<div class="form-fields-area mt-2"><p class="mb-0 physical_label ml-3" style="max-width: 85px; width: 100%;">{{ "Medication:"|e }}</p>`;
                newData1 += `<input type="text" id="wc_medication-${EditLocationCount}" name="location[` + EditLocationCount +
                    `][wc_medication]" class="form-control ml-3 field"></div></div>`;

                newData1 += `<div class="col-md-12 ml-3" id="secondTreatmentEditWound_${EditLocationCount}"><button type="button" treatment="0" location="${EditLocationCount}" class="add-template testing mt-2 mb-2 add_treatment` +
                    EditLocationCount + `" onclick="add(` + EditLocationCount + `, this)"> + Add Treatment</button></div>`;

            
                newData1 += `<div class="mt-2 ml-4 new_treatment` + EditLocationCount + `"></div></div></div>`;

                $(`#new_edit_location-${CurrentCount}`).append(newData1);
                $(`#new_edit_location-${CurrentCount}`).after(
                    `<section class="new_edit_location mt-4" id="append_edit_location-${EditLocationCount}">
      
    </section>`
                );

                $('.select2').select2();

                $(`#append_edit_location-${EditLocationCount}`).attr("id", `new_edit_location-${EditLocationCount}`);
                triggerInputForNonEmptyTextareas()
            },



        });
    });


    function add (val, button) {

        var treatmentCount = $(button).attr('treatment');
        var locationCnt = $(button).attr('location');

        if (locationCnt !== undefined) {
            locationCount = locationCnt;
        }


        treatmentCount = parseInt(treatmentCount);
        treatmentCount++;

        $(button).attr('treatment', treatmentCount);

        var location = document.getElementById('location_get').value;

        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                var newData = '';
                
                var newData = '';
                newData += '<div class="col-md-12" style="padding-left: 30px;">';
                newData += '<div class="main-heading-patient flex-wrap align-items-baseline mt-2">';
                newData += '<div class="assessment-txt d-flex align-items-baseline">';
                newData += '<p>Treatment #' + treatmentCount + '</p>';
                newData += `<a class="btn" role="button" id="woundCareTreatmentCopy-1" card-count="${locationCount}" card-treatment="${treatmentCount}">
                                <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a></div>`;
                newData += '<select class="form-select select2 procedure_notes shadow p-2 bg-white rounded center-select" data-count="' + treatmentCount + '" data-location="' + locationCount + '" aria-label="Default select example" id="wound_treatment_' + locationCount + '_' + treatmentCount + '">';
                newData += `<option>Choose an Option</option>`;
                    $.each(data.procedureNotes, function (index, p) {
                        newData += `<option value=${p.id}>${p.template}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template" data-toggle="modal" data-target="#procedureNotesModel">';
                newData += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template';
                newData += '</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2 p-0">';
                newData += '<div class="form-fields-area" style="padding-right: 40px; padding-left: 20px;">';
                newData += '<p class="mb-0 physical_label ml-3">Procedure Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location['+locationCount+'][treatment][' + treatmentCount + '][wc_procdure_notes]" id="location_'+locationCount+'_procedure_' + treatmentCount + '"></textarea>';
                newData += '</div>';
                newData += '<div class="form-fields-area" style="padding-right: 40px; padding-left: 20px;">';
                newData += '<p class="physical_label ml-3">Additional Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location['+locationCount+'][treatment][' + treatmentCount + '][wc_additional_notes]" id="location_'+locationCount+'_additional_' + treatmentCount + '"></textarea>';
                newData += '<input type="hidden" id="wc_cpt_' + locationCount + '_code-'+treatmentCount+'" name="location['+locationCount+'][treatment][' + treatmentCount + '][wc_cpt_code]" class="form-control ml-3">';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2 p-0">';
                newData += '<div class="form-fields-area d-flex" style="padding-right: 40px; padding-left: 20px;">';
                newData += '<div class="col-md-12">';
                newData += '<p class="physical_label">CPT Code</p>';
                newData += '<div class="d-flex align-items-center custom-gap">';
                newData += '<select class="form-control select2 cpt_codes_all cpt_codes_dermitology_all" data-count="'+treatmentCount+'" data-location="'+locationCount+'" style="width:100% !important" multiple id="location_'+locationCount+'_cpt_' + treatmentCount + '">';
                newData += `<option>{{ 'Choose an Option'|e }}</option>`;
                    $.each(data.cptCodes, function (index, p) {
                        newData += `<option value=${p.cpt_code}>${p.cpt_code}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template add-cpt" data-toggle="modal" data-target="#addCptCodeModel">Add CPT</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';

                $('.new_treatment' + val).append(newData);
                $("#location_"+locationCount+'_cpt_'+ treatmentCount).select2();
               $('#wound_treatment_' + locationCount + '_' + treatmentCount).select2();
               triggerInputForNonEmptyTextareas()
            },
        });
    }

    {# var AddtreatmentCount = 1; #}

    function addTreatment (val, button) {

        var AddtreatmentCount = $(button).attr('treatment');
        var problemCnt = $(button).attr('problem');

        var treatmentCount = $(button).attr('treatment');

        if (problemCnt !== undefined) {
            dermatologyLocationCount = problemCnt;
        }

        AddtreatmentCount = parseInt(AddtreatmentCount);
        AddtreatmentCount++;

        $(button).attr('treatment', AddtreatmentCount);

        var location = document.getElementById('problem_get').value;
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);


                var newData = '';
                newData += '<div class="col-md-12" style="padding-left: 60px;">';
                newData += '<div class="main-heading-patient flex-wrap align-items-baseline mt-2">';
                newData += '<div class="assessment-txt d-flex align-items-baseline">';
                newData += '<p>Treatment #' + AddtreatmentCount + '</p>';
                newData += `<a class="btn" role="button" id="dermitologyTreatmentCopy-1" card-count="${dermatologyLocationCount}" card-treatment="${AddtreatmentCount}">
                                <i class="fa fa-clone pl-2 pt-2" aria-hidden="true" style="color: #5DBDCE;"></i>
                            </a></div>`;
                newData += '<select class="form-select select2 procedure_notes procedure_notes_dermitology shadow p-2 bg-white rounded template_select center-select" data-count="'+AddtreatmentCount+'" data-problem="'+dermatologyLocationCount+'" aria-label="Default select example" id="problem_icd_select_'+dermatologyLocationCount+'_procedure_' + AddtreatmentCount + '">';
                newData += `<option>Choose an Option</option>`;
                    $.each(data.procedureNotes, function (index, p) {
                        newData += `<option value=${p.id}>${p.template}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template" data-toggle="modal" data-target="#procedureNotesModel">';
                newData += '<i class="fa fa-pencil pr-2" aria-hidden="true"></i>Template';
                newData += '</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2">';
                newData += '<div class="form-fields-area">';
                newData += '<p class="mb-0 physical_label ml-3">Procedure Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="problem['+dermatologyLocationCount+'][treatment][' + AddtreatmentCount + '][dr_procdure_notes]" id="problem_'+dermatologyLocationCount+'_procedure_' + AddtreatmentCount + '"></textarea>';
                newData += '</div>';
                newData += '<div class="form-fields-area">';
                newData += '<p class="physical_label ml-3">Additional Notes</p>';
                newData += '<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="problem['+dermatologyLocationCount+'][treatment][' + AddtreatmentCount + '][dr_additional_notes]" id="problem_'+dermatologyLocationCount+'_additional_' + AddtreatmentCount + '"></textarea>';
                newData += '<input type="hidden" id="dermo_wc_cpt_' + dermatologyLocationCount + '_code_'+AddtreatmentCount+'" name="problem['+dermatologyLocationCount+'][treatment][' + AddtreatmentCount + '][dr_cpt_code]" class="form-control ml-3">';
                newData += '</div>';
                newData += '</div>';
                newData += '<div class="col-md-12 mt-2">';
                newData += '<div class="form-fields-area d-flex">';
                newData += '<div class="col-md-12">';
                newData += '<p class="physical_label">CPT Code</p>';
                newData += '<div class="d-flex align-items-center custom-gap">';
                newData += '<select class="form-control ml-4 cpt_codes_all select2 cpt_codes_dermitology_all field" data-count="'+AddtreatmentCount+'" data-problem="'+dermatologyLocationCount+'" style="width:100% !important" multiple id="problem_'+dermatologyLocationCount+'_cpt_' + AddtreatmentCount + '">';
                newData += `<option>{{ 'Choose an Option'|e }}</option>`;
                    $.each(data.cptCodes, function (index, p) {
                        newData += `<option value=${p.cpt_code}>${p.cpt_code}</option>`;
                    });
                newData += '</select>';
                newData += '<div>';
                newData += '<button type="button" class="add-template add-cpt" data-toggle="modal" data-target="#addCptCodeModel">Add CPT</button>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';
                newData += '</div>';

                $('.dermatology_new_treatment' + val).append(newData);
                $("#problem_"+dermatologyLocationCount+'_cpt_'+ AddtreatmentCount).select2();
                $("#problem_icd_select_" + dermatologyLocationCount + "_procedure_" + AddtreatmentCount).select2();
                triggerInputForNonEmptyTextareas()
            },
        });
    }


</script>

<script>
    Array.prototype.search = function (elem) {
        for (var i = 0; i < this.length; i++) {
            if (this[i] === elem) return i;
        }

        return -1;
    };


</script>

<script>

    $('#form_submit').click(function (e) {
        var frm_data = $('#my_form').serializeArray();
        var postData = new FormData();
        $.each(frm_data, function (i, val) {
            postData.append(val.name, val.value);
        });
        $.ajax({
            url: '../../forms/woundcare/save_data.php',
            type: 'POST',
            data: postData,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {

            },
        });
    });

    $('.add-icd-dropdown').on('click', function () {
        let count = $(this).data('icd');
        e.preventDefault();
        $.ajax({
            url: '../../forms/woundcare/src/Lists.php?treatment=1',
            type: 'POST',
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                count++;
                var newData = '';
                newData += `<div class="col-md-12 mt-4 mb-3"><div class="col-md-6 d-flex mx-5 m-2"><div style="float: left">`;
                newData += `<a data-toggle="collapse" href="#treatment" aria-expanded="true" aria-controls="treatment"><h3 class="pl-5" aria-hidden="true">Treatment #` +
                    count + `</h3>`;
                newData += `</a></div></div></div><div class="col-md-12 mt-4"><div class="d-flex align-items-center custom-gap mb-4"><p class="pl-5 mb-0">Procedure Notes</p>`;
                newData += `<select class="form-select shadow p-2 bg-white rounded template_select center-select" aria-label="Default select example">`;
                newData += `<option>1</option><option>2</option><option>3</option></select>`;
                newData += `<div><button type="button" class="add-template" data-toggle="modal" data-target="#physicalExamModalCenter">Add/Edit Procedure Notes</button></div></div>`;
                newData += `<textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location[` + locationCount +
                    `][treatment][` + treatmentCount + `][wc_procdure_notes]"></textarea></div>`;
                newData += `<div class="col-md-12 mt-4"><p class="pl-5">Additional Notes</p><textarea class="form-control ml-3 field textarea" rows="1" cols="125" name="location[` +
                    locationCount + `][treatment][` + treatmentCount + `][wc_additional_notes]"></textarea>`;
                newData += `</div><div class="col-md-12 mt-4"><div class="form-fields-area d-flex"><div class="col-md-8"><p>CPT Code</p><div class="d-flex align-items-center custom-gap">`;
                newData += `<select class="form-control field" id="exampleFormControlSelect1" name="location[` +
                    locationCount + `][treatment][` + treatmentCount +
                    `][wc_cpt_code]"><option>Choose an Option</option>`;
                newData += `<option>2</option><option>3</option><option>4</option><option>5</option></select>`;
                newData += `<div><button type="button" class="add-template add-cpt" data-toggle="modal" data-target="#physicalExamModalCenter">Add CPT</button></div></div></div></div></div>`;

                $('.new_treatment').append(newData);
            },
        });
    });


    $('.key').on('change', function () {
        
    if (this.value === '0' || this.value === 'Select Template') {
        $('#assessment-plan').val('');
        $('#assessment-medication').val('');
        $('#assessment_new_name').val('');
        $('#assessment_icd10').val(null).trigger('change');
        $('#assessment_new_name').css('display', 'block');
         $('#assessment-delete').css({
            color: 'darkgray',
            cursor: 'auto',
            pointerEvents: 'none',
            cursor: 'not-allowed'
        });
    } else {
        $('#assessment_new_name').css('display', 'none');
        $('#assessment-delete').css({
            color: '#5DBDCE',
            cursor: 'pointer',
            pointerEvents:'auto'
        });
        let data = new FormData();
        data.append('template_type', 'Assessment');
        data.append('template_id', this.value);
        $.ajax({
            url: '../../forms/woundcare/resources/getTemplateData.php',
            type: 'POST',
            data: data,
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                $('#assessment-plan').val(data['fields']['plan']);
                $('#assessment-medication').val(data['fields']['medication']);
                $('#assessment_new_name').val(data['fields']['assessment_name']);
                $('#assessment_icd10').val(JSON.parse(data['fields']['ICD_10']).split(',')).trigger('change');
                $('#assessment-delete').attr('data-id',data['fields']['id']);
            },
        });
    }
});

  $('.icd_10').on('change', function () {
        
    if (this.value === '0' || this.value === 'Select Template') {
        $('#icd_code').val('');
        $('#icd_new_name').val('');
        $('#icd_new_name').css('display', 'block');
         $('#icd-delete').css({
            color: 'darkgray',
            cursor: 'auto',
            pointerEvents: 'none',
            cursor: 'not-allowed'
        });
    } else {
        $('#icd_new_name').css('display', 'none');
        $('#icd-delete').css({
            color: '#5DBDCE',
            cursor: 'pointer',
            pointerEvents:'auto'
        });
        let data = new FormData();
        data.append('template_type', 'Icd code data');
        data.append('template_id', this.value);
        $.ajax({
            url: '../../forms/woundcare/resources/getTemplateData.php',
            type: 'POST',
            data: data,
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);

                $('#icd_code').val(data['fields']['icd_code']);
                $('#icd_new_name').val(data['fields']['icd_name']);
                $('#icd-delete').attr('data-id',data['fields']['id']);
                $('#icd-delete').attr('data-name',data['fields']['icd_name']);
            },
        });
    }
});


$(document).on('click',"#assessment-delete", function(e){
    var confirmation = confirm("Are you sure you want to delete this item?");

    if (confirmation) {
        let id = $(this).attr('data-id');
    let data = new FormData();
    data.append('template_type', 'Assessment Delete');
    data.append('template_id', id);
    $.ajax({
        url: '../../forms/woundcare/resources/templateDelete.php',
        type: 'POST',
        data: data,
        async: true,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {
            $('#assessment-plan').val('');
            $('#assessment-medication').val('');
            $('#assessment_new_name').val('');
            $('#assessment_icd10').val(null).trigger('change');
            $('#assessment_new_name').css('display', 'block');

            $('#template_name_new_data option[value="' + id + '"]').remove();

            $('select[id^="wound_care_assessment-"] option[value="' + id + '"]').remove();
            $('select[id^="dermitology_assessment-"] option[value="' + id + '"]').remove();

            $('#assessment-delete').css({
                color: 'darkgray',
                cursor: 'auto',
                pointerEvents: 'none',
                cursor: 'not-allowed'
            });
        },
    });
    
    } 

});

$(document).on('click',"#procedure-delete", function(e){
    var confirmation = confirm("Are you sure you want to delete this item?");

    if (confirmation) {
        let id = $(this).attr('data-id');
    let data = new FormData();
    data.append('template_type', 'Procedure Delete');
    data.append('template_id', id);
    $.ajax({
        url: '../../forms/woundcare/resources/templateDelete.php',
        type: 'POST',
        data: data,
        async: true,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {
            $('#treatment_procedure_note').val('');
            $('#treatment_additional_note').val('');
            $('#treatment_cpt_code').val(null).trigger('change');
            $('#note').css('display', 'block');
            $('#note').val('');

            $('#procedure_name option[value="' + id + '"]').remove();

            $('select.procedure_notes option[value="' + id + '"]').remove();
            $('select.procedure_notes_dermitology option[value="' + id + '"]').remove();

            $('#assessment-delete').css({
                color: 'darkgray',
                cursor: 'auto',
                pointerEvents: 'none',
                cursor: 'not-allowed'
            });
        },
    });
    
    } 

});

$('.procedureNoteKey').on('change', function () {
    if (this.value == '0') {
        $('#note').val('');
        $('#treatment_procedure_note').val('');
        $('#treatment_additional_note').val('');
        $('#treatment_cpt_code').val(null).trigger('change');
        $('#note').css('display', 'block');
        $('#procedure-delete').css({
            color: 'darkgray',
            cursor: 'auto',
            pointerEvents: 'none',
            cursor: 'not-allowed'
        });
    } else {
        $('#note').css('display', 'none');
         $('#procedure-delete').css({
            color: '#5DBDCE',
            cursor: 'pointer',
            pointerEvents:'auto'
        });
        let data = new FormData();
        data.append('template_type', 'Procedure Note');
        data.append('template_id', jQuery('#procedure_name option:selected').val());
        $.ajax({
            url: '../../forms/woundcare/resources/getTemplateData.php',
            type: 'POST',
            data: data,
            async: true,
            cache: false,
            contentType: false,
            processData: false,
            success: function (response) {
                var data = JSON.parse(response);
                $('#note').val(data['fields']['template']);
                $('#treatment_procedure_note').val(data['fields']['treatment_procedure_note']);
                $('#treatment_additional_note').val(data['fields']['treatment_additional_note']);
                $('#treatment_cpt_code').val(data['fields']['treatment_cpt_code'].split(',')).trigger('change');
                $('#procedure-delete').attr('data-id',data['fields']['id']);
            },
        });
    }

});

{# medical information model #}


$('#medicalInformationCopy').on('click', function(e){
    let data = new FormData();
    data.append('template_type', 'Medical Information');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {
        
            var data = JSON.parse(response);

            let newData = '';
            $("#more_medical_information_copy").empty();
            $("#medicalInformationCopyModal").modal('show');
            $("#current_medical_information_record").val(data[0]['id']);
            $("#medical_information_date_copy").text(data[0]['date']);
            $('.template_hip_copy').val(data[0]['wc_hpi']);
            $('.template_chief_complaint_copy').val(data[0]['wc_complaint']);
            $('.template_current_medication_copy').val(data[0]['wc_current_medication']);
            $('.template_medical_history_copy').val(data[0]['medical_history']);
            $('.template_allergies_copy').val(data[0]['wc_allergies']);
            $('.template_surgical_history_copy').val(data[0]['wc_surgical_history']);
            $('.template_social_history_copy').val(data[0]['wc_social']);
            $('.template_family_history_copy').val(data[0]['wc_family']);
            $('.template_ros_copy').val(data[0]['wc_ros']);

            
            var isFirstIterationMedical = true;

            $.each(data, function(index, value) {

                if (isFirstIterationMedical) {
                    isFirstIterationMedical = false;
                    return true;
                }

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#medicalInformationCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="medicalInformationCopyBody_'+index+'" id="medical-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="medicalInformationCopyCheckAll_'+index+'" data-medical-id="'+index+'">';
                newData += '<span class="ml-3" id="medical_information_date_copy_'+index+'" style="min-width: 100px;">'+value.date+'</span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="medicalInformationCopyBody_'+index+'"><div class="medical-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_complaint+'" name="wc_complaint" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Chief Complaint"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_chief_complaint" placeholder="The patient is here for..." id="template_chief_complaint_copy"';
                newData += 'name="template_chief_complaint_copy" value="'+value.wc_complaint+'">'+value.wc_complaint+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_hpi+'" name="wc_hpi" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "HPI"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_hip" placeholder="The patient is here for..." id="template_hip_copy"';
                newData += 'name="template_hip_copy" value="'+value.wc_hpi+'">'+value.wc_hpi+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_current_medication+'" name="wc_current_medication" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Current Medication"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_current_medication" placeholder="The patient is here for..." id="template_current_medication_copy"';
                newData += 'name="template_current_medication_copy" value="'+value.wc_current_medication+'">'+value.wc_current_medication+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Medical History"|e }}</label></div>';
                newData += '<textarea class="form-control copy_medical_history" placeholder="Diabetes,E16.32" id="template_medical_history_copy"';
                newData += 'name="template_medical_history_copy" value="'+value.medical_history+'">'+value.medical_history+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_allergies+'" name="wc_allergies" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Allergies/intolerance"|e }}</label></div>';
                newData += '<textarea class="form-control copy_allergies" placeholder="NKDA" id="template_allergies_copy"';
                newData += 'name="template_allergies_copy" value="'+value.wc_allergies+'">'+value.wc_allergies+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_surgical_history+'" name="wc_surgical_history" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Surgical History/Hospitalization"|e }}</label></div>';
                newData += '<textarea class="form-control copy_surgical_history" placeholder="None" id="template_surgical_history_copy"';
                newData += 'name="template_surgical_history_copy" value="'+value.wc_surgical_history+'">'+value.wc_surgical_history+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_social+'" name="wc_social" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Social History"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control copy_social_history" placeholder="Smokes cigarrettes: No; Drinks alcohol: No" id="template_social_history_copy"';
                newData += 'name="template_social_history_copy" value="'+value.wc_social+'">'+value.wc_social+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" value="'+value.wc_family+'" name="wc_family" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Family History"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control copy_history" placeholder="Skin canser: No" id="template_family_history_copy"';
                newData += 'name="template_family_history_copy" value="'+value.wc_family+'">'+value.wc_family+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input modical-information-copy-'+index+'" name="wc_ros" value="'+value.wc_ros+'" type="checkbox" id="myCheckbox" data-medical="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Review Of Systems"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control template_ros_copy" placeholder="Nausea: No, Vorniting: No, Diarrhea: No, Chils: No" id="template_ros_copy"';
                newData += 'name="template_ros_copy" value="'+value.wc_ros+'">'+value.wc_ros+'</textarea></div>';
                newData += '</div></div></div>';

                $("#more_medical_information_copy").append(newData);
    
            });
        },
    });
});

{# physical exam model #}

$('#physicalExamCopy').on('click', function(e){
    let data = new FormData();
    data.append('template_type', 'Physical Exam');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {

            var data = JSON.parse(response);
 
            let newData = '';
            $("#more_phisical_exam_copy").empty();
            $("#physicalExamCopyModal").modal('show');
            $("#physical_exam_date_copy").text(data[0]['date']);
            $("#current_physical_exam_record").val(data[0]['id']);
            $('.template_t_copy').val(data[0]['wc_t']);
            $('.template_p_copy').val(data[0]['wc_p']);
            $('.template_hr_copy').val(data[0]['wc_hr']);
            $('.template_systolic_copy').val(data[0]['wc_systolic']);
            $('.template_diastolic_copy').val(data[0]['wc_diastolic']);
            $('.template_ht_copy').val(data[0]['wc_ht']);
            $('.template_wt_copy').val(data[0]['wc_wt']);
            $('.template_general_copy').val(data[0]['wc_general']);
            $('.template_head_copy').val(data[0]['wc_head']);
            $('.template_eyes_copy').val(data[0]['wc_eyes']);
            $('.template_nose_copy').val(data[0]['wc_nose']);
            $('.template_ears_copy').val(data[0]['wc_ears']);
            $('.template_oral_cavity_copy').val(data[0]['wc_oral']);
            $('.template_neck_copy').val(data[0]['wc_neck']);
            $('.template_heart_copy').val(data[0]['wc_heart']);
            $('.template_skin_copy').val(data[0]['wc_skin']);
            $('.template_lungs_copy').val(data[0]['wc_lungs']);
            $('.template_abdomen_copy').val(data[0]['wc_abdomen']);
            $('.template_back_copy').val(data[0]['wc_back']);
            $('.template_extemities_copy').val(data[0]['wc_extremities']);
            $('.template_pelvic_copy').val(data[0]['wc_pelvic']);
            $('.template_breast_copy').val(data[0]['wc_breast']);
            $('.template_genitourinary_copy').val(data[0]['wc_genitourinary']);
            $('.template_neurologic_copy').val(data[0]['wc_neurologic']);
            $('.template_musculoskeletal_copy').val(data[0]['wc_musculoskeletal']);


            var isFirstIterationPhysical = true;

            $.each(data, function(index, value) {

                if (isFirstIterationPhysical) {
                    isFirstIterationPhysical = false;
                    return true;
                }

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#physicalExamCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="physicalExamCopyBody_'+index+'" id="physical-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="physicalExamCopyCheckAll_'+index+'" data-id="'+index+'">';
                newData += '<span class="ml-3" id="physical_exam_date_copy_'+index+'" style="min-width: 100px;">'+value.date+'</span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="physicalExamCopyBody_'+index+'"><div class="medical-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_t_copy" name="wc_t" value="'+value.wc_t+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "T"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_t_copy"';
                newData += 'name="template_t_copy" value="'+value.wc_t+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_p_copy" name="wc_p" value="'+value.wc_p+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "RR"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_p_copy"';
                newData += 'name="template_p_copy" value="'+value.wc_p+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_hr_copy" name="wc_hr" value="'+value.wc_hr+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "HR"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_hr_copy"';
                newData += 'name="template_hr_copy" value="'+value.wc_hr+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_systolic_copy" name="wc_systolic" value="'+value.wc_systolic+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Systolic"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_systolic_copy"';
                newData += 'name="template_systolic_copy" value="'+value.wc_systolic+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_diastolic_copy" name="wc_diastolic" value="'+value.wc_diastolic+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Diastolic"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_diastolic_copy"';
                newData += 'name="template_diastolic_copy" value="'+value.wc_diastolic+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_ht_copy" name="wc_ht" value="'+value.wc_ht+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "HT"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_ht_copy"';
                newData += 'name="template_ht_copy" value="'+value.wc_ht+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_wt_copy" name="wc_wt" value="'+value.wc_wt+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "WT"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_wt_copy"';
                newData += 'name="template_wt_copy" value="'+value.wc_wt+'"></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_general_copy" name="wc_general" value="'+value.wc_general+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "General"|e }}</label></div>';
                newData += '<textarea name="" class="form-control" placeholder="" id="template_general_copy"';
                newData += 'name="template_general_copy" value="'+value.wc_general+'">'+value.wc_general+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_head_copy" name="wc_head" value="'+value.wc_head+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Head"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_head_copy"';
                newData += 'name="template_head_copy" value="'+value.wc_head+'">'+value.wc_head+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_eyes_copy" name="wc_eyes" value="'+value.wc_eyes+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Eyes"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_eyes_copy"';
                newData += 'name="template_eyes_copy" value="'+value.wc_eyes+'">'+value.wc_eyes+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_nose_copy" name="wc_nose" value="'+value.wc_nose+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Nose"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_nose_copy"';
                newData += 'name="template_nose_copy" value="'+value.wc_nose+'">'+value.wc_nose+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_ears_copy" name="wc_ears" value="'+value.wc_ears+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Ears"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_ears_copy"';
                newData += 'name="template_ears_copy" value="'+value.wc_ears+'">'+value.wc_ears+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_oral_cavity_copy" name="wc_oral" value="'+value.wc_oral+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Throat/Oral Cavity"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_oral_cavity_copy"';
                newData += 'name="template_oral_cavity_copy" value="'+value.wc_oral+'">'+value.wc_oral+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_neck_copy" name="wc_neck" value="'+value.wc_neck+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Neck/Thyroid"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_neck_copy"';
                newData += 'name="template_neck_copy" value="'+value.wc_neck+'">'+value.wc_neck+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_heart_copy" name="wc_heart" value="'+value.wc_heart+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Heart"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_heart_copy"';
                newData += 'name="template_heart_copy" value="'+value.wc_heart+'">'+value.wc_heart+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_skin_copy" name="wc_skin" value="'+value.wc_skin+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Skin"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_skin_copy"';
                newData += 'name="template_skin_copy" value="'+value.wc_skin+'">'+value.wc_skin+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_lungs_copy" name="wc_lungs" value="'+value.wc_lungs+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Lungs"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="lungs" id="template_lungs_copy"';
                newData += 'name="template_lungs_copy" value="'+value.wc_lungs+'">'+value.wc_lungs+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_abdomen_copy" name="wc_abdomen" value="'+value.wc_abdomen+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Abdomen"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_abdomen_copy"';
                newData += 'name="template_abdomen_copy" value="'+value.wc_abdomen+'">'+value.wc_abdomen+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_back_copy" name="wc_back" value="'+value.wc_back+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Back"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_back_copy"';
                newData += 'name="template_back_copy" value="'+value.wc_back+'">'+value.wc_back+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_extemities_copy" name="wc_extremities" value="'+value.wc_extremities+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Extremities"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_extemities_copy"';
                newData += 'name="template_extemities_copy" value="'+value.wc_extremities+'">'+value.wc_extremities+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_pelvic_copy" name="wc_pelvic" value="'+value.wc_pelvic+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Pelvic"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_pelvic_copy"';
                newData += 'name="template_pelvic_copy" value="'+value.wc_pelvic+'">'+value.wc_pelvic+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_breast_copy" name="wc_breast" value="'+value.wc_breast+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Breast"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_breast_copy"';
                newData += 'name="template_breast_copy" value="'+value.wc_breast+'">'+value.wc_breast+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_genitourinary_copy" name="wc_genitourinary" value="'+value.wc_genitourinary+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Genitourinary"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_genitourinary_copy"';
                newData += 'name="template_genitourinary_copy" value="'+value.wc_genitourinary+'">'+value.wc_genitourinary+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_neurologic_copy" name="wc_neurologic" value="'+value.wc_neurologic+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Neurologic"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_neurologic_copy"';
                newData += 'name="template_neurologic_copy" value="'+value.wc_neurologic+'">'+value.wc_neurologic+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input exam-physical-copy-'+index+' template_musculoskeletal_copy" name="wc_musculoskeletal" value="'+value.wc_musculoskeletal+'" type="checkbox" id="myCheckbox" data-check="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Musculoskeletal"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control" placeholder="" id="template_musculoskeletal_copy"';
                newData += 'name="template_musculoskeletal_copy" value="'+value.wc_musculoskeletal+'">'+value.wc_musculoskeletal+'</textarea></div>';
                newData += '</div></div></div></div>';

                $("#more_phisical_exam_copy").append(newData)
            });

        },
    });
});

{# wound care model #}

$(document).on('click', '[id^="woundCareCopy-"]', function(e) {
    let cardCountValue = $(this).attr('card-count');

    $('#woundcareCopyBtn').attr('card-count',cardCountValue);

    let data = new FormData();
    data.append('template_type', 'Wound Care');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {

            var data = JSON.parse(response);
 
            let newData = '';
            $("#more_wound_copy").empty();
            $("#woundCareCopyModal").modal('show');

            $("#wound_care_date_copy").text(data[0]['date']);
            $('.template_anatomical_copy').val(data[0]['wc_anatomical']);
            $('.template_drainage_amount_copy').val(data[0]['wc_drainage_amount']);
            $('.template_drainage_description_copy').val(data[0]['wc_drainage_description']);
            $('.template_location_copy').val(data[0]['wc_location']);
            $('.template_medication_copy').val(data[0]['wc_medication']);
            $('.template_ordo_copy').val(data[0]['wc_ordo']);
            $('.template_plan_copy').val(data[0]['wc_plan']);
            $('.template_side_copy').val(data[0]['wc_side']);
            $('.template_signs1_copy').val(data[0]['wc_signs1']);
            $('.template_signs2_copy').val(data[0]['wc_signs2']);
            $('.template_surfacearea_copy').val(data[0]['wc_surfacearea']);
            $('.template_surgically_copy').val(data[0]['wc_surgically']);
            $('.template_thickness_copy').val(data[0]['wc_thickness']);
            $('.template_tunneling_copy').val(data[0]['wc_tunneling']);
            $('.template_undermining_copy').val(data[0]['wc_undermining']);
            $('.template_volume_copy').val(data[0]['wc_volume']);
            $('.template_length_copy').val(data[0]['wc_length']);
            $('.template_width_copy').val(data[0]['wc_width']);
            $('.template_depth_copy').val(data[0]['wc_depth']);
            $('.template_wound_type_copy').val(data[0]['wc_wound_type']);
            $('.template_icd_10_copy').val(data[0]['icd_10']);

            
            $('.template_anatomical_copy').attr('name', `wc_anatomical-${cardCountValue}`);
            $('.template_drainage_amount_copy').attr('name', `wc_drainage_amount-${cardCountValue}`);
            $('.template_drainage_description_copy').attr('name', `wc_drainage_description-${cardCountValue}`);
            $('.template_location_copy').attr('name', `wc_location-${cardCountValue}`);
            $('.template_medication_copy').attr('name', `wc_medication-${cardCountValue}`);
            $('.template_undermining_copy').attr('name', `wc_undermining-${cardCountValue}`);
            $('.template_tunneling_copy').attr('name', `wc_tunneling-${cardCountValue}`);
            $('.template_ordo_copy').attr('name', `wc_ordo-${cardCountValue}`);
            $('.template_plan_copy').attr('name', `wc_plan-${cardCountValue}`);
            $('.template_side_copy').attr('name', `wc_side-${cardCountValue}`);
            $('.template_signs1_copy').attr('name', `wc_signs1-${cardCountValue}`);
            $('.template_signs2_copy').attr('name', `wc_signs2-${cardCountValue}`);

            $('.template_surfacearea_copy').attr('name', `wc_surfacearea-${cardCountValue}`);
            $('.template_surgically_copy').attr('name', `wc_surgically-${cardCountValue}`);
            $('.template_thickness_copy').attr('name', `wc_thickness-${cardCountValue}`);
       
            $('.template_volume_copy').attr('name', `wc_volume-${cardCountValue}`);
            $('.template_length_copy').attr('name', `wc_length-${cardCountValue}`);
            $('.template_width_copy').attr('name', `wc_width-${cardCountValue}`);
            $('.template_depth_copy').attr('name', `wc_depth-${cardCountValue}`);
            $('.template_wound_type_copy').attr('name', `wc_wound_type-${cardCountValue}`);

            var isFirstIterationWound = true;

            let previousDate = null;
            let currentNumber = 1;

            $.each(data, function(index, value) {

                if (isFirstIterationWound) {
                    isFirstIterationWound = false;
                    previousDate = value.date;
                    return true;
                }

                if (value.date === previousDate) {
                    currentNumber++;
                } else {
                    currentNumber = 1;
                    previousDate = value.date;
                }
                

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#woundCareCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="woundCareCopyBody_'+index+'" id="physical-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="woundCareCopyCheckAll_'+index+'" data-wound-id="'+index+'">';
                newData += '<span class="ml-3" id="physical_exam_date_copy_'+index+'" style="min-width: 100px;">'+value.date+' -</span><span>Problem#'+ currentNumber + '</span></span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="woundCareCopyBody_'+index+'"><div class="wound-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_side_copy" value="'+value.wc_side+'" type="checkbox" name="wc_side-'+cardCountValue+'"  id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Side"|e }}</label></div>';
                newData += '<textarea name="" class="form-control template_side_copy" placeholder="" value="'+value.wc_side+'" id="template_side_copy" name="template_side_copy">'+value.wc_side+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_head_copy" value="'+value.wc_anatomical+'" type="checkbox" name="wc_anatomical-'+cardCountValue+'" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Anatomical"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control template_anatomical_copy" placeholder="" value="'+value.wc_anatomical+'" id="template_anatomical_copy" name="template_anatomical_copy">'+value.wc_anatomical+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_location_copy" value="'+value.wc_location+'" name="wc_location-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Location"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control template_location_copy" placeholder="" value="'+value.wc_location+'" id="template_location_copy" name="template_location_copy">'+value.wc_location+'</textarea></div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_thickness_copy" value="'+value.wc_thickness+'" name="wc_thickness-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Thickness"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_thickness_copy" placeholder="" value="'+value.wc_thickness+'" id="template_thickness_copy" name="template_thickness_copy">'+value.wc_thickness+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_drainage_amount_copy" value="'+value.wc_drainage_amount+'" name="wc_drainage_amount-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Drainage Amount"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_drainage_amount_copy" placeholder="" value="'+value.wc_drainage_amount+'" id="template_drainage_amount_copy" name="template_drainage_amount_copy">'+value.wc_drainage_amount+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_drainage_description_copy" value="'+value.wc_drainage_description+'" name="wc_drainage_description-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Drainage Description"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_drainage_description_copy" placeholder="" value="'+value.wc_drainage_description+'" id="template_drainage_description_copy" name="template_drainage_description_copy">'+value.wc_drainage_description+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_surgically_copy" value="'+value.wc_surgically+'" name="wc_surgically-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Surgically"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_surgically_copy" placeholder="" value="'+value.wc_surgically+'" id="template_surgically_copy" name="template_surgically_copy">'+value.wc_surgically+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_undermining_copy" value="'+value.wc_undermining+'" name="wc_undermining-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Undermining"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_undermining_copy" placeholder="" value="'+value.wc_undermining+'" id="template_undermining_copy" name="template_undermining_copy">'+value.wc_undermining+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_tunneling_copy" value="'+value.wc_tunneling+'" name="wc_tunneling-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Tunneling"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_tunneling_copy" placeholder="lungs" value="'+value.wc_tunneling+'" id="template_tunneling_copy" name="template_tunneling_copy">'+value.wc_tunneling+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_ordo_copy" value="'+value.wc_ordo+'" name="wc_ordo-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Ordo"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_ordo_copy" placeholder="" value="'+value.wc_ordo+'" id="template_ordo_copy" name="template_ordo_copy">'+value.wc_ordo+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_signs1_copy" value="'+value.wc_signs1+'" name="wc_signs1-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Signs1"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_signs1_copy" placeholder="" value="'+value.wc_signs1+'" id="template_signs1_copy" name="template_signs1_copy">'+value.wc_signs1+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_signs2_copy" value="'+value.wc_signs2+'" name="wc_signs2-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Signs2"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_signs2_copy" placeholder="" value="'+value.wc_signs2+'" id="template_signs2_copy" name="template_signs2_copy">'+value.wc_signs2+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_length_copy" value="'+value.wc_length+'" name="wc_length-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Length"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_length_copy" placeholder="" value="'+value.wc_length+'" id="template_length_copy" name="template_length_copy">'+value.wc_length+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_width_copy" value="'+value.wc_width+'" name="wc_width-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Width"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_width_copy" placeholder="" value="'+value.wc_width+'" id="template_width_copy" name="template_width_copy">'+value.wc_width+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_depth_copy" value="'+value.wc_depth+'" name="wc_depth-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Depth"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_depth_copy" placeholder="" value="'+value.wc_depth+'" id="template_depth_copy" name="template_depth_copy">'+value.wc_depth+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_volume_copy" value="'+value.wc_volume+'" name="wc_volume-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Volume"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_volume_copy" placeholder="" value="'+value.wc_volume+'" id="template_volume_copy" name="template_volume_copy">'+value.wc_volume+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_surfacearea_copy" value="'+value.wc_surfacearea+'" name="wc_surfacearea-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Surfacearea"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_surfacearea_copy" placeholder="" value="'+value.wc_surfacearea+'" id="template_surfacearea_copy" name="template_surfacearea_copy">'+value.wc_surfacearea+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_icd_10_copy" value="'+value.icd_10+'" name="icd_10" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Icd 10"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_icd_10_copy" placeholder="" value="'+value.icd_10+'" id="template_icd_10_copy" name="template_icd_10_copy">'+value.icd_10+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_plan_copy" value="'+value.wc_plan+'" name="wc_plan-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Plan"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_plan_copy" placeholder="" value="'+value.wc_plan+'" id="template_plan_copy" name="template_plan_copy">'+value.wc_plan+'</textarea>';
                newData += '</div>';
                newData += '<div class="form-group">';
                newData += '<div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-copy-'+index+' template_medication_copy" value="'+value.wc_medication+'" name="wc_medication-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-wound="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Medication"|e }}</label>';
                newData += '</div>';
                newData += '<textarea type="text" class="form-control template_medication_copy" placeholder="" value="'+value.wc_medication+'" id="template_medication_copy" name="template_medication_copy">'+value.wc_medication+'</textarea>';
                newData += '</div></div></div></div></div></div>';
                $("#more_wound_copy").append(newData)
            });

        },
    });
});

{# dermitology model #}

$(document).on('click', '[id^="dermitologyCopy-"]', function(e) {
    let cardCountValue = $(this).attr('card-count');

    $('#dermitologyOnCopyBtn').attr('card-count',cardCountValue);
    $('#dermitologyOnMergeBtn').attr('card-count',cardCountValue);

    let data = new FormData();
    data.append('template_type', 'Dermitology');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {

            let data = JSON.parse(response);
 
            let newData = '';
            $("#more_dermitology_copy").empty();
            $("#dermitologyCopyModal").modal('show');
             $("#dermatology_date_copy").text(data[0]['date']);
            $('.template_dr_description_copy').val(data[0]['dr_description']);
            $('.template_dr_location_copy').val(data[0]['dr_location']);
            $('.template_dr_medication_copy').val(data[0]['dr_medication']);
            $('.template_dr_plan_copy').val(data[0]['dr_plan']);
            $('.template_dr_icd_10_copy').val(data[0]['icd_10']);

            $('.template_dr_description_copy').attr('name', `description-${cardCountValue}`);
            $('.template_dr_location_copy').attr('name', `location-${cardCountValue}`);
            $('.template_dr_medication_copy').attr('name', `wc_medication_dermitology-${cardCountValue}`);
            $('.template_dr_plan_copy').attr('name', `wc_plan_dermitology-${cardCountValue}`);
           
            var isFirstIterationDermitology = true;

     
            let previousDate = null;
            let currentNumber = 1;

            $.each(data, function(index, value) {

                if (isFirstIterationDermitology) {
                    isFirstIterationDermitology = false;
                    previousDate = value.date;
                    return true;
                }


                if (value.date === previousDate) {
                    currentNumber++;
                } else {
                    currentNumber = 1;
                    previousDate = value.date;
                }

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#dermitologyCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="dermitologyCopyBody_'+index+'" id="medical-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="dermitologyCopyCheckAll_'+index+'" data-dermitology-id="'+index+'">';
                newData += '<span class="ml-3" id="dermitolgy_date_copy_'+index+'" style="min-width: 100px;">'+value.date+' -</span><span>Problem#'+ currentNumber + '</span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="dermitologyCopyBody_'+index+'"><div class="medical-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-copy-'+index+'" value="'+value.dr_description+'" name="description-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-dermitology="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Description"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_chief_complaint" placeholder="The patient is here for..." id=""';
                newData += 'name="template_chief_complaint_copy" value="'+value.dr_description+'">'+value.dr_description+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-copy-'+index+'" value="'+value.dr_location+'" name="location-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-dermitology="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Location"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_hip" placeholder="The patient is here for..." id=""';
                newData += 'name="template_hip_copy" value="'+value.dr_location+'">'+value.dr_location+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-copy-'+index+'" value="'+value.dr_medication+'" name="wc_medication_dermitology-'+cardCountValue+'" type="checkbox" id="myCheckbox" data-dermitology="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Current Medication"|e }}</label></div>';
                newData += '<textarea name="" class="form-control copy_current_medication" placeholder="The patient is here for..." id="template_current_medication_copy"';
                newData += 'name="template_current_medication_copy" value="'+value.dr_medication+'">'+value.dr_medication+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-copy-'+index+'" type="checkbox" value="'+value.dr_plan+'" name="wc_plan_dermitology-'+cardCountValue+'" id="myCheckbox" data-dermitology="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Medical History"|e }}</label></div>';
                newData += '<textarea type="text" class="form-control copy_medical_history" placeholder="Diabetes,E16.32" id="template_medical_history_copy"';
                newData += 'name="template_medical_history_copy" value="'+value.dr_plan+'">'+value.dr_plan+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-copy-'+index+'" value="'+value.icd_10+'" name="icd_10" type="checkbox" id="myCheckbox" data-dermitology="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Allergies/intolerance"|e }}</label></div>';
                newData += '<input type="text" class="form-control copy_allergies" placeholder="NKDA" id="template_allergies_copy"';
                newData += 'name="template_allergies_copy" value="'+value.icd_10+'"></div>';
                newData += '</div></div></div>';

                $("#more_dermitology_copy").append(newData);
            });

        },
    });
});



$("#physicalExamOnCopyBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#physicalExamCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#physicalExam').collapse('show');
    $("#physicalExamCopyModal").modal('hide');

    $.each(valuesByName, function(index, value) {
     $('#' + index).val(value);
    });

    triggerInputForTextAreas();

  
});

$("#physicalExamOnMergeBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#physicalExamCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#physicalExam').collapse('show');
    $("#physicalExamCopyModal").modal('hide');
     
     $.each(valuesByName, function(index, value) {
     let currentValue = $('#' + index).val();
    
    if(currentValue !== undefined){
        if(currentValue.length > 0){
                $('#' + index).val(currentValue+', '+value);
            }else{
                $('#' + index).val(value);
        }
    }
     
     
    });

    triggerInputForTextAreas();
  
});

$("#medicalInformationCopyBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#medicalInformationCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#medicalInformation').collapse('show');
    $("#medicalInformationCopyModal").modal('hide');

    $.each(valuesByName, function(index, value) {
     $('#' + index).val(value);
    });

    triggerInputForTextAreas();
  
});

$("#medicalInformationMergeBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#medicalInformationCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#medicalInformation').collapse('show');
    $("#medicalInformationCopyModal").modal('hide');

    $.each(valuesByName, function(index, value) {
    let currentValue = $('#' + index).val();
    if(currentValue !== undefined){
        if(currentValue.length > 0){
                $('#' + index).val(currentValue+', '+value);
            }else{
                $('#' + index).val(value);
        }
    }
     
    });

    triggerInputForTextAreas();

  
});

$("#woundcareCopyBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#woundCareCopyForm :checkbox:checked');
    let cardCount = $(this).attr('card-count');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#wounddescription').collapse('show');
    $("#woundCareCopyModal").modal('hide');

    $.each(valuesByName, function(index, value) {
    
    var $element = $('#' + index);
    
     if (index === 'icd_10') {

        var dataArray = value.split(',');

        $(`#wc_icd-${cardCount}`).val(dataArray);

        $(`#wc_wound_icd-${cardCount}`).val(dataArray).trigger('change');
        
        }
    else if ($element.is('input:text') || $element.is('textarea')) {
        // For text inputs and textareas, use .val() to set their values
        $element.val(value);
    } else if ($element.is('select')) {
        // For select elements, find the option with the specified value and select it
        $element.find('option[value="' + value + '"]').prop('selected', true);
    } else if ($element.is('input:radio')) {
    // Find all radio buttons with the same name as $element and set the one with matching value to checked
    $element = $('input:radio[name="' + $element.attr('name') + '"][value="' + value + '"]');
    $element.prop('checked', true);
}
    
});

triggerInputForTextAreas();

  
});

$("#dermitologyOnCopyBtn").on('click', function(e){
    let cardCountValue = $(this).attr('card-count');
    var checkedCheckboxes = $('#dermitologyCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ',' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#dermatology').collapse('show');
    $("#dermitologyCopyModal").modal('hide');

        $.each(valuesByName, function(index, value) {
        var $element = $('#' + index);
        
        if (index === 'icd_10') {

        var dataArray = value.split(',');
        // Select the options corresponding to the values in the array
        $(`#wc_wound_medication_icd-${cardCountValue}`).val(dataArray).trigger('change');
        $(`#wc_medication_icd-${cardCountValue}`).val(dataArray);
    
        }
        else if ($element.is('input:text') || $element.is('textarea')) {
            // For text inputs and textareas, use .val() to set their values
            $element.val(value);
        } else if ($element.is('select')) {
            // For select elements, find the option with the specified value and select it
            $element.find('option[value="' + value + '"]').prop('selected', true);
        } else if ($element.is('input:radio')) {
            // For radio buttons, select the one with the matching value
            $element.filter('[value="' + value + '"]').prop('checked', true);
        }
    
});

triggerInputForTextAreas();

  
});

$("#dermitologyOnMergeBtn").on('click', function(e){
    let cardCountValue = $(this).attr('card-count');
    var checkedCheckboxes = $('#dermitologyCopyForm :checkbox:checked');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ', ' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#dermatology').collapse('show');
    $("#dermitologyCopyModal").modal('hide');

     //var current = $('#wc_medication_icd-1').val();

    $.each(valuesByName, function(index, value) {
    let currentValue = $('#' + index).val();

   if (index === 'icd_10') {
    let valueIcd = $(`#wc_medication_icd-${cardCountValue}`).val();
    if (valueIcd !== undefined && valueIcd.trim() !== '') {
        var prevArray = valueIcd.split(',');
    } else {
        var prevArray = [];
    }

    var dataArray = value.split(',');

    var combinedArray = [...new Set(prevArray.concat(dataArray))];

    $(`#wc_wound_medication_icd-${cardCountValue}`).val(combinedArray).trigger('change');

     $(`#wc_medication_icd-${cardCountValue}`).val(combinedArray);
    }

    if(currentValue !== undefined){
        if(currentValue.length > 0){
                $('#' + index).val(currentValue+', '+value);
            }else{
                $('#' + index).val(value);
        }
    }
     
    });

    triggerInputForTextAreas();
  
});


{# wound care model #}
$(document).on('click', '[id^="woundCareTreatmentCopy-"]', function(e) {
    let data = new FormData();

     let cardCountValue = $(this).attr('card-count');
     let cardTreatmentValue = $(this).attr('card-treatment');

    $('#woundcareTreatmentCopyBtn').attr('card-count',cardCountValue);
     $('#woundcareTreatmentCopyBtn').attr('treatment-count',cardTreatmentValue);

    data.append('template_type', 'Wound Care Treatment');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {

            var data = JSON.parse(response);
            
            let newData = '';
            $("#more_woundcare_treatment_copy").empty();
            $("#woundCareCopyTreatmentModal").modal('show');

             $("#wound_care_treatment_date_copy").text(data[0]['date']);
            $('.template_procdure_notes_copy').val(data[0]['wc_procdure_notes']);
            $('.template_additional_notes_copy').val(data[0]['wc_additional_notes']);
            $('.template_cpt_code_copy').val(data[0]['wc_cpt_code']);

            
            $('.template_procdure_notes_copy').attr('name', `location_${cardCountValue}_procedure_${cardTreatmentValue}`);
            $('.template_additional_notes_copy').attr('name', `location_${cardCountValue}_additional_${cardTreatmentValue}`);
            $('.template_cpt_code_copy').attr('name', `location_${cardCountValue}_cpt_${cardTreatmentValue}`);

            let previousDate = null;
            let currentNumber = 1;

            let isFirstIterationWoundcareTreatment = true;

            $.each(data, function(index, value) {

                if (isFirstIterationWoundcareTreatment) {
                    isFirstIterationWoundcareTreatment = false;
                    previousDate = value.date;
                    return true;
                }

                if (value.date === previousDate) {
                    currentNumber++;
                } else {
                    currentNumber = 1;
                    previousDate = value.date;
                }

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#woundCareTreatmentCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="woundCareTreatmentCopyBody_'+index+'" id="wound-treatment-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="woundCareTreatmentCopyCheckAll_'+index+'" data-wound-treatment-id="'+index+'">';
                newData += '<span class="ml-3" id="" style="min-width: 100px;">'+value.date+' -</span><span>Problem#'+ currentNumber + '</span></span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="woundCareTreatmentCopyBody_'+index+'"><div class="medical-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-treatment-copy-'+index+' template_procdure_notes_copy" name="location_'+cardCountValue+'_procedure_'+cardTreatmentValue+'" value="'+value.wc_procdure_notes+'" type="checkbox" id="myCheckbox" data-wound-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Procdure notes"|e }}</label></div>';
                newData += '<textarea name="" class="form-control" placeholder="" id="template_procdure_notes_copy"';
                newData += 'name="template_procdure_notes_copy" value="'+value.wc_procdure_notes+'">'+value.wc_procdure_notes+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-treatment-copy-'+index+' template_additional_notes_copy" name="location_'+cardCountValue+'_additional_'+cardTreatmentValue+'" value="'+value.wc_additional_notes+'" type="checkbox" id="myCheckbox" data-wound-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Additional notes"|e }}</label></div>';
                newData += '<textarea name="" class="form-control" placeholder="" id="template_additional_notes_copy"';
                newData += 'name="template_additional_notes_copy" value="'+value.wc_additional_notes+'">'+value.wc_additional_notes+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input wound-care-treatment-copy-'+index+' template_cpt_code_copy" name="location_'+cardCountValue+'_cpt_'+cardTreatmentValue+'" value="'+value.wc_cpt_code+'" type="checkbox" id="myCheckbox" data-wound-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "CPT code"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_cpt_code_copy"';
                newData += 'name="template_cpt_code_copy" value="'+value.wc_cpt_code+'"></div>';

                newData += '</div></div></div></div>';

                $("#more_woundcare_treatment_copy").append(newData)
            });


        },
    });
});

$(document).on('click', '[id^="dermitologyTreatmentCopy-"]', function(e) {
    let data = new FormData();

    let cardCountValue = $(this).attr('card-count');
    let cardTreatmentValue = $(this).attr('card-treatment');

    $('#dermitologyTreatmentCopyBtn').attr('card-count',cardCountValue);
    $('#dermitologyTreatmentCopyBtn').attr('treatment-count',cardTreatmentValue);

    data.append('template_type', 'Dermitology Treatment');
    $.ajax({
        url: '../../forms/woundcare/resources/getCopyTemplateData.php',
        type: 'POST',
        async: true,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {

            var data = JSON.parse(response);
            
            let newData = '';
            $("#more_dermitology_treatment_copy").empty();
            $("#dermitologyCopyTreatmentModal").modal('show');
            $("#dermatology_treatment_date_copy").text(data[0]['date']);
            $('.template_dr_procdure_notes_copy').val(data[0]['dr_procdure_notes']);
            $('.template_dr_additional_notes_copy').val(data[0]['dr_additional_notes']);
            $('.template_dr_cpt_code_copy').val(data[0]['dr_cpt_code']);

             $('.template_dr_procdure_notes_copy').attr('name', `problem_${cardCountValue}_procedure_${cardTreatmentValue}`);
            $('.template_dr_additional_notes_copy').attr('name', `problem_${cardCountValue}_additional_${cardTreatmentValue}`);
            $('.template_dr_cpt_code_copy').attr('name', `problem_${cardCountValue}_cpt_${cardTreatmentValue}`);


            let isFirstIterationDermitologyTreatment = true;

            let previousDate = null;
            let currentNumber = 1;

            $.each(data, function(index, value) {

                if (isFirstIterationDermitologyTreatment) {
                    isFirstIterationDermitologyTreatment = false;
                    previousDate = value.date;
                    return true;
                }

                 if (value.date === previousDate) {
                    currentNumber++;
                } else {
                    currentNumber = 1;
                    previousDate = value.date;
                }

                newData = '<div class="card"><div class="card-header"><div class="row">';
                newData += '<div class="col-1"><div class="form-check form-check-inline">';
                newData += '<span><i class="fa fa-plus-square" style="cursor: pointer;" data-toggle="collapse" href="#dermitologyTreatmentCopyBody_'+index+'" role="button"';
                newData += 'aria-expanded="true" aria-controls="dermitologyTreatmentCopyBody_'+index+'" id="dermitology-treatment-collapse-icon-'+index+'"></i></span>';
                newData += '<input class="form-check-input ml-2" type="checkbox" id="woundCareTreatmentCopyCheckAll_'+index+'" data-dermitology-treatment-id="'+index+'">';
                newData += '<span class="ml-3" id="" style="min-width: 100px;">'+value.date+' -</span><span>Problem#'+ currentNumber + '</span></span></div>';
                newData += '</div></div></div>';
                newData += '<div class="card-body p-3 collapse" id="dermitologyTreatmentCopyBody_'+index+'"><div class="medical-form">';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-treatment-copy-'+index+' template_dr_procdure_notes_copy" name="problem_'+cardCountValue+'_procedure_'+cardTreatmentValue+'" value="'+value.dr_procdure_notes+'" type="checkbox" id="myCheckbox" data-dermitology-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Procdure notes"|e }}</label></div>';
                newData += '<textarea name="" class="form-control" placeholder="" id="template_procdure_notes_copy"';
                newData += 'name="template_procdure_notes_copy" value="'+value.dr_procdure_notes+'">'+value.dr_procdure_notes+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-treatment-copy-'+index+' template_dr_additional_notes_copy" name="problem_'+cardCountValue+'_additional_'+cardTreatmentValue+'" value="'+value.dr_additional_notes+'" type="checkbox" id="myCheckbox" data-dermitology-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "Additional notes"|e }}</label></div>';
                newData += '<textarea name="" class="form-control" placeholder="" id="template_additional_notes_copy"';
                newData += 'name="template_additional_notes_copy" value="'+value.dr_additional_notes+'">'+value.dr_additional_notes+'</textarea></div>';
                newData += '<div class="form-group"><div class="form-check form-check-inline">';
                newData += '<input class="form-check-input dermitology-treatment-copy-'+index+' template_dr_cpt_code_copy" name="problem_'+cardCountValue+'_cpt_'+cardTreatmentValue+'" value="'+value.dr_cpt_code+'" type="checkbox" id="myCheckbox" data-dermitology-treatment="'+index+'">';
                newData += '<label class="form-check-label" for="myCheckbox">{{ "CPT code"|e }}</label></div>';
                newData += '<input name="" class="form-control" placeholder="" id="template_cpt_code_copy"';
                newData += 'name="template_cpt_code_copy" value="'+value.dr_cpt_code+'"></div>';

                newData += '</div></div></div></div>';

                $("#more_dermitology_treatment_copy").append(newData)
            });


        },
    });
});


$("#woundcareTreatmentCopyBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#woundCareTreatmentCopyForm :checkbox:checked');

    let woundCardCount = $(this).attr('card-count');
    let treatmentCardCount = $(this).attr('treatment-count');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ',' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $('#treatment').collapse('show');
    $("#woundCareCopyTreatmentModal").modal('hide');

    $.each(valuesByName, function(index, value) {
    var $element = $('#' + index);
    
    if (index === 'location_' + woundCardCount + '_cpt_' + treatmentCardCount) {
        var dataArray = value.split(',');
        $("#location_" + woundCardCount + "_cpt_" + treatmentCardCount).val(dataArray).trigger('change');
    }
    else if ($element.is('input:text') || $element.is('textarea')) {
        // For text inputs and textareas, use .val() to set their values
        $element.val(value);
    } 
    
});

triggerInputForTextAreas();

  
});

$('#woundCareCopyTreatmentModal').on('hidden.bs.modal', function (e) {
    $(this).find(':checkbox').prop('checked', false);
    $(this).find(':radio').prop('checked', false);
    $('#wound-treatment-collapse-icon').removeClass('fa-plus-square').addClass('fa-minus-square');
    $('#woundCareTreatmentCopyBody').collapse('show');

});

$(document).on('click', function (event) {
    let $clickedElement = $(event.target);
    let dataId = $clickedElement.attr('data-wound-treatment-id');     

    let isChecked = $clickedElement.is(":checked");

    if (dataId == 0) {
        $('.wound-care-treatment-copy').prop('checked', isChecked);
        $('#woundCareTreatmentCopyBody').collapse('show');
        $('#wound-treatment-collapse-icon').removeClass('fa-plus-square').addClass('fa-minus-square');
    } else {
        $(`.wound-care-treatment-copy-${dataId}`).prop('checked', isChecked);
        $(`#woundCareTreatmentCopyBody_${dataId}`).collapse('show');
        $(`#wound-treatment-collapse-icon-${dataId}`).removeClass('fa-plus-square').addClass('fa-minus-square');
    }
});

$(document).on('change', function (event) {

    let $clickedElement = $(event.target);

    let dataId = $clickedElement.attr('data-wound-treatment');

    if (dataId == 0) {
        let allChecked = $('.wound-care-treatment-copy:checked').length === $('.wound-care-treatment-copy').length;
        $('#woundCareTreatmentCopyCheckAll').prop('checked', allChecked);
    } else {
        let allChecked = $(`.wound-care-treatment-copy-${dataId}:checked`).length === $(`.wound-care-treatment-copy-${dataId}`).length;
        $(`#woundCareTreatmentCopyCheckAll_${dataId}`).prop('checked', allChecked);
    }
});


$(document).on('click', function (event) {
    let $clickedElement = $(event.target);
    let dataId = $clickedElement.attr('data-dermitology-treatment-id');     

    let isDermitologyChecked = $clickedElement.is(":checked");

    if (dataId == 0) {
        $('.dermitology-treatment-copy').prop('checked', isDermitologyChecked);
        $('#dermitologyTreatmentCopyBody').collapse('show');
        $('#dermitology-treatment-collapse-icon').removeClass('fa-plus-square').addClass('fa-minus-square');
    } else {
        $(`.dermitology-treatment-copy-${dataId}`).prop('checked', isDermitologyChecked);
        $(`#dermitologyTreatmentCopyBody_${dataId}`).collapse('show');
        $(`#dermitology-treatment-collapse-icon-${dataId}`).removeClass('fa-plus-square').addClass('fa-minus-square');
    }
});

$(document).on('change', function (event) {

    let $clickedElement = $(event.target);

    let dataId = $clickedElement.attr('data-dermitology-treatment');

    if (dataId == 0) {
        let allChecked = $('.dermitology-treatment-copy:checked').length === $('.dermitology-treatment-copy').length;
        $('#dermitologyTreatmentCopyCheckAll').prop('checked', allChecked);
    } else {
        let allChecked = $(`.dermitology-treatment-copy-${dataId}:checked`).length === $(`.dermitology-treatment-copy-${dataId}`).length;
        $(`#dermitologyTreatmentCopyCheckAll_${dataId}`).prop('checked', allChecked);
    }
});

$('#dermitologyCopyTreatmentModal').on('hidden.bs.modal', function (e) {
    $(this).find(':checkbox').prop('checked', false);
    $(this).find(':radio').prop('checked', false);
    $('#dermitology-treatment-collapse-icon').removeClass('fa-plus-square').addClass('fa-minus-square');
    $('#dermitologyTreatmentCopyBody').collapse('show');

});


$("#dermitologyTreatmentCopyBtn").on('click', function(e){
      
    var checkedCheckboxes = $('#dermitologyTreatmentCopyForm :checkbox:checked');

    let dermoCardCount = $(this).attr('card-count');
    let treatmentCardCount = $(this).attr('treatment-count');

    var valuesByName = {};

    checkedCheckboxes.each(function() {
      var checkboxValue = $(this).val();
      var checkId = $(this).attr('name');

      if (valuesByName.hasOwnProperty(checkId)) {

        valuesByName[checkId] += ',' + checkboxValue;
      } else {
     
        valuesByName[checkId] = checkboxValue;
      }
    });

    $("#dermitologyCopyTreatmentModal").modal('hide');

    $.each(valuesByName, function(index, value) {
    var $element = $('#' + index);
    
    if (index === 'problem_' + dermoCardCount + '_cpt_' + treatmentCardCount) {
        var dataArray = value.split(',');
        $("#problem_" + dermoCardCount + "_cpt_" + treatmentCardCount).val(dataArray).trigger('change');
    }
    else if ($element.is('input:text') || $element.is('textarea')) {
        // For text inputs and textareas, use .val() to set their values
        $element.val(value);
    } 
    
});

triggerInputForTextAreas();

  
});

{# select2 code  #}

$(document).ready(function() {
    $('.select2').select2();

    // redo and undo functionality

            var undoHistory = [];
            var redoHistory = [];
            var currentFieldValues = {};

            function saveToUndoHistory() {
                undoHistory.push($.extend({}, currentFieldValues));
                
                redoHistory = [];
            }

            function updateFieldValues() {
                $('.field').each(function () {
                    var fieldName = getFieldIdentifier(this);
                    currentFieldValues[fieldName] = getFieldValue(this);
                });
            }

            $(document).on('click','#undo',function () {
                if (undoHistory.length > 0) {
                    var previousFieldValues = undoHistory.pop();
                    redoHistory.push($.extend({}, currentFieldValues));
                    setFieldValues(previousFieldValues);
                }
            });

            $(document).on('click','#redo',function () {
                
                if (redoHistory.length > 0) {
                    var nextFieldValues = redoHistory.pop();
                    undoHistory.push($.extend({}, currentFieldValues));
                    setFieldValues(nextFieldValues);
                 }
            });

            function getFieldIdentifier(fieldElement) {
                return $(fieldElement).attr('name');
            }

            function getFieldValue(fieldElement) {
                var fieldType = $(fieldElement).attr('type');
                if (fieldType === 'radio') {
                    return $('input[name="' + getFieldIdentifier(fieldElement) + '"]:checked').val();
                } else if (fieldType === 'checkbox') {
                    return $(fieldElement).prop('checked');
                } else {
                    return $(fieldElement).val();
                }
            }

            function setFieldValues(fieldValues) {
                for (var fieldName in fieldValues) {
                    var fieldElement = $('[name="' + fieldName + '"]');
                    setFieldValue(fieldElement, fieldValues[fieldName]);
                }
            }

            function setFieldValue(fieldElement, value) {
                var fieldType = $(fieldElement).attr('type');
                if (fieldType === 'radio') {
                    $('input[name="' + getFieldIdentifier(fieldElement) + '"][value="' + value + '"]').prop('checked', true);
                } else if (fieldType === 'checkbox') {
                    $(fieldElement).prop('checked', value);
                } else {
                    $(fieldElement).val(value);
                }
            }

            updateFieldValues();

        $('.field').on('change', function () {
            saveToUndoHistory();
            updateFieldValues();
        });
    });

    $(document).on('change', '.cpt_codes_dermitology_all', function () {

        let number = $(this).data('count');
        let problemNumber = $(this).data('problem');

        $('#dermo_wc_cpt_' + problemNumber + '_code_' + number).val($(this).val());

    });

    $(document).on('click','#refreshBilling', function(){
        retrieveBilling();
    });

    $(document).ready(function() {

    $("#physical_exam").select2();

    $('.textarea').on('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });

    triggerInputForTextAreas();

    triggerInputForNonEmptyTextareas();

});

function triggerInputForNonEmptyTextareas() {
    $('.textarea').on('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });
}


function triggerInputForTextAreas() {
     $('.textarea').each(function() {
            var existingText = $(this).val();
            if (existingText.trim() !== "") {
                $(this).trigger('input');
            }
    });
}


$(document).on('click',"#icd-delete", function(e){
    var confirmation = confirm("Are you sure you want to delete this item?");

    if (confirmation) {
    let id = $(this).attr('data-id');
    let name = $(this).attr('data-name');
    let data = new FormData();
    data.append('template_type', 'ICD Code Delete');
    data.append('template_id', id);
    $.ajax({
        url: '../../forms/woundcare/resources/templateDelete.php',
        type: 'POST',
        data: data,
        async: true,
        cache: false,
        contentType: false,
        processData: false,
        success: function (response) {
         
            $('.icd_codes_all option[value="' + name + '"]').remove();
            $('select[id^="icd_name_new_data"] option[value="' + id + '"]').remove();
            $('select[id^="wc_wound_icd-"] option[value="' + name + '"]').remove();

            $('#icd-delete').css({
                color: 'darkgray',
                cursor: 'auto',
                pointerEvents: 'none',
                cursor: 'not-allowed'
            });

             $('#addIcdCodeModel').modal('hide');
        },
    });
    
    } 

});

document.addEventListener('DOMContentLoaded', function () {
            var inputField = document.getElementById('icd_new_name');
            inputField.addEventListener('input', function () {
                this.value = this.value.trim();
            });
        });

 function calculateBMI() {
      
        var height = parseFloat($('#wc_ht').val());
        var weight = parseFloat($('#wc_wt').val());

        if (!isNaN(height) && !isNaN(weight)) {
      
             var bmi = weight / ((height/100) * (height/100));
        
            $('#wc_bmi').val(bmi);
        } else {
        
            $('#wc_bmi').val('');
        }
    }


    $('#wc_ht, #wc_wt').on('input', function() {
        calculateBMI();
    });


    $('#wc_ht, #wc_wt').on('keypress', function(e) {
        var keyCode = e.which;

        if (keyCode !== 8 && (keyCode < 48 || keyCode > 57)) {
            e.preventDefault();
        }
    });        


    var modal = $("#myModal");

    $(document).on("keydown", function(event) {
        if (event.key === "Escape") {
            modal.modal('hide');
        }
    });

    $(window).on("click", function(event) {
        if ($(event.target).is(modal)) {
            modal.hide();
        }
    });

    $('#myModal').on('hidden.bs.modal', function (e) {
        var iframe = document.getElementById("myFrame");
        iframe.src = iframe.src;
    });

    $( function() {
    $( "#myModal" ).draggable();
  } );

   window.addEventListener('message', function(event) {
    var receivedData = event.data;

    if (typeof receivedData === 'object') {
        return;
    }

    var existingText = document.getElementById("soapNoteTextarea").value;

    if (existingText.trim() !== "") {
        receivedData = "\n" + receivedData;
    }

    document.getElementById("soapNoteTextarea").value = existingText + receivedData;

    $("#soapNoteTextarea, #editAiNote").removeAttr("hidden");

    if (receivedData.trim() !== "") {
        $("#soapNoteTextarea").trigger('input');
    }
});



    $("#editAiNote").on('click', function(){
        $("#soapNoteTextarea").prop("readonly", function(i, val) {
            return !val;
        });
    });

    $('#soapNoteTextarea').on('input', function() {

        $(this).css('height', 'auto');
            
        var scrollHeight = this.scrollHeight;
        $(this).css('height', scrollHeight + 'px');
            
        this.scrollTop = this.scrollHeight - this.clientHeight;
    });


</script>
</html>
